<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ImpactMojo 101 Knowledge Series - Development Education for South Asia</title>
  <meta name="description" content="Curated library of development education courses covering justice, equity, and development practice in India and South Asia. 33 free, theory-grounded, context-applied knowledge decks.">
  <meta name="keywords" content="development education, South Asia, India, social justice, data feminism, development economics, public policy">
  <meta name="author" content="Dr. Varna Sri Raman">
  
  <!-- Enhanced Open Graph tags -->
  <meta property="og:title" content="ImpactMojo 101 Knowledge Series - Free Development Education">
  <meta property="og:description" content="Free development education courses for India and South Asia. 33 comprehensive courses covering data analysis, gender studies, economics, climate change and more.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://www.impactmojo.in">
  <meta property="og:image" content="https://www.impactmojo.in/assets/images/impactmojo-banner.jpg">
  <meta property="og:site_name" content="ImpactMojo">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="ImpactMojo 101 Knowledge Series">
  <meta name="twitter:description" content="Free development education courses for India and South Asia - 33 comprehensive courses">
  <meta name="twitter:image" content="https://www.impactmojo.in/assets/images/impactmojo-banner.jpg">
  
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Firebase SDK -->
<script type="module">
  import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.0.0/firebase-app.js';
  import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut, onAuthStateChanged, GoogleAuthProvider, signInWithPopup, sendPasswordResetEmail } from 'https://www.gstatic.com/firebasejs/10.0.0/firebase-auth.js';
  import { getFirestore, doc, setDoc, getDoc, updateDoc } from 'https://www.gstatic.com/firebasejs/10.0.0/firebase-firestore.js';

  // 🔥 FIREBASE CONFIGURATION 🔥
  const firebaseConfig = {
    apiKey: "YOUR_API_KEY_HERE",
    authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
    projectId: "YOUR_PROJECT_ID", 
    storageBucket: "YOUR_PROJECT_ID.appspot.com",
    messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
    appId: "YOUR_APP_ID"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  // Make Firebase available globally
  window.auth = auth;
  window.db = db;
  window.firebaseAuth = { signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut, onAuthStateChanged, GoogleAuthProvider, signInWithPopup, sendPasswordResetEmail };
  window.firestore = { doc, setDoc, getDoc, updateDoc };
</script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  
  <!-- Firebase CDN Scripts -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  
  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "EducationalOrganization",
    "name": "ImpactMojo",
    "description": "Curated library of development education courses for South Asia",
    "url": "https://www.impactmojo.in",
    "founder": {
      "@type": "Person",
      "name": "Dr. Varna Sri Raman"
    }
  }
  </script>

  <style>
    /* Skip link for accessibility */
    .skip-link {
      position: absolute;
      top: -40px;
      left: 6px;
      background: var(--primary-color);
      color: white;
      padding: 8px;
      text-decoration: none;
      border-radius: 4px;
      z-index: 9999;
      font-weight: bold;
    }
    
    .skip-link:focus {
      top: 6px;
    }

    :root {
      --primary-color: #2c3e50;
      --secondary-color: #3498db;
      --accent-color: #e74c3c;
      --success-color: #27ae60;
      --warning-color: #f39c12;
      --info-color: #8e44ad;
      --text-primary: #2c3e50;
      --text-secondary: #7f8c8d;
      --bg-primary: #ffffff;
      --card-bg: #ffffff;
      --light-bg: #f8f9fa;
      --border-color: #ecf0f1;
      --shadow: 0 2px 10px rgba(0,0,0,0.1);
      --shadow-hover: 0 4px 20px rgba(0,0,0,0.15);
      --transition: all 0.3s ease;
      --border-radius: 8px;
    }

    /* Dark mode variables */
    body.dark {
      --bg-primary: #1a1a1a;
      --card-bg: #2d2d2d;
      --border-color: #404040;
      --text-primary: #f0f0f0;
      --text-secondary: #b8b8b8;
      --light-bg: #333333;
      --shadow: 0 2px 12px rgba(0,0,0,0.3);
      --shadow-hover: 0 4px 20px rgba(0,0,0,0.4);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      line-height: 1.6;
      transition: var(--transition);
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1rem;
    }

    /* Theme Toggle Button */
    .theme-toggle {
      position: fixed;
      top: 15px;
      right: 15px;
      z-index: 1000;
      font-size: 1.2rem;
      background: var(--card-bg);
      border: 2px solid var(--border-color);
      color: var(--text-primary);
      cursor: pointer;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
      box-shadow: var(--shadow);
    }

    .theme-toggle:hover {
      transform: scale(1.1);
      box-shadow: var(--shadow-hover);
    }

    /* Header */
    header {
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      color: white;
      padding: 4rem 0;
      text-align: center;
    }

    h1 {
      font-family: 'Inter', sans-serif;
      font-size: 3rem;
      margin-bottom: 1rem;
      font-weight: 600;
      letter-spacing: -0.025em;
    }

    .subtitle {
      font-size: 1.2rem;
      opacity: 0.9;
      max-width: 800px;
      margin: 0 auto 2rem;
    }

    /* Navigation */
    nav {
      margin-top: 2rem;
      text-align: center;
    }

    nav a {
      color: white;
      text-decoration: none;
      margin: 0 1rem;
      padding: 0.5rem 1rem;
      background: rgba(255,255,255,0.2);
      border-radius: 20px;
      transition: var(--transition);
    }

    nav a:hover {
      background: rgba(255,255,255,0.3);
    }

    /* Latest Additions */
    .latest-additions {
      background: var(--card-bg);
      border-radius: var(--border-radius);
      padding: 2rem;
      margin: 2rem 0;
      box-shadow: var(--shadow);
      border: 1px solid var(--border-color);
    }

    .latest-additions h3 {
      color: var(--text-primary);
      margin-bottom: 1rem;
      font-size: 1.5rem;
    }

    .latest-additions ul {
      list-style: none;
    }

    .latest-additions li {
      padding: 0.5rem 0;
      border-bottom: 1px solid var(--border-color);
    }

    .latest-additions li:last-child {
      border-bottom: none;
    }

    .date {
      color: var(--text-secondary);
      font-size: 0.9rem;
    }

    /* Learning Paths */
    .learning-paths {
      margin: 3rem 0;
    }

    .learning-paths h3 {
      color: var(--text-primary);
      margin-bottom: 1.5rem;
      font-size: 1.8rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .paths-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1.5rem;
    }

    .path-card {
      background: var(--card-bg);
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      padding: 1.5rem;
      cursor: pointer;
      transition: var(--transition);
    }

    .path-card:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-hover);
    }

    .path-card h4 {
      color: var(--text-primary);
      margin-bottom: 0.5rem;
    }

    .path-description {
      color: var(--text-secondary);
      margin-bottom: 1rem;
      font-size: 0.9rem;
    }

    .path-courses {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    .path-course-tag {
      background: var(--light-bg);
      color: var(--text-secondary);
      padding: 0.25rem 0.5rem;
      border-radius: 12px;
      font-size: 0.8rem;
      border: 1px solid var(--border-color);
    }

    /* Popular Courses */
    .popular-courses {
      margin: 3rem 0;
      background: var(--card-bg);
      border-radius: var(--border-radius);
      padding: 2rem;
      box-shadow: var(--shadow);
      border: 1px solid var(--border-color);
    }

    .popular-courses h3 {
      color: var(--text-primary);
      margin-bottom: 1.5rem;
      font-size: 1.5rem;
    }

    .popular-list {
      display: grid;
      gap: 1rem;
    }

    .popular-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem;
      background: var(--light-bg);
      border-radius: var(--border-radius);
      border: 1px solid var(--border-color);
      transition: var(--transition);
    }

    .popular-item:hover {
      transform: translateY(-1px);
      box-shadow: var(--shadow);
    }

    .popular-rank {
      background: var(--secondary-color);
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 0.9rem;
      flex-shrink: 0;
    }

    /* Search Section */
    .search-section {
      margin: 3rem 0;
    }

    .search-container {
      position: relative;
      max-width: 600px;
      margin: 0 auto 2rem;
    }

    .search-icon {
      position: absolute;
      left: 1rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-secondary);
    }

    .search-input {
      width: 100%;
      padding: 1rem 1rem 1rem 3rem;
      border: 2px solid var(--border-color);
      border-radius: var(--border-radius);
      font-size: 1rem;
      transition: var(--transition);
      background: var(--bg-primary);
      color: var(--text-primary);
    }

    .search-input:focus {
      outline: none;
      border-color: var(--secondary-color);
    }

    /* Filters */
    .filters {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      justify-content: center;
      margin-bottom: 2rem;
    }

    .filter-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .filter-group label {
      font-weight: 500;
      color: var(--text-primary);
    }

    .filter-select {
      padding: 0.5rem;
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      background: var(--bg-primary);
      color: var(--text-primary);
    }

    .clear-filters {
      background: var(--accent-color);
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: var(--border-radius);
      cursor: pointer;
      transition: var(--transition);
    }

    .clear-filters:hover {
      background: #c0392b;
    }
    /* Stats Bar */
    .stats-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .course-count {
      color: var(--text-secondary);
    }

    .comparison-tools {
      display: flex;
      gap: 1rem;
      align-items: center;
    }

    .view-toggle {
      display: flex;
      gap: 0.25rem;
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
    }

    .view-btn {
      padding: 0.5rem;
      border: none;
      background: var(--bg-primary);
      cursor: pointer;
      transition: var(--transition);
      color: var(--text-primary);
    }

    .view-btn.active {
      background: var(--secondary-color);
      color: white;
    }

    .compare-btn,
    .secondary-btn {
      padding: 0.5rem 1rem;
      border: 1px solid var(--border-color);
      background: var(--bg-primary);
      cursor: pointer;
      border-radius: var(--border-radius);
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--text-primary);
    }

    .compare-btn:hover,
    .secondary-btn:hover {
      background: var(--light-bg);
    }

    /* Course Grid */
    .courses-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 1.5rem;
      margin-bottom: 3rem;
    }

    .courses-list {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-bottom: 3rem;
    }

    /* Course Cards */
    .course-card {
      background: var(--card-bg);
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      padding: 1.5rem;
      transition: var(--transition);
      cursor: pointer;
      position: relative;
    }

    .course-card:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-hover);
    }

    .course-card.expanded {
      transform: none;
      box-shadow: var(--shadow-hover);
    }

    .course-number {
      position: absolute;
      top: 0.75rem;
      right: 0.75rem;
      background: var(--secondary-color);
      color: white;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 0.85rem;
      z-index: 10;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .course-header {
      display: flex;
      gap: 1rem;
      align-items: flex-start;
      margin-bottom: 1rem;
    }

    .course-icon {
      width: 50px;
      height: 50px;
      background: var(--light-bg);
      border-radius: var(--border-radius);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--secondary-color);
      font-size: 1.5rem;
      flex-shrink: 0;
    }

    .course-title-section {
      flex: 1;
      padding-right: 2.5rem; /* Add padding to avoid overlap with course number */
    }

    .course-title {
      color: var(--text-primary);
      margin-bottom: 0.5rem;
      font-size: 1.1rem;
      font-weight: 600;
    }

    .course-meta {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .meta-tag {
      background: var(--light-bg);
      color: var(--text-secondary);
      padding: 0.25rem 0.5rem;
      border-radius: 12px;
      font-size: 0.8rem;
      border: 1px solid var(--border-color);
    }

    .course-description {
      color: var(--text-secondary);
      line-height: 1.6;
      margin-bottom: 1rem;
      font-size: 0.95rem;
    }

    .course-stats {
      display: flex;
      gap: 1rem;
      margin: 1rem 0;
      font-size: 0.85rem;
      color: var(--text-secondary);
    }

    .course-stat {
      display: flex;
      align-items: center;
      gap: 0.25rem;
    }

    .course-actions {
      display: flex;
      gap: 0.5rem;
      align-items: center;
      flex-wrap: wrap;
    }

    .course-actions-left {
      display: flex;
      gap: 0.5rem;
      flex: 1;
    }

    .launch-btn {
      background: var(--secondary-color);
      color: white;
      border: none;
      padding: 0.75rem 1rem;
      border-radius: var(--border-radius);
      cursor: pointer;
      transition: var(--transition);
      font-size: 0.9rem;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }

    .launch-btn:hover {
      background: #2980b9;
      transform: translateY(-1px);
      color: white;
    }

    .bookmark-btn {
      background: none;
      border: 1px solid var(--border-color);
      color: var(--text-secondary);
      padding: 0.75rem;
      border-radius: var(--border-radius);
      cursor: pointer;
      transition: var(--transition);
    }

    .bookmark-btn:hover {
      color: var(--warning-color);
      border-color: var(--warning-color);
    }

    .bookmark-btn.bookmarked {
      color: var(--warning-color);
      border-color: var(--warning-color);
      background: rgba(243, 156, 18, 0.1);
    }

    .compare-checkbox {
      margin-right: 0.5rem;
      transform: scale(1.2);
      cursor: pointer;
    }

    /* Expanded Course Details */
    .course-details {
      margin-top: 1rem;
      padding-top: 1rem;
      border-top: 1px solid var(--border-color);
      display: none;
    }

    .course-card.expanded .course-details {
      display: block;
    }

    .details-section {
      margin-bottom: 1rem;
    }

    .details-section h4 {
      color: var(--text-primary);
      margin-bottom: 0.5rem;
      font-size: 0.9rem;
    }

    .details-section ul {
      list-style: none;
      padding-left: 0;
    }

    .details-section li {
      padding: 0.25rem 0;
      color: var(--text-secondary);
      font-size: 0.9rem;
    }

    .details-section li::before {
      content: "•";
      color: var(--secondary-color);
      margin-right: 0.5rem;
    }

    /* No Results */
    .no-results {
      text-align: center;
      padding: 3rem;
      color: var(--text-secondary);
    }

    .no-results.hidden {
      display: none;
    }

    .no-results i {
      font-size: 3rem;
      margin-bottom: 1rem;
      color: var(--border-color);
    }

    /* User Dashboard */
    .user-dashboard {
      background: linear-gradient(135deg, var(--success-color), var(--secondary-color));
      color: white;
      padding: 2rem;
      margin: 2rem 0;
      border-radius: var(--border-radius);
      box-shadow: var(--shadow);
      display: none;
    }

    .dashboard-header {
      text-align: center;
      margin-bottom: 2rem;
    }

    .dashboard-header h2 {
      margin: 0 0 1rem 0;
      font-size: 1.8rem;
    }

    .dashboard-benefits {
      display: flex;
      gap: 2rem;
      justify-content: center;
      flex-wrap: wrap;
      margin-bottom: 2rem;
    }

    .benefit-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-weight: 500;
    }

    .dashboard-content {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
    }

    .dashboard-section {
      background: rgba(255,255,255,0.1);
      border-radius: var(--border-radius);
      padding: 1.5rem;
    }

    .dashboard-section h3 {
      margin: 0 0 1rem 0;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    /* Wall of Love */
    .wall-of-love {
      background: var(--card-bg);
      border-radius: var(--border-radius);
      padding: 2rem;
      margin-bottom: 3rem;
      box-shadow: var(--shadow);
      border: 1px solid var(--border-color);
    }

    .section-header {
      text-align: center;
      margin-bottom: 2rem;
    }

    .section-icon {
      font-size: 2rem;
      color: var(--accent-color);
      margin-bottom: 0.5rem;
    }

    .section-header h2 {
      color: var(--text-primary);
      font-family: 'Playfair Display', serif;
      font-size: 2.5rem;
    }

    .testimonial-stats {
      text-align: center;
      margin: 2rem 0;
      padding: 2rem;
      background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
      color: white;
      border-radius: var(--border-radius);
    }

    .stats-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 2rem;
    }

    .stat-item {
      text-align: center;
    }

    .stat-number {
      font-size: 2.5rem;
      font-weight: 700;
      font-family: 'Playfair Display', serif;
      display: block;
    }

    .stat-label {
      font-size: 0.9rem;
      opacity: 0.9;
    }

    .testimonials-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
      margin-top: 2rem;
    }

    .testimonial {
      background: var(--light-bg);
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      padding: 1.5rem;
      position: relative;
      transition: var(--transition);
    }

    .testimonial:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow);
    }

    .testimonial::before {
      content: '"';
      position: absolute;
      top: -10px;
      left: 15px;
      font-size: 4rem;
      color: var(--secondary-color);
      font-family: 'Playfair Display', serif;
      line-height: 1;
    }

    .testimonial-text {
      color: var(--text-secondary);
      line-height: 1.6;
      margin-bottom: 1rem;
      font-style: italic;
    }

    .testimonial-author {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .author-avatar {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: var(--secondary-color);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 1.2rem;
    }

    .author-info h5 {
      margin: 0;
      color: var(--text-primary);
      font-weight: 600;
    }

    .author-info p {
      margin: 0;
      color: var(--text-secondary);
      font-size: 0.9rem;
    }

    /* Social Share */
    .social-share {
      display: flex;
      gap: 1rem;
      justify-content: center;
      margin: 2rem 0;
      flex-wrap: wrap;
    }

    .share-btn {
      padding: 0.75rem;
      border-radius: 50%;
      color: white;
      text-decoration: none;
      font-size: 1.3rem;
      transition: var(--transition);
      width: 55px;
      height: 55px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 3px 10px rgba(0,0,0,0.2);
      position: relative;
      overflow: hidden;
    }

    .share-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: left 0.5s;
    }

    .share-btn:hover::before {
      left: 100%;
    }

    .share-btn:hover {
      transform: scale(1.15);
      box-shadow: 0 5px 20px rgba(0,0,0,0.3);
    }

    .share-btn.twitter { background: linear-gradient(135deg, #1da1f2, #0d8bd9); }
    .share-btn.linkedin { background: linear-gradient(135deg, #0077b5, #005582); }
    .share-btn.whatsapp { background: linear-gradient(135deg, #25d366, #1ebe57); }
    .share-btn.email { background: linear-gradient(135deg, var(--accent-color), #c0392b); }

    /* Extras Section */
    .extras {
      background: var(--card-bg);
      border-radius: var(--border-radius);
      padding: 2rem;
      margin-bottom: 3rem;
      box-shadow: var(--shadow);
      border: 1px solid var(--border-color);
    }

    .extras-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
      margin-top: 2rem;
    }

    .extras-card {
      background: var(--light-bg);
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      padding: 1.5rem;
      transition: var(--transition);
    }

    .extras-card:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow);
    }

    .extras-card h4 {
      color: var(--text-primary);
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .extras-card a {
      color: inherit;
      text-decoration: none;
    }

    .extras-card a:hover {
      color: var(--secondary-color);
    }

    /* Newsletter */
    .newsletter {
      background: var(--card-bg);
      border-radius: var(--border-radius);
      padding: 2rem;
      margin: 3rem 0;
      box-shadow: var(--shadow);
      border: 1px solid var(--border-color);
      text-align: center;
    }

    .newsletter h3 {
      margin: 0 0 1rem 0;
      color: var(--text-primary);
    }

    .newsletter p {
      color: var(--text-secondary);
      margin-bottom: 2rem;
    }

    .newsletter-form {
      display: flex;
      gap: 1rem;
      max-width: 400px;
      margin: 1rem auto 0;
    }

    .newsletter-form input {
      flex: 1;
      padding: 0.75rem;
      border: 2px solid var(--border-color);
      border-radius: var(--border-radius);
      font-size: 1rem;
      background: var(--bg-primary);
      color: var(--text-primary);
    }

    .newsletter-form button {
      background: var(--accent-color);
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: var(--border-radius);
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
    }

    .newsletter-form button:hover {
      background: #c0392b;
    }

    /* Author Section */
    .author {
      background: var(--card-bg);
      color: var(--text-primary);
      border-left: 4px solid var(--secondary-color);
      padding: 2rem;
      margin-top: 3rem;
      border-radius: var(--border-radius);
      box-shadow: var(--shadow);
      display: flex;
      gap: 2rem;
      align-items: flex-start;
    }

    .author-photo {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      object-fit: cover;
      flex-shrink: 0;
    }

    .author-content h3 {
      margin: 0 0 1rem 0;
      color: var(--text-primary);
      font-family: 'Playfair Display', serif;
    }

    .coaching-cta {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: var(--secondary-color);
      color: white;
      text-decoration: none;
      padding: 0.75rem 1.5rem;
      border-radius: var(--border-radius);
      margin: 1rem 0;
      transition: var(--transition);
      font-weight: 600;
    }

    .coaching-cta:hover {
      background: #2980b9;
      transform: translateY(-1px);
    }

    .author-links {
      display: flex;
      gap: 1rem;
      margin-top: 1rem;
    }

    .author-links a {
      color: var(--text-secondary);
      text-decoration: none;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .author-links a:hover {
      color: var(--secondary-color);
    }

    /* Floating Action Buttons */
    .fab-container {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 1000;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .fab-btn {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background: var(--secondary-color);
      color: white;
      border: none;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      cursor: pointer;
      box-shadow: var(--shadow);
      transition: var(--transition);
    }

    .fab-btn:hover {
      transform: scale(1.1);
      box-shadow: var(--shadow-hover);
    }

    .fab-btn.feedback { background: var(--warning-color); }
    .fab-btn.suggest { background: var(--success-color); }
    .fab-btn.question { background: var(--info-color); }

    /* Footer */
    .footer {
      background: var(--primary-color);
      color: white;
      padding: 3rem 0 1rem;
      margin-top: 3rem;
    }

    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1rem;
    }

    .footer-links {
      display: flex;
      flex-wrap: wrap;
      gap: 2rem;
      justify-content: center;
      margin-bottom: 2rem;
    }

    .footer-links a {
      color: white;
      text-decoration: none;
      opacity: 0.8;
      transition: var(--transition);
    }

    .footer-links a:hover {
      opacity: 1;
    }

    .disclaimer {
      background: var(--card-bg);
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      padding: 2rem;
      margin-bottom: 2rem;
      color: var(--text-primary);
      text-align: left;
    }

    .disclaimer h4 {
      color: var(--text-primary);
      margin: 0 0 1.5rem 0;
      font-size: 1.2rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    /* Modals */
    .modal {
      display: none;
      position: fixed;
      z-index: 2000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
    }

    .modal-content {
      background-color: var(--bg-primary);
      margin: 5% auto;
      padding: 2rem;
      border: none;
      border-radius: var(--border-radius);
      width: 90%;
      max-width: 600px;
      position: relative;
    }

    .modal-content.large {
      max-width: 900px;
    }

    .close {
      position: absolute;
      right: 1rem;
      top: 1rem;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--text-secondary);
    }

    .close:hover {
      color: var(--text-primary);
    }

    .form-group {
      margin-bottom: 1.5rem;
    }

    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
      color: var(--text-primary);
    }

    .form-group input,
    .form-group textarea,
    .form-group select {
      width: 100%;
      padding: 0.75rem;
      border: 2px solid var(--border-color);
      border-radius: var(--border-radius);
      background: var(--light-bg);
      color: var(--text-primary);
      font-family: inherit;
      transition: var(--transition);
    }

    .form-group input:focus,
    .form-group textarea:focus,
    .form-group select:focus {
      outline: none;
      border-color: var(--secondary-color);
      box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
    }

    .form-group textarea {
      resize: vertical;
      min-height: 100px;
    }

    .submit-btn {
      background: var(--secondary-color);
      color: white;
      border: none;
      padding: 0.75rem 2rem;
      border-radius: var(--border-radius);
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
    }

    .submit-btn:hover {
      background: #2980b9;
      transform: translateY(-1px);
    }

    /* Auth Navigation Styles */
    .auth-buttons {
      display: inline-flex;
      gap: 0.5rem;
      margin-left: 1rem;
    }

    .auth-btn {
      color: white !important;
      text-decoration: none;
      padding: 0.5rem 1rem;
      background: rgba(255,255,255,0.2);
      border-radius: 20px;
      transition: var(--transition);
      font-weight: 500;
      border: none;
      cursor: pointer;
    }

    .auth-btn.signup {
      background: var(--accent-color);
    }

    .auth-btn:hover {
      background: rgba(255,255,255,0.3);
      transform: translateY(-1px);
    }

    .auth-btn.signup:hover {
      background: #c0392b;
    }

    .user-menu {
      display: inline-flex;
      gap: 0.5rem;
      align-items: center;
      margin-left: 1rem;
    }

    .user-welcome {
      color: white !important;
      font-weight: 600;
      padding: 0.5rem 1rem;
      background: rgba(255,255,255,0.15);
      border-radius: 20px;
      text-decoration: none;
    }
    /* Signup Benefits Badge - CHANGED: right: 0 instead of right: -50px */
.signup-benefits-badge {
  position: absolute;
  top: calc(100% + 15px);
  right: 0;
  background: linear-gradient(135deg, #e74c3c, #c0392b);
  color: white;
  padding: 1rem;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(231, 76, 60, 0.3);
  z-index: 1500;
  min-width: 250px;
  font-size: 0.9rem;
  opacity: 0;
  visibility: hidden;
  transform: translateY(-10px);
  transition: all 0.3s ease;
  pointer-events: none;
}

.auth-btn.signup:hover + .signup-benefits-badge,
.signup-benefits-badge:hover {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
  pointer-events: auto;
}

.benefits-arrow {
  position: absolute;
  top: -8px;
  right: 70px;
  width: 0;
  height: 0;
  border-left: 8px solid transparent;
  border-right: 8px solid transparent;
  border-bottom: 8px solid #e74c3c;
}

.benefits-content h4 {
  margin: 0 0 0.5rem 0;
  font-size: 1rem;
  font-weight: 600;
}

.benefits-content ul {
  list-style: none;
  padding: 0;
  margin: 0 0 0.75rem 0;
}

.benefits-content li {
  padding: 0.2rem 0;
  font-size: 0.85rem;
}

.benefits-cta {
  background: rgba(255,255,255,0.2);
  padding: 0.4rem 0.8rem;
  border-radius: 20px;
  text-align: center;
  font-weight: 600;
  font-size: 0.8rem;
}
/* Comparison View */
    .comparison-view {
      background: var(--card-bg);
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      padding: 2rem;
      margin: 2rem 0;
      box-shadow: var(--shadow);
    }

    .comparison-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }

    .comparison-table th,
    .comparison-table td {
      padding: 1rem;
      text-align: left;
      border-bottom: 1px solid var(--border-color);
    }

    .comparison-table th {
      background: var(--light-bg);
      font-weight: 600;
    }

    .comparison-table tr:hover {
      background: var(--light-bg);
    }

    /* Topic Filter Enhanced */
    .topic-filter-enhanced {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 0.75rem;
      margin: 2rem 0;
    }

    .topic-btn {
      background: var(--light-bg);
      border: 2px solid var(--border-color);
      color: var(--text-secondary);
      padding: 0.75rem 1rem;
      border-radius: var(--border-radius);
      cursor: pointer;
      transition: var(--transition);
      font-weight: 500;
      position: relative;
      overflow: hidden;
    }

    .topic-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      transition: var(--transition);
    }

    .topic-btn[data-topic="economics"]::before { background: var(--economics-color); }
    .topic-btn[data-topic="gender"]::before { background: var(--gender-color); }
    .topic-btn[data-topic="justice"]::before { background: var(--justice-color); }
    .topic-btn[data-topic="climate"]::before { background: var(--climate-color); }
    .topic-btn[data-topic="data"]::before { background: var(--data-color); }
    .topic-btn[data-topic="research"]::before { background: var(--research-color); }
    .topic-btn[data-topic="development"]::before { background: var(--development-color); }
    .topic-btn[data-topic="media"]::before { background: var(--media-color); }
    .topic-btn[data-topic="identity"]::before { background: var(--identity-color); }
    .topic-btn[data-topic="livelihoods"]::before { background: var(--livelihoods-color); }
    .topic-btn[data-topic="health"]::before { background: var(--health-color); }
    .topic-btn[data-topic="education"]::before { background: var(--education-color); }
    .topic-btn[data-topic="systems"]::before { background: var(--systems-color); }

    .topic-btn:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow);
    }

    .topic-btn.active {
      background: var(--secondary-color);
      color: white;
      border-color: var(--secondary-color);
    }

    .topic-btn .count {
      opacity: 0.8;
      font-size: 0.85rem;
    }

    /* Member Access Section Enhanced */
    #floating-member-btn {
      position: fixed;
      bottom: 20px;
      left: 20px;
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, #f39c12, #e67e22);
      color: white;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 4px 20px rgba(243, 156, 18, 0.3);
      font-size: 20px;
      z-index: 999;
      transition: all 0.3s ease;
      animation: pulse 2s infinite;
    }

    #floating-member-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 30px rgba(243, 156, 18, 0.4);
    }

    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(243, 156, 18, 0.7); }
      70% { box-shadow: 0 0 0 15px rgba(243, 156, 18, 0); }
      100% { box-shadow: 0 0 0 0 rgba(243, 156, 18, 0); }
    }

    .member-features-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin: 30px 0;
    }

    .member-feature {
      background: rgba(255,255,255,0.1);
      padding: 20px;
      border-radius: 10px;
      text-align: center;
    }

    .member-feature i {
      font-size: 30px;
      margin-bottom: 10px;
    }

    .member-actions {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin-top: 30px;
    }

    .member-btn {
      padding: 12px 30px;
      border: none;
      border-radius: 25px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-block;
    }

    .member-btn.primary {
      background: white;
      color: #2c3e50;
    }

    .member-btn.secondary {
      background: transparent;
      color: white;
      border: 2px solid white;
    }

    .member-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }

    /* Progress Summary Styles */
    .progress-summary {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
      margin-bottom: 2rem;
    }

    .progress-stat {
      background: rgba(255,255,255,0.15);
      padding: 1.5rem;
      border-radius: var(--border-radius);
      text-align: center;
    }

    .stat-number {
      font-size: 2rem;
      font-weight: 700;
      display: block;
      margin-bottom: 0.5rem;
    }

    .stat-label {
      font-size: 0.9rem;
      opacity: 0.9;
    }

    /* Member Benefits Grid */
    .member-benefits-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
    }

    .benefit-card {
      background: rgba(255,255,255,0.15);
      padding: 1rem;
      border-radius: var(--border-radius);
      text-align: center;
    }

    .benefit-icon {
      font-size: 2rem;
      margin-bottom: 0.5rem;
      display: block;
    }

    /* Notes Section Styles */
    .notes-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }

    .word-count {
      font-size: 0.85rem;
      opacity: 0.8;
    }

    /* Study Group Styles */
    .study-group-item {
      background: rgba(255,255,255,0.1);
      padding: 1rem;
      border-radius: var(--border-radius);
      margin-bottom: 1rem;
    }

    .study-group-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.5rem;
    }

    .study-group-name {
      font-weight: 600;
    }

    .study-group-members {
      font-size: 0.85rem;
      opacity: 0.8;
    }

    /* Auth Modal Styles */
    .auth-container {
      background: white;
      border-radius: 15px;
      padding: 2rem;
      width: 100%;
      max-width: 400px;
      margin: 0 auto;
      box-shadow: 0 10px 40px rgba(0,0,0,0.1);
    }

    .auth-container h2 {
      text-align: center;
      color: #2c3e50;
      margin-bottom: 1.5rem;
      font-size: 1.8rem;
    }

    .auth-nav {
      display: flex;
      border-bottom: 2px solid #ecf0f1;
      margin-bottom: 1.5rem;
    }

    .auth-nav button {
      flex: 1;
      background: none;
      border: none;
      padding: 0.75rem;
      color: #7f8c8d;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
      position: relative;
    }

    .auth-nav button.active {
      color: #3498db;
    }

    .auth-nav button.active::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 0;
      right: 0;
      height: 2px;
      background: #3498db;
    }

    .auth-form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .auth-form input {
      padding: 0.75rem;
      border: 2px solid #ecf0f1;
      border-radius: 8px;
      font-size: 1rem;
      transition: all 0.3s ease;
    }

    .auth-form input:focus {
      outline: none;
      border-color: #3498db;
      box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
    }

    .auth-submit {
      background: #3498db;
      color: white;
      border: none;
      padding: 0.75rem;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 1rem;
    }

    .auth-submit:hover {
      background: #2980b9;
      transform: translateY(-1px);
    }

    .auth-divider {
      text-align: center;
      margin: 1.5rem 0;
      color: #7f8c8d;
      position: relative;
    }

    .auth-divider::before,
    .auth-divider::after {
      content: '';
      position: absolute;
      top: 50%;
      width: 40%;
      height: 1px;
      background: #ecf0f1;
    }

    .auth-divider::before { left: 0; }
    .auth-divider::after { right: 0; }

    .google-signin {
      background: white;
      border: 2px solid #ecf0f1;
      padding: 0.75rem;
      border-radius: 8px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      transition: all 0.3s ease;
      width: 100%;
      font-weight: 600;
    }

    .google-signin:hover {
      border-color: #4285f4;
      box-shadow: 0 2px 8px rgba(66, 133, 244, 0.2);
    }

    .google-signin img {
      width: 20px;
      height: 20px;
    }

    .auth-links {
      margin-top: 1rem;
      text-align: center;
    }

    .auth-links a {
      color: #3498db;
      text-decoration: none;
      font-size: 0.9rem;
    }

    .auth-links a:hover {
      text-decoration: underline;
    }

    /* Notification Styles */
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 1rem 1.5rem;
      border-radius: 8px;
      color: white;
      font-weight: 500;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      z-index: 10001;
      animation: slideInRight 0.3s ease;
    }

    @keyframes slideInRight {
      from { transform: translateX(100%); }
      to { transform: translateX(0); }
    }

    .notification.success { background: #27ae60; }
    .notification.error { background: #e74c3c; }
    .notification.info { background: #3498db; }
    .notification.warning { background: #f39c12; }

    /* Responsive Design */
    @media (max-width: 1200px) {
      .paths-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 768px) {
      .header h1 {
        font-size: 2rem;
      }
      
      .subtitle {
        font-size: 1rem;
      }
      
      nav {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 0.5rem;
      }
      
      nav a {
        margin: 0.25rem;
      }
      
      .author {
        flex-direcontinue
        tion: column;
        align-items: stretch;
      }
      
      .author {
        flex-direction: column;
        text-align: center;
        gap: 1rem;
      }
      
      .author-photo {
        align-self: center;
      }
      
      .fab-container {
        bottom: 15px;
        right: 15px;
      }
      
      .fab-btn {
        width: 50px;
        height: 50px;
        font-size: 1.1rem;
      }
      
      .modal-content {
        margin: 5% auto;
        padding: 1.5rem;
        width: 95%;
      }
      
      .latest-additions {
        padding: 1.5rem;
      }
      
      .extras-grid {
        grid-template-columns: 1fr;
        gap: 1rem;
      }
      
      .course-card {
        padding: 1rem;
      }
      
      .search-filters {
        padding: 1rem;
      }

      .newsletter-form {
        flex-direction: column;
        gap: 1rem;
      }

      .social-share {
        gap: 0.75rem;
      }

      .paths-grid {
        grid-template-columns: 1fr;
      }

      .popular-list {
        grid-template-columns: 1fr;
      }

      .search-operators {
        justify-content: center;
      }

      .comparison-table {
        font-size: 0.8rem;
      }

      .comparison-table th,
      .comparison-table td {
        padding: 0.5rem;
      }

      /* Member access responsive */
      .member-features-grid {
        grid-template-columns: 1fr;
        gap: 15px;
      }

      .member-actions {
        flex-direction: column;
        gap: 15px;
      }

      .member-access-section h2 {
        font-size: 24px;
      }

      .member-access-section p {
        font-size: 16px;
      }

      #floating-member-btn {
        bottom: 15px;
        left: 15px;
        width: 50px;
        height: 50px;
        font-size: 18px;
      }
    }

    @media (max-width: 480px) {
      .course-title h3 {
        font-size: 1.1rem;
      }
      
      .course-description {
        font-size: 0.9rem;
      }
      
      .launch-btn {
        padding: 0.6rem 1rem;
        font-size: 0.85rem;
      }
      
      .meta-tag {
        font-size: 0.75rem;
        padding: 0.2rem 0.6rem;
      }

      .share-btn {
        width: 45px;
        height: 45px;
        font-size: 1.1rem;
      }

      .topic-filter-enhanced {
        grid-template-columns: 1fr 1fr;
      }
    }

    .hidden {
      display: none !important;
    }

    .fade-in {
      animation: fadeIn 0.5s ease-in;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Lazy loading placeholder */
    .lazy-load {
      opacity: 0;
      transition: opacity 0.3s;
    }

    .lazy-load.loaded {
      opacity: 1;
    }
  </style>
</head>
<body>

<a href="#main-content" class="skip-link">Skip to main content</a>

<header class="header" role="banner">
  <div class="container">
    <button class="theme-toggle" onclick="toggleTheme()" title="Toggle dark/light theme" aria-label="Toggle dark and light theme">🌙</button>
    <h1>ImpactMojo 101 Knowledge Series</h1>
    <p><strong>ImpactMojo</strong> is a curated library of full-length knowledge decks that explore justice, equity, and development practice in India and South Asia. Each one is grounded in theory, applied in context, and ready for real-world use by educators, practitioners, and social researchers. As of May 2025, we have <strong>33 courses</strong> available, with a global reach spanning over <strong>45,000 learners</strong>. All courses are <strong>free</strong> and designed with an iterative approach that blends academic rigor with practical application.</p>
    <nav>
      <a href="#courses">Browse Courses</a>
      <a href="#extras">Resources</a>
      <a href="#about">About</a>
      <a href="#contact">Contact</a>
      <span class="auth-buttons" id="authButtons">
        <a href="#" class="auth-btn" onclick="openModal('authModal'); setAuthMode('login'); return false;">Login</a>
        <a href="#" class="auth-btn signup" onclick="openModal('authModal'); setAuthMode('signup'); return false;">Sign Up</a>
        <div class="signup-benefits-badge">
          <div class="benefits-arrow"></div>
          <div class="benefits-content">
            <h4>🎁 Member Benefits</h4>
            <ul>
              <li>📊 Track your progress</li>
              <li>🔖 Save bookmarks</li>
              <li>📝 Take private notes</li>
              <li>🎟️ 10% consulting discount</li>
            </ul>
            <div class="benefits-cta">Join 45,000+ learners!</div>
          </div>
        </div>
      </span>
      <span class="user-menu hidden" id="userMenu">
        <a href="#dashboard" class="user-welcome" onclick="scrollToDashboard(); return false;">
          <i class="fas fa-user-circle"></i> <span id="userDisplayName">My Dashboard</span>
        </a>
        <a href="#" class="auth-btn" onclick="logout(); return false;">Logout</a>
      </span>
    </nav>
  </div>
</header>

<main id="main-content" class="container">

  <!-- User Dashboard (Hidden by default, shown when logged in) -->
  <div class="user-dashboard" id="userDashboard" style="display: none;">
    <div class="dashboard-header">
      <h2><i class="fas fa-user-circle"></i> My ImpactMojo Dashboard</h2>
      <div class="dashboard-benefits">
        <div class="benefit-item">
          <i class="fas fa-chart-line"></i>
          <span>Track Your Progress</span>
        </div>
        <div class="benefit-item">
          <i class="fas fa-sticky-note"></i>
          <span>Private Notes</span>
        </div>
        <div class="benefit-item">
          <i class="fas fa-bookmark"></i>
          <span>Save Bookmarks</span>
        </div>
        <div class="benefit-item">
          <i class="fas fa-users"></i>
          <span>Study Groups</span>
        </div>
        <div class="benefit-item">
          <i class="fas fa-percentage"></i>
          <span>10% Consulting Discount</span>
        </div>
      </div>
    </div>

    <div class="dashboard-content">
      <!-- Learning Progress Section -->
      <div class="dashboard-section">
        <h3><i class="fas fa-graduation-cap"></i> Learning Progress</h3>
        <div class="progress-summary">
          <div class="progress-stat">
            <span class="stat-number" id="coursesStarted">0</span>
            <span class="stat-label">Courses Started</span>
          </div>
          <div class="progress-stat">
            <span class="stat-number" id="coursesCompleted">0</span>
            <span class="stat-label">Courses Completed</span>
          </div>
          <div class="progress-stat">
            <span class="stat-number" id="totalProgress">0%</span>
            <span class="stat-label">Overall Progress</span>
          </div>
        </div>
        <div style="margin-top: 1rem;">
          <h4>Recent Activity</h4>
          <div id="recentActivity" style="background: rgba(255,255,255,0.1); border-radius: 8px; padding: 1rem; margin-top: 0.5rem;">
            <p style="opacity: 0.8; font-style: italic;">No course activity yet. Start exploring courses below!</p>
          </div>
        </div>
      </div>

      <!-- Bookmarked Courses Section -->
      <div class="dashboard-section">
        <h3><i class="fas fa-bookmark"></i> My Bookmarks</h3>
        <div id="bookmarkedCoursesList">
          <p style="opacity: 0.8;">No bookmarked courses yet. Click the bookmark icon on any course to save it here!</p>
        </div>
      </div>

      <!-- Notes Section -->
      <div class="dashboard-section">
        <h3><i class="fas fa-sticky-note"></i> My Notes</h3>
        <div class="notes-header">
          <select id="notesCourse" onchange="loadNotes()" style="background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3); padding: 0.5rem; border-radius: 4px;">
            <option value="">Select a course...</option>
          </select>
          <span class="word-count" id="wordCount">0 words</span>
        </div>
        <textarea id="userNotes" placeholder="Select a course and start taking notes..." style="width: 100%; min-height: 150px; background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.3); padding: 1rem; border-radius: 8px; margin-top: 1rem; resize: vertical;"></textarea>
        <div style="margin-top: 1rem; display: flex; gap: 1rem;">
          <button onclick="saveNotes()" style="background: var(--success-color); color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer;">
            <i class="fas fa-save"></i> Save Notes
          </button>
          <button onclick="exportNotes()" style="background: var(--info-color); color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer;">
            <i class="fas fa-download"></i> Export as Text
          </button>
        </div>
      </div>

      <!-- Study Groups Section -->
      <div class="dashboard-section">
        <h3><i class="fas fa-users"></i> Study Groups</h3>
        <div class="study-group-item">
          <div class="study-group-header">
            <span class="study-group-name">Data Feminism Book Club</span>
            <span class="study-group-members">23 members</span>
          </div>
          <p style="font-size: 0.9rem; opacity: 0.8;">Weekly discussions on Data Feminism 101 course materials</p>
          <div style="margin-top: 0.5rem;">
            <button style="background: var(--secondary-color); color: white; border: none; padding: 0.4rem 0.8rem; border-radius: 4px; cursor: pointer; font-size: 0.8rem;">
              <i class="fas fa-comments"></i> Join Discussion
            </button>
          </div>
        </div>
        
        <div class="study-group-item">
          <div class="study-group-header">
            <span class="study-group-name">Gender Studies Researchers</span>
            <span class="study-group-members">8 members</span>
          </div>
          <p style="font-size: 0.9rem; opacity: 0.8;">Monthly virtual meetups for gender research collaboration</p>
          <div style="margin-top: 0.5rem;">
            <button style="background: var(--secondary-color); color: white; border: none; padding: 0.4rem 0.8rem; border-radius: 4px; cursor: pointer; font-size: 0.8rem;">
              <i class="fas fa-comments"></i> Join Discussion
            </button>
          </div>
        </div>
        
        <button onclick="openModal('createStudyGroupModal')" style="background: var(--success-color); color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 8px; cursor: pointer; margin-top: 1rem; width: 100%;">
          <i class="fas fa-plus"></i> Create New Study Group
        </button>
      </div>

      <!-- Member Benefits Section -->
      <div class="dashboard-section">
        <h3><i class="fas fa-star"></i> Member Benefits</h3>
        <div class="member-benefits-grid">
          <div class="benefit-card">
            <span class="benefit-icon">🎟️</span>
            <h4>10% Consulting Discount</h4>
            <p>Code: <strong>IMPACT10</strong></p>
          </div>
          <div class="benefit-card">
            <span class="benefit-icon">📊</span>
            <h4>Progress Analytics</h4>
            <p>Track your learning journey</p>
          </div>
          <div class="benefit-card">
            <span class="benefit-icon">🤝</span>
            <h4>Peer Network</h4>
            <p>Connect with professionals</p>
          </div>
          <div class="benefit-card">
            <span class="benefit-icon">📜</span>
            <h4>Certificates</h4>
            <p>Official completion certificates</p>
          </div>
        </div>
        <button onclick="window.open('mailto:varnasriraman@gmail.com?subject=Consulting%20Inquiry%20-%20ImpactMojo%20Member&body=Hi%20Dr.%20Raman,%0A%0AI%27m%20an%20ImpactMojo%20member%20interested%20in%20your%20consulting%20services.%20My%20discount%20code%20is:%20IMPACT10%0A%0A[Please%20describe%20your%20project%20or%20needs%20here]%0A%0AThank%20you!')" style="background: var(--warning-color); color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 8px; cursor: pointer; width: 100%; margin-top: 1rem;">
          <i class="fas fa-envelope"></i> Contact for Consulting
        </button>
      </div>
    </div>
  </div>
  <!-- Latest Additions -->
  <div class="latest-additions">
    <h3>🆕 Latest Additions</h3>
    <ul>
      <li>
        <strong>Education and Pedagogy 101</strong>
        <span class="date"> • Added May 2025</span>
      </li>
      <li>
        <strong>Public Health 101</strong>
        <span class="date"> • Added May 2025</span>
      </li>
      <li>
        <strong>Livelihoods 101</strong>
        <span class="date"> • Added April 2025</span>
      </li>
      <li>
        <strong>Gender Studies 101</strong>
        <span class="date"> • Added April 2025</span>
      </li>
    </ul>
  </div>

  <!-- Learning Paths -->
  <div class="learning-paths">
    <h3>🛤️ Recommended Learning Paths</h3>
    <div class="paths-grid">
      <div class="path-card" data-path="data-analysis">
        <h4>Data Analysis Track</h4>
        <p class="path-description">Master data skills from basics to advanced analysis</p>
        <div class="path-courses">
          <span class="path-course">Data Literacy 101</span>
          <span class="path-course">EDA for Survey Data</span>
          <span class="path-course">Bivariate Analysis</span>
          <span class="path-course">Multivariate Analysis</span>
        </div>
      </div>
      
      <div class="path-card" data-path="gender-studies">
        <h4>Gender Studies Pathway</h4>
        <p class="path-description">Comprehensive understanding of gender in development</p>
        <div class="path-courses">
          <span class="path-course">Gender Studies 101</span>
          <span class="path-course">Data Feminism 101</span>
          <span class="path-course">Care Economy</span>
          <span class="path-course">Women's Economic Empowerment</span>
        </div>
      </div>
      
      <div class="path-card" data-path="policy-economics">
        <h4>Policy & Economics</h4>
        <p class="path-description">Economic analysis for policy-making</p>
        <div class="path-courses">
          <span class="path-course">Development Economics 101</span>
          <span class="path-course">Social Protection</span>
          <span class="path-course">Public Finance</span>
          <span class="path-course">Policy Analysis</span>
        </div>
      </div>
      
      <div class="path-card" data-path="research-methods">
        <h4>Research Methods</h4>
        <p class="path-description">Build strong research foundations</p>
        <div class="path-courses">
          <span class="path-course">Research Methods 101</span>
          <span class="path-course">Systems Thinking</span>
          <span class="path-course">Design Thinking</span>
          <span class="path-course">MEL 101</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Popular Courses -->
  <div class="popular-courses">
    <h3>🔥 Most Popular Courses</h3>
    <div class="popular-list">
      <div class="popular-item">
        <span class="popular-rank">1</span>
        <div>
          <strong>Gender Studies 101</strong>
          <p>4,523 learners this month</p>
        </div>
      </div>
      <div class="popular-item">
        <span class="popular-rank">2</span>
        <div>
          <strong>Data Literacy 101</strong>
          <p>3,891 learners this month</p>
        </div>
      </div>
      <div class="popular-item">
        <span class="popular-rank">3</span>
        <div>
          <strong>Development Economics 101</strong>
          <p>3,256 learners this month</p>
        </div>
      </div>
      <div class="popular-item">
        <span class="popular-rank">4</span>
        <div>
          <strong>Climate Change & Society 101</strong>
          <p>2,987 learners this month</p>
        </div>
      </div>
      <div class="popular-item">
        <span class="popular-rank">5</span>
        <div>
          <strong>Research Methods 101</strong>
          <p>2,745 learners this month</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Member Access Section -->
  <div class="member-access-section">
    <h2>🚀 Unlock Your Learning Potential</h2>
    <p>Join thousands of learners tracking their progress and connecting with peers</p>
    
    <div class="member-features-grid">
      <div class="member-feature">
        <i class="fas fa-chart-line"></i>
        <h4>Track Progress</h4>
        <p>Monitor your learning journey</p>
      </div>
      <div class="member-feature">
        <i class="fas fa-sticky-note"></i>
        <h4>Take Notes</h4>
        <p>Private notes for each course</p>
      </div>
      <div class="member-feature">
        <i class="fas fa-users"></i>
        <h4>Study Groups</h4>
        <p>Connect with fellow learners</p>
      </div>
      <div class="member-feature">
        <i class="fas fa-percentage"></i>
        <h4>10% Discount</h4>
        <p>On consulting services</p>
      </div>
    </div>
    
    <div class="member-actions">
      <button class="member-btn primary" onclick="openModal('authModal'); setAuthMode('signup');">
        Sign Up Free
      </button>
      <button class="member-btn secondary" onclick="openModal('authModal'); setAuthMode('login');">
        Login
      </button>
    </div>
  </div>

  <!-- Floating Member Button -->
  <button id="floating-member-btn" onclick="openModal('memberBenefitsModal')">
    <i class="fas fa-star"></i>
  </button>

  <!-- Course Search Section -->
  <section class="search-section" id="courses">
    <h2>🔍 Find Your Course</h2>
    
    <div class="search-container">
      <i class="fas fa-search search-icon"></i>
      <input type="text" class="search-input" id="searchInput" placeholder="Search courses by title, topic, or keyword..." aria-label="Search courses">
    </div>

    <!-- Topic Filter Buttons -->
    <div class="topic-filter-enhanced" id="topicFilterEnhanced">
      <button class="topic-btn" data-topic="all" onclick="filterByTopic('all')">
        All Courses <span class="count">(33)</span>
      </button>
      <button class="topic-btn" data-topic="economics">
        Economics <span class="count">(4)</span>
      </button>
      <button class="topic-btn" data-topic="gender">
        Gender <span class="count">(6)</span>
      </button>
      <button class="topic-btn" data-topic="justice">
        Justice <span class="count">(3)</span>
      </button>
      <button class="topic-btn" data-topic="climate">
        Climate <span class="count">(2)</span>
      </button>
      <button class="topic-btn" data-topic="data">
        Data <span class="count">(8)</span>
      </button>
      <button class="topic-btn" data-topic="research">
        Research <span class="count">(4)</span>
      </button>
      <button class="topic-btn" data-topic="development">
        Development <span class="count">(12)</span>
      </button>
      <button class="topic-btn" data-topic="media">
        Media <span class="count">(3)</span>
      </button>
      <button class="topic-btn" data-topic="identity">
        Identity <span class="count">(4)</span>
      </button>
      <button class="topic-btn" data-topic="livelihoods">
        Livelihoods <span class="count">(2)</span>
      </button>
      <button class="topic-btn" data-topic="health">
        Health <span class="count">(2)</span>
      </button>
      <button class="topic-btn" data-topic="education">
        Education <span class="count">(2)</span>
      </button>
      <button class="topic-btn" data-topic="systems">
        Systems <span class="count">(3)</span>
      </button>
    </div>

    <!-- Filters -->
    <div class="filters">
      <div class="filter-group">
        <label for="difficultyFilter">Difficulty</label>
        <select class="filter-select" id="difficultyFilter">
          <option value="">All Levels</option>
          <option value="Beginner">Beginner</option>
          <option value="Intermediate">Intermediate</option>
          <option value="Advanced">Advanced</option>
        </select>
      </div>
      
      <div class="filter-group">
        <label for="durationFilter">Duration</label>
        <select class="filter-select" id="durationFilter">
          <option value="">Any Duration</option>
          <option value="0-2">Under 2 hours</option>
          <option value="2-5">2-5 hours</option>
          <option value="5+">5+ hours</option>
        </select>
      </div>
      
      <div class="filter-group">
        <label for="sortBy">Sort By</label>
        <select class="filter-select" id="sortBy">
          <option value="popular">Most Popular</option>
          <option value="newest">Newest First</option>
          <option value="rating">Highest Rated</option>
          <option value="alphabetical">A-Z</option>
        </select>
      </div>
      
      <button class="clear-filters" onclick="clearFilters()">
        <i class="fas fa-times"></i> Clear Filters
      </button>
    </div>

    <!-- Course Count and View Options -->
    <div style="display: flex; justify-content: space-between; align-items: center; margin: 2rem 0 1rem 0;">
      <p id="courseCount" style="color: var(--text-secondary);">Showing 33 courses</p>
      <div>
        <button id="compareBtn" class="secondary-btn" onclick="toggleCompareMode()" style="display: none;">
          <i class="fas fa-columns"></i> Compare (<span id="compareCount">0</span>)
        </button>
      </div>
    </div>

    <!-- Comparison View (Hidden by default) -->
    <div id="comparisonView" class="comparison-view hidden">
      <h3>Course Comparison</h3>
      <div id="comparisonContent">
        <p>Select courses to compare using the checkboxes.</p>
      </div>
      <button onclick="toggleCompareMode()" class="secondary-btn" style="margin-top: 1rem;">
        <i class="fas fa-times"></i> Close Comparison
      </button>
    </div>

    <!-- Course Grid -->
    <div class="course-grid" id="courseGrid">
      <!-- Courses will be dynamically loaded here -->
    </div>

    <!-- No Results Message -->
    <div class="no-results hidden" id="noResults">
      <i class="fas fa-search"></i>
      <h3>No courses found</h3>
      <p>Try adjusting your search or filters</p>
    </div>
  </section>
  <!-- Wall of Love -->
  <section class="wall-of-love">
    <div class="section-header">
      <div class="section-icon">💕</div>
      <h2>Wall of Love</h2>
      <p style="color: var(--text-secondary); margin-top: 0.5rem;">What learners are saying about ImpactMojo</p>
    </div>

    <div class="testimonial-stats">
      <div class="stats-row">
        <div class="stat-item">
          <span class="stat-number">45,000+</span>
          <span class="stat-label">Global Learners</span>
        </div>
        <div class="stat-item">
          <span class="stat-number">4.8/5</span>
          <span class="stat-label">Average Rating</span>
        </div>
        <div class="stat-item">
          <span class="stat-number">92%</span>
          <span class="stat-label">Completion Rate</span>
        </div>
        <div class="stat-item">
          <span class="stat-number">127</span>
          <span class="stat-label">Countries Reached</span>
        </div>
      </div>
    </div>

    <div class="testimonials-grid">
      <div class="testimonial">
        <p class="testimonial-text">The Gender Studies 101 course transformed how I approach development work. The South Asian context and real-world examples made complex theories accessible and immediately applicable.</p>
        <div class="testimonial-author">
          <div class="author-avatar">PS</div>
          <div class="author-info">
            <h5>Priya Sharma</h5>
            <p>Development Practitioner, Delhi</p>
          </div>
        </div>
      </div>

      <div class="testimonial">
        <p class="testimonial-text">As a data analyst, the Data Feminism course opened my eyes to biases I hadn't considered. It's changed how I collect, analyze, and present data in my research.</p>
        <div class="testimonial-author">
          <div class="author-avatar">RK</div>
          <div class="author-info">
            <h5>Rajesh Kumar</h5>
            <p>Research Analyst, Mumbai</p>
          </div>
        </div>
      </div>

      <div class="testimonial">
        <p class="testimonial-text">The MEL 101 course provided practical tools I use daily. The templates and frameworks have streamlined our project monitoring significantly.</p>
        <div class="testimonial-author">
          <div class="author-avatar">AM</div>
          <div class="author-info">
            <h5>Ayesha Malik</h5>
            <p>Program Manager, Karachi</p>
          </div>
        </div>
      </div>

      <div class="testimonial">
        <p class="testimonial-text">Climate Change & Society 101 brilliantly connects global issues with local South Asian realities. Essential reading for anyone in environmental policy.</p>
        <div class="testimonial-author">
          <div class="author-avatar">ST</div>
          <div class="author-info">
            <h5>Sanjay Thapa</h5>
            <p>Environmental Consultant, Kathmandu</p>
          </div>
        </div>
      </div>

      <div class="testimonial">
        <p class="testimonial-text">The Research Methods course gave me confidence to pursue my PhD. The systematic approach and practical exercises were invaluable.</p>
        <div class="testimonial-author">
          <div class="author-avatar">NP</div>
          <div class="author-info">
            <h5>Nisha Patel</h5>
            <p>PhD Student, Bangalore</p>
          </div>
        </div>
      </div>

      <div class="testimonial">
        <p class="testimonial-text">Development Economics 101 bridges theory and practice beautifully. The case studies from India helped me understand complex economic concepts.</p>
        <div class="testimonial-author">
          <div class="author-avatar">AR</div>
          <div class="author-info">
            <h5>Ahmed Rahman</h5>
            <p>Policy Analyst, Dhaka</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Extras Section -->
  <section class="extras" id="extras">
    <h3>📚 Additional Resources</h3>
    <p>Complement your learning with these curated resources. Access <strong><a href="https://github.com/Varnasr/ImpactMojo/tree/main/extras" target="_blank">additional materials on GitHub</a></strong>.</p>
    
    <div class="extras-grid">
      <div class="extras-card" data-extra-type="handouts">
        <h4><i class="fas fa-chalkboard-teacher"></i> Educational Handouts</h4>
        <p>Downloadable 2-page summaries for workshops and teaching. Perfect for quick reference and classroom use.</p>
        <a href="https://github.com/Varnasr/ImpactMojo/tree/main/extras/handouts" target="_blank">Access Handouts →</a>
      </div>
      
      <div class="extras-card" data-extra-type="research">
        <h4><i class="fas fa-flask"></i> Research Design Resources</h4>
        <p>Templates, frameworks, and tools for designing robust research studies in development contexts.</p>
        <a href="https://github.com/Varnasr/ImpactMojo/tree/main/extras/research-design" target="_blank">Explore Resources →</a>
      </div>
      
      <div class="extras-card" data-extra-type="health">
        <h4><i class="fas fa-heartbeat"></i> Public Health Materials</h4>
        <p>CDC-developed frameworks and WHO guidelines adapted for South Asian health contexts.</p>
        <a href="https://github.com/Varnasr/ImpactMojo/tree/main/extras/public-health" target="_blank">View Materials →</a>
      </div>
      
      <div class="extras-card" data-extra-type="data">
        <h4><i class="fas fa-code"></i> Data Analysis Toolkit</h4>
        <p>R scripts, Python notebooks, and Excel templates for development data analysis.</p>
        <a href="https://github.com/Varnasr/ImpactMojo/tree/main/extras/data-analysis" target="_blank">Get Tools →</a>
      </div>
    </div>
  </section>

  <!-- Social Share Section -->
  <div class="social-share">
    <h3 style="text-align: center; margin-bottom: 1rem;">Share ImpactMojo</h3>
    <a href="https://twitter.com/intent/tweet?text=Check%20out%20ImpactMojo%20-%2033%20free%20development%20education%20courses%20for%20South%20Asia!&url=https://www.impactmojo.in" target="_blank" class="share-btn twitter">
      <i class="fab fa-twitter"></i>
    </a>
    <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://www.impactmojo.in" target="_blank" class="share-btn linkedin">
      <i class="fab fa-linkedin"></i>
    </a>
    <a href="https://wa.me/?text=Check%20out%20ImpactMojo%20-%2033%20free%20development%20education%20courses%20for%20South%20Asia!%20https://www.impactmojo.in" target="_blank" class="share-btn whatsapp">
      <i class="fab fa-whatsapp"></i>
    </a>
    <a href="mailto:?subject=ImpactMojo%20-%20Free%20Development%20Education&body=I%20found%20this%20amazing%20resource%20-%20ImpactMojo%20offers%2033%20free%20development%20education%20courses%20for%20South%20Asia.%20Check%20it%20out:%20https://www.impactmojo.in" class="share-btn email">
      <i class="fas fa-envelope"></i>
    </a>
  </div>

  <!-- Newsletter Section -->
  <section class="newsletter">
    <h3>📧 Stay Updated</h3>
    <p>Get notified when new courses are added</p>
    <form class="newsletter-form" onsubmit="subscribeNewsletter(event)">
      <input type="email" placeholder="Your email address" required>
      <button type="submit">Subscribe</button>
    </form>
  </section>

  <!-- Author Section -->
  <section class="author" id="about">
    <img src="https://github.com/Varnasr/ImpactMojo/blob/main/varna_sri_raman.jpg?raw=true" alt="Dr. Varna Sri Raman" class="author-photo">
    <div class="author-content">
      <h3>Dr. Varna Sri Raman</h3>
      <p>ImpactMojo is curated by Dr. Varna Sri Raman, a development economist and educator with over 15 years of experience in South Asian development practice. She specializes in gender-responsive research, data analysis, and capacity building.</p>
      <p>Dr. Raman holds a PhD in Development Economics and has worked with organizations including the World Bank, UN Women, and various NGOs across India, Pakistan, Bangladesh, and Nepal.</p>
      <a href="mailto:varnasriraman@gmail.com?subject=1:1%20Development%20Coaching%20Inquiry" class="coaching-cta">
        <i class="fas fa-video"></i> Book 1:1 Coaching Session
      </a>
      <div class="author-links">
        <a href="https://www.linkedin.com/in/varnasr" target="_blank">
          <i class="fab fa-linkedin"></i> LinkedIn
        </a>
        <a href="https://twitter.com/varnasr" target="_blank">
          <i class="fab fa-twitter"></i> Twitter
        </a>
        <a href="https://github.com/Varnasr" target="_blank">
          <i class="fab fa-github"></i> GitHub
        </a>
      </div>
    </div>
  </section>

  <!-- Disclaimer -->
  <div class="disclaimer">
    <h4><i class="fas fa-info-circle"></i> Important Information</h4>
    <p><strong>Creative Commons License:</strong> All ImpactMojo courses are licensed under CC BY-NC-SA 4.0. You're free to use, adapt, and share for non-commercial purposes with attribution.</p>
    <p><strong>Academic Use:</strong> Students and educators are encouraged to use these materials. Please cite as: "Raman, V.S. (2025). [Course Title]. ImpactMojo 101 Knowledge Series. Available at: www.impactmojo.in"</p>
    <p><strong>Updates:</strong> Content is regularly updated based on user feedback and new research. Check course pages for revision dates.</p>
    <p><strong>Accessibility:</strong> We're committed to making our content accessible. If you need materials in alternative formats, please <a href="mailto:varnasriraman@gmail.com">contact us</a>.</p>
  </div>
</main>
<!-- Footer -->
<footer class="footer">
  <div class="footer-content">
    <div class="footer-links">
      <a href="https://github.com/Varnasr/ImpactMojo">GitHub Repository</a>
      <a href="mailto:varnasriraman@gmail.com">Contact</a>
      <a href="#courses">All Courses</a>
      <a href="#about">About</a>
      <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a>
    </div>
    <p style="text-align: center; opacity: 0.8; margin-top: 1rem;">© 2025 ImpactMojo. Made with 💚 for South Asian development practitioners.</p>
  </div>
</footer>

<!-- Floating Action Buttons -->
<div class="fab-container">
  <button class="fab-btn feedback" onclick="openModal('feedbackModal')" title="Send Feedback">
    <i class="fas fa-comment"></i>
  </button>
  <button class="fab-btn suggest" onclick="openModal('suggestModal')" title="Suggest a Course">
    <i class="fas fa-lightbulb"></i>
  </button>
  <button class="fab-btn question" onclick="openModal('questionModal')" title="Ask a Question">
    <i class="fas fa-question"></i>
  </button>
</div>

<!-- Modals -->
<!-- Authentication Modal -->
<div id="authModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('authModal')">&times;</span>
    
    <div class="auth-container">
      <h2 id="authTitle">Welcome to ImpactMojo</h2>
      
      <div class="auth-nav">
        <button id="loginTab" class="active" onclick="setAuthMode('login')">Login</button>
        <button id="signupTab" onclick="setAuthMode('signup')">Sign Up</button>
      </div>
      
      <form id="authForm" class="auth-form" onsubmit="handleAuth(event)">
        <input type="email" id="authEmail" placeholder="Email address" required>
        <input type="password" id="authPassword" placeholder="Password" required>
        <input type="password" id="confirmPassword" placeholder="Confirm password" style="display: none;">
        <input type="text" id="displayName" placeholder="Your name" style="display: none;">
        
        <button type="submit" class="auth-submit" id="authSubmitBtn">Login</button>
      </form>
      
      <div class="auth-divider">OR</div>
      
      <button class="google-signin" onclick="signInWithGoogle()">
        <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google">
        Continue with Google
      </button>
      
      <div class="auth-links">
        <a href="#" onclick="openModal('resetPasswordModal'); closeModal('authModal'); return false;">Forgot password?</a>
      </div>
    </div>
  </div>
</div>

<!-- Reset Password Modal -->
<div id="resetPasswordModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('resetPasswordModal')">&times;</span>
    <h2>Reset Password</h2>
    <p>Enter your email address and we'll send you a password reset link.</p>
    <form onsubmit="resetPassword(event)">
      <div class="form-group">
        <input type="email" id="resetEmail" placeholder="Your email address" required>
      </div>
      <button type="submit" class="submit-btn">Send Reset Link</button>
    </form>
    <div style="margin-top: 1rem; text-align: center;">
      <a href="#" onclick="closeModal('resetPasswordModal'); openModal('authModal'); return false;">Back to login</a>
    </div>
  </div>
</div>

<!-- Member Benefits Modal -->
<div id="memberBenefitsModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('memberBenefitsModal')">&times;</span>
    <h2>🌟 Member Benefits</h2>
    <div class="member-features-grid" style="color: var(--text-primary);">
      <div class="member-feature" style="background: var(--light-bg);">
        <i class="fas fa-chart-line" style="color: var(--secondary-color);"></i>
        <h4>Progress Tracking</h4>
        <p>Monitor your learning journey across all courses</p>
      </div>
      <div class="member-feature" style="background: var(--light-bg);">
        <i class="fas fa-sticky-note" style="color: var(--warning-color);"></i>
        <h4>Private Notes</h4>
        <p>Take and save notes for each course</p>
      </div>
      <div class="member-feature" style="background: var(--light-bg);">
        <i class="fas fa-bookmark" style="color: var(--info-color);"></i>
        <h4>Smart Bookmarks</h4>
        <p>Save courses and access them anytime</p>
      </div>
      <div class="member-feature" style="background: var(--light-bg);">
        <i class="fas fa-users" style="color: var(--success-color);"></i>
        <h4>Study Groups</h4>
        <p>Join or create study groups</p>
      </div>
    </div>
    <div style="text-align: center; margin-top: 2rem;">
      <h3 style="color: var(--accent-color);">🎟️ Special Offer: 10% Consulting Discount</h3>
      <p>Members get 10% off all consulting services with code <strong>IMPACT10</strong></p>
      <button onclick="closeModal('memberBenefitsModal'); openModal('authModal'); setAuthMode('signup');" class="submit-btn" style="margin-top: 1rem;">
        Join Now - It's Free!
      </button>
    </div>
  </div>
</div>

<!-- Feedback Modal -->
<div id="feedbackModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('feedbackModal')">&times;</span>
    <h2>Send Feedback</h2>
    <form onsubmit="submitFeedback(event)">
      <div class="form-group">
        <label for="feedbackType">Feedback Type</label>
        <select id="feedbackType" required>
          <option value="">Select type...</option>
          <option value="bug">Bug Report</option>
          <option value="feature">Feature Request</option>
          <option value="content">Content Feedback</option>
          <option value="general">General Feedback</option>
        </select>
      </div>
      <div class="form-group">
        <label for="feedbackEmail">Your Email (optional)</label>
        <input type="email" id="feedbackEmail" placeholder="your@email.com">
      </div>
      <div class="form-group">
        <label for="feedbackMessage">Your Feedback</label>
        <textarea id="feedbackMessage" placeholder="Share your thoughts..." required></textarea>
      </div>
      <button type="submit" class="submit-btn">Send Feedback</button>
    </form>
  </div>
</div>

<!-- Suggest Course Modal -->
<div id="suggestModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('suggestModal')">&times;</span>
    <h2>Suggest a Course</h2>
    <p>What topic would you like to see covered in ImpactMojo?</p>
    <form onsubmit="submitSuggestion(event)">
      <div class="form-group">
        <label for="suggestionTitle">Course Title</label>
        <input type="text" id="suggestionTitle" placeholder="e.g., Urban Planning 101" required>
      </div>
      <div class="form-group">
        <label for="suggestionDescription">Why this topic?</label>
        <textarea id="suggestionDescription" placeholder="Describe why this would be valuable..." required></textarea>
      </div>
      <div class="form-group">
        <label for="suggestionEmail">Your Email (optional)</label>
        <input type="email" id="suggestionEmail" placeholder="your@email.com">
      </div>
      <button type="submit" class="submit-btn">Submit Suggestion</button>
    </form>
  </div>
</div>

<!-- Ask Question Modal -->
<div id="questionModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('questionModal')">&times;</span>
    <h2>Ask a Question</h2>
    <form onsubmit="submitQuestion(event)">
      <div class="form-group">
        <label for="questionCourse">Related Course (optional)</label>
        <select id="questionCourse">
          <option value="">General Question</option>
          <option value="gender-studies">Gender Studies 101</option>
          <option value="data-literacy">Data Literacy 101</option>
          <option value="development-economics">Development Economics 101</option>
          <!-- Add more options dynamically -->
        </select>
      </div>
      <div class="form-group">
        <label for="questionText">Your Question</label>
        <textarea id="questionText" placeholder="What would you like to know?" required></textarea>
      </div>
      <div class="form-group">
        <label for="questionEmail">Your Email</label>
        <input type="email" id="questionEmail" placeholder="your@email.com" required>
      </div>
      <button type="submit" class="submit-btn">Submit Question</button>
    </form>
  </div>
</div>

<!-- Create Study Group Modal -->
<div id="createStudyGroupModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('createStudyGroupModal')">&times;</span>
    <h2>Create Study Group</h2>
    <form onsubmit="createStudyGroup(event)">
      <div class="form-group">
        <label for="groupName">Group Name</label>
        <input type="text" id="groupName" placeholder="e.g., Data Analysis Enthusiasts" required>
      </div>
      <div class="form-group">
        <label for="groupCourse">Focus Course</label>
        <select id="groupCourse" required>
          <option value="">Select a course...</option>
          <!-- Courses will be populated dynamically -->
        </select>
      </div>
      <div class="form-group">
        <label for="groupDescription">Description</label>
        <textarea id="groupDescription" placeholder="What's this group about?" required></textarea>
      </div>
      <button type="submit" class="submit-btn">Create Group</button>
    </form>
  </div>
</div>
<!-- JavaScript -->
<script>
// Course Data with Enhanced Properties
const courses = [
  {
    id: 'gender-studies',
    number: 1,
    title: 'Gender Studies 101',
    topics: ['gender', 'justice', 'development'],
    description: 'Comprehensive introduction to gender theory and practice in South Asian development contexts. Covers intersectionality, masculinities, and practical frameworks for gender-responsive programming.',
    difficulty: 'Beginner',
    duration: '3 hours',
    icon: 'fas fa-venus-mars',
    url: 'https://101.www.impactmojo.in/gsi',
    prerequisites: ['None - perfect for beginners'],
    outcomes: ['Understand gender as a social construct', 'Apply intersectional analysis', 'Design gender-responsive programs'],
    audience: 'Development practitioners, students, researchers',
    learnerCount: 4523,
    rating: 4.9,
    relatedExtras: ['handouts', 'research']
  },
  {
    id: 'data-literacy',
    number: 2,
    title: 'Data Literacy 101',
    topics: ['data', 'research'],
    description: 'Essential data skills for development professionals. Learn to find, evaluate, clean, and interpret data with a focus on South Asian datasets and contexts.',
    difficulty: 'Beginner',
    duration: '4 hours',
    icon: 'fas fa-chart-bar',
    url: 'https://101.www.impactmojo.in/dl',
    prerequisites: ['Basic computer skills'],
    outcomes: ['Evaluate data quality', 'Clean and prepare datasets', 'Create basic visualizations'],
    audience: 'M&E professionals, researchers, program managers',
    learnerCount: 3891,
    rating: 4.8,
    relatedExtras: ['data', 'handouts']
  },
  {
    id: 'climate-change',
    number: 3,
    title: 'Climate Change & Society 101',
    topics: ['climate', 'development', 'justice'],
    description: 'Explore climate change through a social justice lens. Understand impacts on vulnerable communities in South Asia and learn about adaptation and mitigation strategies.',
    difficulty: 'Intermediate',
    duration: '5 hours',
    icon: 'fas fa-globe-asia',
    url: 'https://101.www.impactmojo.in/cc',
    prerequisites: ['Basic understanding of development concepts'],
    outcomes: ['Analyze climate vulnerability', 'Design adaptation strategies', 'Integrate climate considerations in projects'],
    audience: 'Environmental practitioners, policy makers, activists',
    learnerCount: 2987,
    rating: 4.7,
    relatedExtras: ['handouts']
  },
  {
    id: 'care-economy',
    number: 4,
    title: 'Care Economy 101',
    topics: ['gender', 'economics', 'development'],
    description: 'Understand the economics of care work and its centrality to development. Examines unpaid care, care infrastructure, and policy solutions in South Asian contexts.',
    difficulty: 'Intermediate',
    duration: '3 hours',
    icon: 'fas fa-hand-holding-heart',
    url: 'https://101.www.impactmojo.in/ce',
    prerequisites: ['Basic economics concepts helpful'],
    outcomes: ['Value unpaid care work', 'Design care-responsive policies', 'Advocate for care infrastructure'],
    audience: 'Gender specialists, economists, policy makers',
    learnerCount: 1234,
    rating: 4.8,
    relatedExtras: ['handouts', 'research']
  },
  {
    id: 'data-feminism',
    number: 5,
    title: 'Data Feminism 101',
    topics: ['data', 'gender', 'justice'],
    description: 'Apply feminist principles to data science. Learn about power, bias, and ethics in data collection and analysis with South Asian case studies.',
    difficulty: 'Intermediate',
    duration: '4 hours',
    icon: 'fas fa-database',
    url: 'https://101.www.impactmojo.in/df',
    prerequisites: ['Data Literacy 101 recommended'],
    outcomes: ['Identify data biases', 'Apply ethical frameworks', 'Create inclusive data practices'],
    audience: 'Data analysts, researchers, gender specialists',
    learnerCount: 2156,
    rating: 4.9,
    relatedExtras: ['data', 'handouts']
  },
  {
    id: 'caste-religion',
    number: 6,
    title: 'Caste, Religion & Other Identities 101',
    topics: ['identity', 'justice', 'development'],
    description: 'Critical examination of how caste, religion, and other identities shape development outcomes in South Asia. Includes frameworks for inclusive programming.',
    difficulty: 'Advanced',
    duration: '6 hours',
    icon: 'fas fa-users',
    url: 'https://101.www.impactmojo.in/cr',
    prerequisites: ['Understanding of South Asian contexts'],
    outcomes: ['Analyze identity-based exclusion', 'Design inclusive interventions', 'Navigate sensitive contexts'],
    audience: 'Development practitioners, social researchers, activists',
    learnerCount: 1876,
    rating: 4.7,
    relatedExtras: ['handouts', 'research']
  },
  {
    id: 'development-economics',
    number: 7,
    title: 'Development Economics 101',
    topics: ['economics', 'development'],
    description: 'Core economic concepts for development practice. Covers poverty measurement, market failures, behavioral economics, and policy evaluation.',
    difficulty: 'Intermediate',
    duration: '5 hours',
    icon: 'fas fa-coins',
    url: 'https://101.www.impactmojo.in/de',
    prerequisites: ['Basic math skills'],
    outcomes: ['Apply economic thinking', 'Evaluate policies', 'Understand development trade-offs'],
    audience: 'Policy analysts, program designers, students',
    learnerCount: 3256,
    rating: 4.6,
    relatedExtras: ['handouts', 'data']
  },
  {
    id: 'design-thinking',
    number: 8,
    title: 'Design Thinking 101',
    topics: ['development', 'research'],
    description: 'Human-centered design for social impact. Learn to create innovative solutions through empathy, ideation, and iteration in development contexts.',
    difficulty: 'Beginner',
    duration: '3 hours',
    icon: 'fas fa-lightbulb',
    url: 'https://101.www.impactmojo.in/dt',
    prerequisites: ['None'],
    outcomes: ['Apply design thinking process', 'Facilitate creative workshops', 'Prototype solutions'],
    audience: 'Innovators, program designers, entrepreneurs',
    learnerCount: 2341,
    rating: 4.8,
    relatedExtras: ['handouts']
  },
  {
    id: 'ethnographic-methods',
    number: 9,
    title: 'Ethnographic & Immersive Methods 101',
    topics: ['research', 'development'],
    description: 'Deep dive into qualitative research methods. Learn observation, interviewing, and participatory techniques for understanding communities.',
    difficulty: 'Advanced',
    duration: '6 hours',
    icon: 'fas fa-microscope',
    url: 'https://101.www.impactmojo.in/et',
    prerequisites: ['Research Methods 101 recommended'],
    outcomes: ['Conduct ethnographic research', 'Build community trust', 'Analyze qualitative data'],
    audience: 'Researchers, anthropologists, evaluators',
    learnerCount: 987,
    rating: 4.9,
    relatedExtras: ['research', 'handouts']
  },
  {
    id: 'eda-survey',
    number: 10,
    title: 'EDA for Survey Data 101',
    topics: ['data', 'research'],
    description: 'Master exploratory data analysis for survey data. Learn cleaning, visualization, and initial analysis techniques using R and Python.',
    difficulty: 'Intermediate',
    duration: '5 hours',
    icon: 'fas fa-poll',
    url: 'https://101.www.impactmojo.in/sv',
    prerequisites: ['Data Literacy 101', 'Basic statistics'],
    outcomes: ['Clean survey data', 'Create meaningful visualizations', 'Identify patterns'],
    audience: 'Data analysts, M&E professionals, researchers',
    learnerCount: 1567,
    rating: 4.7,
    relatedExtras: ['data']
  },
  {
    id: 'bivariate-analysis',
    number: 11,
    title: 'Bivariate Analysis 101',
    topics: ['data', 'research'],
    description: 'Understand relationships between variables. Covers correlation, chi-square tests, t-tests, and practical interpretation for development data.',
    difficulty: 'Intermediate',
    duration: '4 hours',
    icon: 'fas fa-project-diagram',
    url: 'https://101.www.impactmojo.in/ba',
    prerequisites: ['Basic statistics', 'EDA for Survey Data 101'],
    outcomes: ['Test hypotheses', 'Interpret statistical results', 'Choose appropriate tests'],
    audience: 'Researchers, data analysts, evaluators',
    learnerCount: 1123,
    rating: 4.6,
    relatedExtras: ['data', 'handouts']
  },
  {
    id: 'multivariate-analysis',
    number: 12,
    title: 'Multivariate Analysis 101',
    topics: ['data', 'research'],
    description: 'Advanced statistical techniques for complex data. Learn regression, factor analysis, and clustering with development applications.',
    difficulty: 'Advanced',
    duration: '6 hours',
    icon: 'fas fa-chart-line',
    url: 'https://101.www.impactmojo.in/ma',
    prerequisites: ['Bivariate Analysis 101', 'Strong statistics background'],
    outcomes: ['Build regression models', 'Reduce data dimensions', 'Segment populations'],
    audience: 'Advanced researchers, data scientists',
    learnerCount: 876,
    rating: 4.8,
    relatedExtras: ['data']
  }
  {
    id: 'participatory-media',
    number: 13,
    title: 'Participatory Media 101',
    topics: ['media', 'development', 'research'],
    description: 'Use media as a tool for community engagement and advocacy. Learn video, audio, and digital storytelling techniques for social change.',
    difficulty: 'Beginner',
    duration: '4 hours',
    icon: 'fas fa-video',
    url: 'https://101.www.impactmojo.in/pm',
    prerequisites: ['Basic smartphone/computer skills'],
    outcomes: ['Create community media', 'Facilitate participatory processes', 'Amplify local voices'],
    audience: 'Community organizers, communications specialists, activists',
    learnerCount: 1432,
    rating: 4.9,
    relatedExtras: ['handouts']
  },
  {
    id: 'disability-inclusion',
    number: 14,
    title: 'Disability & Inclusion 101',
    topics: ['identity', 'justice', 'development'],
    description: 'Comprehensive guide to disability-inclusive development. Covers rights-based approaches, accessibility, and inclusive program design.',
    difficulty: 'Intermediate',
    duration: '4 hours',
    icon: 'fas fa-universal-access',
    url: 'https://101.www.impactmojo.in/di',
    prerequisites: ['None'],
    outcomes: ['Apply disability rights framework', 'Design accessible programs', 'Partner with DPOs'],
    audience: 'All development professionals',
    learnerCount: 1098,
    rating: 4.8,
    relatedExtras: ['handouts', 'research']
  },
  {
    id: 'research-methods',
    number: 15,
    title: 'Research Methods 101',
    topics: ['research', 'development'],
    description: 'Foundation course in development research. Covers research design, ethics, mixed methods, and practical tools for field research.',
    difficulty: 'Beginner',
    duration: '5 hours',
    icon: 'fas fa-search',
    url: 'https://101.www.impactmojo.in/rm',
    prerequisites: ['None'],
    outcomes: ['Design research studies', 'Choose appropriate methods', 'Ensure ethical practice'],
    audience: 'Students, new researchers, practitioners',
    learnerCount: 2745,
    rating: 4.7,
    relatedExtras: ['research', 'handouts']
  },
  {
    id: 'mel',
    number: 16,
    title: 'MEL 101',
    topics: ['research', 'development', 'data'],
    description: 'Monitoring, Evaluation, and Learning fundamentals. Learn to design results frameworks, develop indicators, and create learning systems.',
    difficulty: 'Intermediate',
    duration: '6 hours',
    icon: 'fas fa-tasks',
    url: 'https://101.www.impactmojo.in/mel',
    prerequisites: ['Program management experience helpful'],
    outcomes: ['Design M&E systems', 'Develop SMART indicators', 'Foster organizational learning'],
    audience: 'M&E officers, program managers, donors',
    learnerCount: 2234,
    rating: 4.8,
    relatedExtras: ['handouts', 'data']
  },
  {
    id: 'systems-thinking',
    number: 17,
    title: 'Systems Thinking 101',
    topics: ['systems', 'development'],
    description: 'Understand and navigate complex development challenges. Learn systems mapping, leverage points, and adaptive management approaches.',
    difficulty: 'Advanced',
    duration: '5 hours',
    icon: 'fas fa-network-wired',
    url: 'https://101.www.impactmojo.in/st',
    prerequisites: ['Development experience recommended'],
    outcomes: ['Map complex systems', 'Identify intervention points', 'Think holistically'],
    audience: 'Senior practitioners, policy makers, strategists',
    learnerCount: 1567,
    rating: 4.9,
    relatedExtras: ['handouts']
  },
  {
    id: 'policy-influence',
    number: 18,
    title: 'Policy Influence & Advocacy 101',
    topics: ['development', 'justice'],
    description: 'Strategic approaches to policy change. Learn stakeholder mapping, evidence packaging, and advocacy tactics for South Asian contexts.',
    difficulty: 'Intermediate',
    duration: '4 hours',
    icon: 'fas fa-bullhorn',
    url: 'https://101.www.impactmojo.in/pa',
    prerequisites: ['Understanding of policy processes'],
    outcomes: ['Map policy landscapes', 'Package evidence effectively', 'Build advocacy coalitions'],
    audience: 'Advocates, policy analysts, NGO leaders',
    learnerCount: 1876,
    rating: 4.7,
    relatedExtras: ['handouts']
  },
  {
    id: 'livelihoods',
    number: 19,
    title: 'Livelihoods 101',
    topics: ['livelihoods', 'economics', 'development'],
    description: 'Sustainable livelihoods framework and practice. Analyze livelihood systems, vulnerabilities, and design market-based interventions.',
    difficulty: 'Intermediate',
    duration: '5 hours',
    icon: 'fas fa-seedling',
    url: 'https://101.www.impactmojo.in/lv',
    prerequisites: ['Basic economics understanding'],
    outcomes: ['Apply livelihoods framework', 'Conduct market analysis', 'Design inclusive programs'],
    audience: 'Livelihoods specialists, rural development practitioners',
    learnerCount: 1432,
    rating: 4.6,
    relatedExtras: ['handouts', 'research']
  },
  {
    id: 'public-health',
    number: 20,
    title: 'Public Health 101',
    topics: ['health', 'development'],
    description: 'Public health principles for development workers. Covers health systems, social determinants, and community health approaches.',
    difficulty: 'Beginner',
    duration: '4 hours',
    icon: 'fas fa-heartbeat',
    url: 'https://101.www.impactmojo.in/ph',
    prerequisites: ['None'],
    outcomes: ['Understand health systems', 'Apply social determinants lens', 'Design health interventions'],
    audience: 'Development generalists, health program staff',
    learnerCount: 1765,
    rating: 4.8,
    relatedExtras: ['health', 'handouts']
  },
  {
    id: 'women-economic',
    number: 21,
    title: 'Women\'s Economic Empowerment 101',
    topics: ['gender', 'economics', 'livelihoods'],
    description: 'Strategies for women\'s economic inclusion. Covers financial inclusion, entrepreneurship, and addressing structural barriers.',
    difficulty: 'Intermediate',
    duration: '4 hours',
    icon: 'fas fa-female',
    url: 'https://101.www.impactmojo.in/wee',
    prerequisites: ['Gender Studies 101 helpful'],
    outcomes: ['Design WEE programs', 'Address gender barriers', 'Measure empowerment'],
    audience: 'Gender specialists, microfinance practitioners, program designers',
    learnerCount: 1987,
    rating: 4.9,
    relatedExtras: ['handouts', 'research']
  },
  {
    id: 'organizational-development',
    number: 22,
    title: 'Organizational Development 101',
    topics: ['development', 'systems'],
    description: 'Build stronger development organizations. Learn about capacity building, change management, and creating learning cultures.',
    difficulty: 'Advanced',
    duration: '5 hours',
    icon: 'fas fa-building',
    url: 'https://101.www.impactmojo.in/od',
    prerequisites: ['Management experience'],
    outcomes: ['Assess organizational capacity', 'Lead change processes', 'Build adaptive organizations'],
    audience: 'NGO leaders, capacity building specialists, consultants',
    learnerCount: 1234,
    rating: 4.7,
    relatedExtras: ['handouts']
  },
  {
    id: 'social-media-advocacy',
    number: 23,
    title: 'Social Media for Advocacy 101',
    topics: ['media', 'development', 'justice'],
    description: 'Strategic social media for social change. Learn content creation, campaign planning, and digital security for South Asian contexts.',
    difficulty: 'Beginner',
    duration: '3 hours',
    icon: 'fas fa-hashtag',
    url: 'https://101.www.impactmojo.in/sma',
    prerequisites: ['Basic social media familiarity'],
    outcomes: ['Plan digital campaigns', 'Create engaging content', 'Ensure digital safety'],
    audience: 'Communications teams, activists, campaigners',
    learnerCount: 2345,
    rating: 4.8,
    relatedExtras: ['handouts']
  },
  {
    id: 'grants-management',
    number: 24,
    title: 'Grants Management 101',
    topics: ['development', 'economics'],
    description: 'End-to-end grants management for development organizations. Covers compliance, financial management, and donor relations.',
    difficulty: 'Intermediate',
    duration: '5 hours',
    icon: 'fas fa-hand-holding-usd',
    url: 'https://101.www.impactmojo.in/gm',
    prerequisites: ['Basic financial literacy'],
    outcomes: ['Manage grant cycles', 'Ensure compliance', 'Build donor relationships'],
    audience: 'Finance officers, program managers, NGO staff',
    learnerCount: 1876,
    rating: 4.6,
    relatedExtras: ['handouts']
  },
  {
    id: 'masculinities',
    number: 25,
    title: 'Masculinities 101',
    topics: ['gender', 'identity', 'development'],
    description: 'Engage men and boys in gender equality. Understand masculinity constructs and design transformative programs.',
    difficulty: 'Intermediate',
    duration: '4 hours',
    icon: 'fas fa-male',
    url: 'https://101.www.impactmojo.in/mas',
    prerequisites: ['Gender Studies 101 recommended'],
    outcomes: ['Analyze masculinity norms', 'Design male engagement programs', 'Address gender-based violence'],
    audience: 'Gender specialists, program designers, counselors',
    learnerCount: 1123,
    rating: 4.7,
    relatedExtras: ['handouts', 'research']
  },
  {
    id: 'climate-adaptation',
    number: 26,
    title: 'Climate Adaptation 101',
    topics: ['climate', 'development', 'livelihoods'],
    description: 'Practical climate adaptation for communities. Learn vulnerability assessment, adaptation planning, and nature-based solutions.',
    difficulty: 'Intermediate',
    duration: '5 hours',
    icon: 'fas fa-cloud-sun',
    url: 'https://101.www.impactmojo.in/ca',
    prerequisites: ['Climate Change & Society 101 helpful'],
    outcomes: ['Assess climate risks', 'Design adaptation strategies', 'Access climate finance'],
    audience: 'Environmental practitioners, urban planners, agriculture specialists',
    learnerCount: 1567,
    rating: 4.8,
    relatedExtras: ['handouts']
  },
  {
    id: 'digital-development',
    number: 27,
    title: 'Digital Development 101',
    topics: ['development', 'data', 'systems'],
    description: 'Technology for social impact. Covers digital inclusion, data protection, and responsible tech deployment in development.',
    difficulty: 'Intermediate',
    duration: '4 hours',
    icon: 'fas fa-laptop-code',
    url: 'https://101.www.impactmojo.in/dd',
    prerequisites: ['Basic digital literacy'],
    outcomes: ['Apply digital principles', 'Ensure data protection', 'Design inclusive tech'],
    audience: 'ICT4D specialists, program managers, policy makers',
    learnerCount: 1890,
    rating: 4.7,
    relatedExtras: ['handouts', 'data']
  },
  {
    id: 'social-protection',
    number: 28,
    title: 'Social Protection 101',
    topics: ['economics', 'development', 'justice'],
    description: 'Social safety nets and protection systems. Learn about cash transfers, insurance schemes, and rights-based approaches.',
    difficulty: 'Intermediate',
    duration: '5 hours',
    icon: 'fas fa-shield-alt',
    url: 'https://101.www.impactmojo.in/sp',
    prerequisites: ['Development Economics 101 helpful'],
    outcomes: ['Analyze protection systems', 'Design safety nets', 'Evaluate impact'],
    audience: 'Policy makers, social workers, economists',
    learnerCount: 1345,
    rating: 4.6,
    relatedExtras: ['handouts', 'research']
  },
  {
    id: 'urban-development',
    number: 29,
    title: 'Urban Development 101',
    topics: ['development', 'systems', 'livelihoods'],
    description: 'Inclusive urban development for South Asian cities. Covers slum upgrading, urban governance, and sustainable city planning.',
    difficulty: 'Advanced',
    duration: '6 hours',
    icon: 'fas fa-city',
    url: 'https://101.www.impactmojo.in/ud',
    prerequisites: ['Urban context knowledge'],
    outcomes: ['Apply urban frameworks', 'Design inclusive cities', 'Navigate urban governance'],
    audience: 'Urban planners, municipal officials, housing advocates',
    learnerCount: 987,
    rating: 4.8,
    relatedExtras: ['handouts']
  },
  {
    id: 'nutrition',
    number: 30,
    title: 'Nutrition 101',
    topics: ['health', 'development', 'gender'],
    description: 'Nutrition-sensitive programming for development. Covers malnutrition, food systems, and behavior change approaches.',
    difficulty: 'Beginner',
    duration: '4 hours',
    icon: 'fas fa-apple-alt',
    url: 'https://101.www.impactmojo.in/nt',
    prerequisites: ['None'],
    outcomes: ['Understand malnutrition', 'Design nutrition programs', 'Apply behavior change'],
    audience: 'Health workers, program staff, community organizers',
    learnerCount: 1432,
    rating: 4.7,
    relatedExtras: ['health', 'handouts']
  },
  {
    id: 'migration-displacement',
    number: 31,
    title: 'Migration & Displacement 101',
    topics: ['identity', 'justice', 'development'],
    description: 'Understanding human mobility in South Asia. Covers forced displacement, labor migration, and inclusive programming for mobile populations.',
    difficulty: 'Intermediate',
    duration: '5 hours',
    icon: 'fas fa-route',
    url: 'https://101.www.impactmojo.in/md',
    prerequisites: ['Development context understanding'],
    outcomes: ['Analyze migration patterns', 'Design inclusive services', 'Advocate for migrant rights'],
    audience: 'Migration specialists, urban practitioners, rights advocates',
    learnerCount: 876,
    rating: 4.8,
    relatedExtras: ['handouts', 'research']
  },
  {
    id: 'education-pedagogy',
    number: 32,
    title: 'Education & Pedagogy 101',
    topics: ['education', 'development'],
    description: 'Transformative education approaches for development. Covers critical pedagogy, inclusive education, and community-based learning.',
    difficulty: 'Intermediate',
    duration: '4 hours',
    icon: 'fas fa-graduation-cap',
    url: 'https://101.www.impactmojo.in/edu',
    prerequisites: ['Teaching experience helpful'],
    outcomes: ['Apply learning theories', 'Design inclusive curricula', 'Facilitate participatory learning'],
    audience: 'Educators, trainers, capacity building specialists',
    learnerCount: 1623,
    rating: 4.9,
    relatedExtras: ['handouts', 'education']
  },
  {
    id: 'conflict-sensitivity',
    number: 33,
    title: 'Conflict Sensitivity 101',
    topics: ['justice', 'development', 'systems'],
    description: 'Do No Harm approaches for complex contexts. Learn conflict analysis, sensitive programming, and peacebuilding integration.',
    difficulty: 'Advanced',
    duration: '5 hours',
    icon: 'fas fa-dove',
    url: 'https://101.www.impactmojo.in/cs',
    prerequisites: ['Field experience in complex contexts'],
    outcomes: ['Analyze conflict dynamics', 'Design sensitive programs', 'Contribute to peace'],
    audience: 'Field practitioners, security advisors, peace builders',
    learnerCount: 743,
    rating: 4.9,
    relatedExtras: ['handouts', 'research']
  }
];
// Topic colors mapping
const topicColors = {
  economics: '#3498db',
  gender: '#9b59b6',
  justice: '#e74c3c',
  climate: '#27ae60',
  data: '#f39c12',
  research: '#34495e',
  development: '#16a085',
  media: '#e67e22',
  identity: '#8e44ad',
  livelihoods: '#2ecc71',
  health: '#e74c3c',
  education: '#3498db',
  systems: '#95a5a6'
};

// Global variables
let selectedTopics = new Set(['all']);
let selectedDifficulty = '';
let selectedDuration = '';
let searchQuery = '';
let compareMode = false;
let selectedForComparison = new Set();
let currentUser = null;

// Initialize
document.addEventListener('DOMContentLoaded', function() {
  initializeApp();
});

function initializeApp() {
  // Check authentication state
  if (window.auth) {
    window.auth.onAuthStateChanged((user) => {
      currentUser = user;
      updateAuthUI(user);
      if (user) {
        loadUserData();
      }
    });
  }
  
  // Initialize course display
  displayCourses();
  
  // Set up event listeners
  setupEventListeners();
  
  // Initialize topic filter
  updateTopicFilter();
  
  // Check for bookmarks
  displayBookmarkedCourses();
}

function setupEventListeners() {
  // Search input
  const searchInput = document.getElementById('searchInput');
  if (searchInput) {
    searchInput.addEventListener('input', debounce(handleSearch, 300));
  }
  
  // Filter selects
  document.getElementById('difficultyFilter')?.addEventListener('change', handleFilterChange);
  document.getElementById('durationFilter')?.addEventListener('change', handleFilterChange);
  document.getElementById('sortBy')?.addEventListener('change', handleSort);
  
  // Modal close on outside click
  window.onclick = function(event) {
    if (event.target.classList.contains('modal')) {
      event.target.style.display = 'none';
    }
  };
}

// Course Display Functions
function displayCourses(coursesToShow = courses) {
  const courseGrid = document.getElementById('courseGrid');
  if (!courseGrid) return;
  
  courseGrid.innerHTML = '';
  
  coursesToShow.forEach(course => {
    const courseCard = createCourseCard(course);
    courseGrid.appendChild(courseCard);
  });
  
  updateCourseCount(coursesToShow.length);
  
  // Animate cards
  requestAnimationFrame(() => {
    document.querySelectorAll('.course-card').forEach((card, index) => {
      setTimeout(() => {
        card.classList.add('fade-in');
      }, index * 50);
    });
  });
}

function createCourseCard(course) {
  const isBookmarked = checkIfBookmarked(course.id);
  const card = document.createElement('div');
  card.className = 'course-card fade-in';
  card.dataset.courseId = course.id;
  
  card.innerHTML = `
    <div class="course-number">${course.number}</div>
    <div class="course-header">
      <div class="course-icon">
        <i class="${course.icon}"></i>
      </div>
      <div class="course-title-section">
        <h3 class="course-title">${course.title}</h3>
        <div class="course-meta">
          ${course.topics.map(topic => 
            `<span class="meta-tag topic-${topic}">${topic}</span>`
          ).join('')}
          <span class="meta-tag">${course.difficulty}</span>
          <span class="meta-tag">${course.duration}</span>
        </div>
      </div>
    </div>
    
    <p class="course-description">${course.description}</p>
    
    <div class="course-stats">
      <div class="course-stat">
        <i class="fas fa-users"></i>
        <span>${course.learnerCount.toLocaleString()} learners</span>
      </div>
      <div class="course-stat">
        <i class="fas fa-star"></i>
        <span>${course.rating}/5</span>
      </div>
    </div>
    
    <div class="course-actions">
      <div class="course-actions-left">
        <a href="${course.url}" target="_blank" class="launch-btn">
          <i class="fas fa-play"></i> Launch Course
        </a>
        <button class="secondary-btn" onclick="toggleCourseDetails('${course.id}')">
          <i class="fas fa-info-circle"></i> Details
        </button>
      </div>
      <button class="bookmark-btn ${isBookmarked ? 'bookmarked' : ''}" 
              onclick="toggleBookmark('${course.id}')" 
              title="${isBookmarked ? 'Remove bookmark' : 'Bookmark course'}">
        <i class="fas fa-bookmark"></i>
      </button>
      ${compareMode ? `
        <input type="checkbox" class="compare-checkbox" 
               onchange="toggleCompareSelection('${course.id}')"
               ${selectedForComparison.has(course.id) ? 'checked' : ''}>
      ` : ''}
    </div>
    
    <div class="course-details" id="details-${course.id}">
      <div class="details-section">
        <h4>Prerequisites</h4>
        <ul>
          ${course.prerequisites.map(prereq => `<li>${prereq}</li>`).join('')}
        </ul>
      </div>
      <div class="details-section">
        <h4>Learning Outcomes</h4>
        <ul>
          ${course.outcomes.map(outcome => `<li>${outcome}</li>`).join('')}
        </ul>
      </div>
      <div class="details-section">
        <h4>Target Audience</h4>
        <p>${course.audience}</p>
      </div>
      ${course.relatedExtras && course.relatedExtras.length > 0 ? `
        <div class="details-section">
          <h4>Related Resources</h4>
          <ul>
            ${course.relatedExtras.map(extra => 
              `<li><a href="${extrasMapping[extra]?.url}" target="_blank">${extrasMapping[extra]?.name}</a></li>`
            ).join('')}
          </ul>
        </div>
      ` : ''}
    </div>
  `;
  
  return card;
}

// Extras mapping
const extrasMapping = {
  handouts: {
    name: 'Educational Handouts',
    icon: 'fas fa-chalkboard-teacher',
    url: 'https://github.com/Varnasr/ImpactMojo/tree/main/extras/handouts'
  },
  research: {
    name: 'Research Design Resources',
    icon: 'fas fa-flask',
    url: 'https://github.com/Varnasr/ImpactMojo/tree/main/extras/research-design'
  },
  health: {
    name: 'Public Health Materials',
    icon: 'fas fa-heartbeat',
    url: 'https://github.com/Varnasr/ImpactMojo/tree/main/extras/public-health'
  },
  data: {
    name: 'Data Analysis Toolkit',
    icon: 'fas fa-code',
    url: 'https://github.com/Varnasr/ImpactMojo/tree/main/extras/data-analysis'
  },
  education: {
    name: 'Education Resources',
    icon: 'fas fa-graduation-cap',
    url: 'https://github.com/Varnasr/ImpactMojo/tree/main/extras/education'
  }
};

// Search and Filter Functions
function handleSearch(event) {
  searchQuery = event.target.value.toLowerCase();
  applyFilters();
}

function handleFilterChange() {
  selectedDifficulty = document.getElementById('difficultyFilter').value;
  selectedDuration = document.getElementById('durationFilter').value;
  applyFilters();
}

function filterByTopic(topic) {
  // Update selected topics
  if (topic === 'all') {
    selectedTopics.clear();
    selectedTopics.add('all');
  } else {
    selectedTopics.delete('all');
    if (selectedTopics.has(topic)) {
      selectedTopics.delete(topic);
    } else {
      selectedTopics.add(topic);
    }
    
    if (selectedTopics.size === 0) {
      selectedTopics.add('all');
    }
  }
  
  // Update UI
  updateTopicFilter();
  applyFilters();
}

function updateTopicFilter() {
  document.querySelectorAll('.topic-btn').forEach(btn => {
    const topic = btn.dataset.topic;
    if (selectedTopics.has(topic)) {
      btn.classList.add('active');
    } else {
      btn.classList.remove('active');
    }
  });
}

function applyFilters() {
  let filtered = courses;
  
  // Topic filter
  if (!selectedTopics.has('all')) {
    filtered = filtered.filter(course => 
      course.topics.some(topic => selectedTopics.has(topic))
    );
  }
  
  // Search filter
  if (searchQuery) {
    filtered = filtered.filter(course => 
      course.title.toLowerCase().includes(searchQuery) ||
      course.description.toLowerCase().includes(searchQuery) ||
      course.topics.some(topic => topic.includes(searchQuery))
    );
  }
  
  // Difficulty filter
  if (selectedDifficulty) {
    filtered = filtered.filter(course => course.difficulty === selectedDifficulty);
  }
  
  // Duration filter
  if (selectedDuration) {
    filtered = filtered.filter(course => {
      const hours = parseInt(course.duration);
      switch(selectedDuration) {
        case '0-2': return hours <= 2;
        case '2-5': return hours > 2 && hours <= 5;
        case '5+': return hours > 5;
        default: return true;
      }
    });
  }
  
  displayCourses(filtered);
  
  // Show/hide no results message
  const noResults = document.getElementById('noResults');
  if (filtered.length === 0) {
    noResults?.classList.remove('hidden');
  } else {
    noResults?.classList.add('hidden');
  }
}

function handleSort() {
  const sortBy = document.getElementById('sortBy').value;
  let sorted = [...courses];
  
  switch(sortBy) {
    case 'popular':
      sorted.sort((a, b) => b.learnerCount - a.learnerCount);
      break;
    case 'newest':
      sorted.sort((a, b) => a.number - b.number);
      break;
    case 'rating':
      sorted.sort((a, b) => b.rating - a.rating);
      break;
    case 'alphabetical':
      sorted.sort((a, b) => a.title.localeCompare(b.title));
      break;
  }
  
  displayCourses(sorted);
}

function clearFilters() {
  document.getElementById('searchInput').value = '';
  document.getElementById('difficultyFilter').value = '';
  document.getElementById('durationFilter').value = '';
  document.getElementById('sortBy').value = 'popular';
  
  searchQuery = '';
  selectedDifficulty = '';
  selectedDuration = '';
  selectedTopics.clear();
  selectedTopics.add('all');
  
  updateTopicFilter();
  displayCourses();
}

// Course Details Toggle
function toggleCourseDetails(courseId) {
  const card = document.querySelector(`[data-course-id="${courseId}"]`);
  const details = document.getElementById(`details-${courseId}`);
  
  if (card && details) {
    card.classList.toggle('expanded');
  }
}

// Bookmark Functions
function toggleBookmark(courseId) {
  const course = courses.find(c => c.id === courseId);
  if (!course) return;
  
  let bookmarks = JSON.parse(localStorage.getItem('bookmarkedCourses') || '[]');
  const index = bookmarks.findIndex(b => b === courseId);
  
  if (index === -1) {
    bookmarks.push(courseId);
    showNotification(`${course.title} bookmarked!`, 'success');
  } else {
    bookmarks.splice(index, 1);
    showNotification(`Bookmark removed`, 'info');
  }
  
  localStorage.setItem('bookmarkedCourses', JSON.stringify(bookmarks));
  
  // Update UI
  const btn = document.querySelector(`[data-course-id="${courseId}"] .bookmark-btn`);
  if (btn) {
    btn.classList.toggle('bookmarked');
  }
  
  // Update dashboard if user is logged in
  if (currentUser) {
    updateBookmarkedCoursesList();
  }
  
  displayBookmarkedCourses();
}

function checkIfBookmarked(courseId) {
  const bookmarks = JSON.parse(localStorage.getItem('bookmarkedCourses') || '[]');
  return bookmarks.includes(courseId);
}

function displayBookmarkedCourses() {
  const bookmarks = JSON.parse(localStorage.getItem('bookmarkedCourses') || '[]');
  // Update bookmark count in UI if needed
  const bookmarkCount = bookmarks.length;
  // You can add UI elements to show bookmark count
}
// Comparison Functions
function toggleCompareMode() {
  compareMode = !compareMode;
  const compareBtn = document.getElementById('compareBtn');
  const comparisonView = document.getElementById('comparisonView');
  
  if (compareMode) {
    compareBtn.style.display = 'inline-flex';
    selectedForComparison.clear();
    displayCourses();
  } else {
    compareBtn.style.display = 'none';
    comparisonView.classList.add('hidden');
    selectedForComparison.clear();
    displayCourses();
  }
}

function toggleCompareSelection(courseId) {
  if (selectedForComparison.has(courseId)) {
    selectedForComparison.delete(courseId);
  } else {
    if (selectedForComparison.size < 3) {
      selectedForComparison.add(courseId);
    } else {
      showNotification('You can compare up to 3 courses at a time', 'warning');
      return;
    }
  }
  
  updateCompareCount();
  
  if (selectedForComparison.size > 0) {
    showComparisonView();
  }
}

function updateCompareCount() {
  const compareCount = document.getElementById('compareCount');
  if (compareCount) {
    compareCount.textContent = selectedForComparison.size;
  }
}

function showComparisonView() {
  const comparisonView = document.getElementById('comparisonView');
  const comparisonContent = document.getElementById('comparisonContent');
  
  if (selectedForComparison.size === 0) {
    comparisonContent.innerHTML = '<p>Select courses to compare using the checkboxes.</p>';
    return;
  }
  
  const selectedCourses = Array.from(selectedForComparison).map(id => 
    courses.find(c => c.id === id)
  );
  
  let html = `
    <table class="comparison-table">
      <thead>
        <tr>
          <th>Feature</th>
          ${selectedCourses.map(course => `<th>${course.title}</th>`).join('')}
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>Duration</strong></td>
          ${selectedCourses.map(course => `<td>${course.duration}</td>`).join('')}
        </tr>
        <tr>
          <td><strong>Difficulty</strong></td>
          ${selectedCourses.map(course => `<td>${course.difficulty}</td>`).join('')}
        </tr>
        <tr>
          <td><strong>Learners</strong></td>
          ${selectedCourses.map(course => `<td>${course.learnerCount.toLocaleString()}</td>`).join('')}
        </tr>
        <tr>
          <td><strong>Rating</strong></td>
          ${selectedCourses.map(course => `<td>${course.rating}/5</td>`).join('')}
        </tr>
        <tr>
          <td><strong>Topics</strong></td>
          ${selectedCourses.map(course => 
            `<td>${course.topics.join(', ')}</td>`
          ).join('')}
        </tr>
        <tr>
          <td><strong>Prerequisites</strong></td>
          ${selectedCourses.map(course => 
            `<td>${course.prerequisites.join('<br>')}</td>`
          ).join('')}
        </tr>
      </tbody>
    </table>
  `;
  
  comparisonContent.innerHTML = html;
  comparisonView.classList.remove('hidden');
}

// Authentication Functions
function updateAuthUI(user) {
  const authButtons = document.getElementById('authButtons');
  const userMenu = document.getElementById('userMenu');
  const userDashboard = document.getElementById('userDashboard');
  const memberAccessSection = document.querySelector('.member-access-section');
  
  if (user) {
    // User is signed in
    authButtons?.classList.add('hidden');
    userMenu?.classList.remove('hidden');
    
    // Update display name
    const displayName = document.getElementById('userDisplayName');
    if (displayName) {
      displayName.textContent = user.displayName || 'My Dashboard';
    }
    
    // Show dashboard
    if (userDashboard) {
      userDashboard.style.display = 'block';
    }
    
    // Hide member access section
    if (memberAccessSection) {
      memberAccessSection.style.display = 'none';
    }
  } else {
    // User is signed out
    authButtons?.classList.remove('hidden');
    userMenu?.classList.add('hidden');
    
    // Hide dashboard
    if (userDashboard) {
      userDashboard.style.display = 'none';
    }
    
    // Show member access section
    if (memberAccessSection) {
      memberAccessSection.style.display = 'block';
    }
  }
}

function setAuthMode(mode) {
  const authTitle = document.getElementById('authTitle');
  const loginTab = document.getElementById('loginTab');
  const signupTab = document.getElementById('signupTab');
  const authSubmitBtn = document.getElementById('authSubmitBtn');
  const confirmPassword = document.getElementById('confirmPassword');
  const displayName = document.getElementById('displayName');
  
  if (mode === 'login') {
    authTitle.textContent = 'Welcome Back';
    loginTab.classList.add('active');
    signupTab.classList.remove('active');
    authSubmitBtn.textContent = 'Login';
    confirmPassword.style.display = 'none';
    displayName.style.display = 'none';
    confirmPassword.removeAttribute('required');
    displayName.removeAttribute('required');
  } else {
    authTitle.textContent = 'Create Account';
    loginTab.classList.remove('active');
    signupTab.classList.add('active');
    authSubmitBtn.textContent = 'Sign Up';
    confirmPassword.style.display = 'block';
    displayName.style.display = 'block';
    confirmPassword.setAttribute('required', 'required');
    displayName.setAttribute('required', 'required');
  }
}

async function handleAuth(event) {
  event.preventDefault();
  
  const email = document.getElementById('authEmail').value;
  const password = document.getElementById('authPassword').value;
  const isLogin = document.getElementById('loginTab').classList.contains('active');
  
  try {
    if (isLogin) {
      // Login
      await window.firebaseAuth.signInWithEmailAndPassword(window.auth, email, password);
      showNotification('Welcome back!', 'success');
    } else {
      // Sign up
      const confirmPwd = document.getElementById('confirmPassword').value;
      const name = document.getElementById('displayName').value;
      
      if (password !== confirmPwd) {
        showNotification('Passwords do not match', 'error');
        return;
      }
      
      const userCredential = await window.firebaseAuth.createUserWithEmailAndPassword(window.auth, email, password);
      
      // Save user data to Firestore
      await window.firestore.setDoc(
        window.firestore.doc(window.db, 'users', userCredential.user.uid),
        {
          email: email,
          displayName: name,
          createdAt: new Date(),
          bookmarks: [],
          progress: {},
          notes: {}
        }
      );
      
      showNotification('Account created successfully!', 'success');
    }
    
    closeModal('authModal');
    document.getElementById('authForm').reset();
  } catch (error) {
    console.error('Auth error:', error);
    showNotification(error.message, 'error');
  }
}

async function signInWithGoogle() {
  try {
    const provider = new window.firebaseAuth.GoogleAuthProvider();
    const result = await window.firebaseAuth.signInWithPopup(window.auth, provider);
    
    // Check if new user
    const userDoc = await window.firestore.getDoc(
      window.firestore.doc(window.db, 'users', result.user.uid)
    );
    
    if (!userDoc.exists()) {
      // Create user document
      await window.firestore.setDoc(
        window.firestore.doc(window.db, 'users', result.user.uid),
        {
          email: result.user.email,
          displayName: result.user.displayName,
          createdAt: new Date(),
          bookmarks: [],
          progress: {},
          notes: {}
        }
      );
    }
    
    showNotification('Welcome!', 'success');
    closeModal('authModal');
  } catch (error) {
    console.error('Google sign-in error:', error);
    showNotification(error.message, 'error');
  }
}

async function logout() {
  try {
    await window.firebaseAuth.signOut(window.auth);
    showNotification('Logged out successfully', 'info');
    window.location.reload();
  } catch (error) {
    console.error('Logout error:', error);
    showNotification(error.message, 'error');
  }
}

async function resetPassword(event) {
  event.preventDefault();
  const email = document.getElementById('resetEmail').value;
  
  try {
    await window.firebaseAuth.sendPasswordResetEmail(window.auth, email);
    showNotification('Password reset email sent!', 'success');
    closeModal('resetPasswordModal');
  } catch (error) {
    console.error('Password reset error:', error);
    showNotification(error.message, 'error');
  }
}

// User Data Functions
async function loadUserData() {
  if (!currentUser) return;
  
  try {
    const userDoc = await window.firestore.getDoc(
      window.firestore.doc(window.db, 'users', currentUser.uid)
    );
    
    if (userDoc.exists()) {
      const userData = userDoc.data();
      
      // Update progress display
      updateProgressDisplay(userData.progress || {});
      
      // Update bookmarks
      updateBookmarkedCoursesList(userData.bookmarks || []);
      
      // Load notes
      loadNotesData(userData.notes || {});
    }
  } catch (error) {
    console.error('Error loading user data:', error);
  }
}

function updateProgressDisplay(progress) {
  const coursesStarted = Object.keys(progress).length;
  const coursesCompleted = Object.values(progress).filter(p => p.completed).length;
  const totalProgress = coursesStarted > 0 
    ? Math.round((coursesCompleted / courses.length) * 100) 
    : 0;
  
  document.getElementById('coursesStarted').textContent = coursesStarted;
  document.getElementById('coursesCompleted').textContent = coursesCompleted;
  document.getElementById('totalProgress').textContent = totalProgress + '%';
  
  // Update recent activity
  updateRecentActivity(progress);
}

function updateRecentActivity(progress) {
  const recentActivity = document.getElementById('recentActivity');
  const recentCourses = Object.entries(progress)
    .sort((a, b) => new Date(b[1].lastAccessed) - new Date(a[1].lastAccessed))
    .slice(0, 3);
  
  if (recentCourses.length === 0) {
    recentActivity.innerHTML = '<p style="opacity: 0.8; font-style: italic;">No course activity yet. Start exploring courses below!</p>';
    return;
  }
  
  const html = recentCourses.map(([courseId, data]) => {
    const course = courses.find(c => c.id === courseId);
    if (!course) return '';
    
    return `
      <div style="padding: 0.5rem 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
        <strong>${course.title}</strong>
        <div style="font-size: 0.85rem; opacity: 0.8;">
          ${data.completed ? '✅ Completed' : `📚 ${data.progress || 0}% complete`} • 
          Last accessed ${formatDate(data.lastAccessed)}
        </div>
      </div>
    `;
  }).join('');
  
  recentActivity.innerHTML = html;
}

function updateBookmarkedCoursesList(bookmarks = []) {
  const bookmarkedCoursesList = document.getElementById('bookmarkedCoursesList');
  if (!bookmarkedCoursesList) return;
  
  // Get bookmarks from localStorage if not provided
  if (bookmarks.length === 0) {
    bookmarks = JSON.parse(localStorage.getItem('bookmarkedCourses') || '[]');
  }
  
  if (bookmarks.length === 0) {
    bookmarkedCoursesList.innerHTML = '<p style="opacity: 0.8;">No bookmarked courses yet. Click the bookmark icon on any course to save it here!</p>';
    return;
  }
  
  const html = bookmarks.map(courseId => {
    const course = courses.find(c => c.id === courseId);
    if (!course) return '';
    
    return `
      <div style="background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 8px; margin-bottom: 0.75rem;">
        <div style="display: flex; justify-content: space-between; align-items: start;">
          <div>
            <h4 style="margin: 0 0 0.5rem 0;">${course.title}</h4>
            <div style="font-size: 0.85rem; opacity: 0.8;">
              ${course.difficulty} • ${course.duration} • ${course.learnerCount.toLocaleString()} learners
            </div>
          </div>
          <div style="display: flex; gap: 0.5rem;">
            <a href="${course.url}" target="_blank" style="background: var(--secondary-color); color: white; padding: 0.4rem 0.8rem; border-radius: 4px; text-decoration: none; font-size: 0.85rem;">
              Launch
            </a>
            <button onclick="removeBookmark('${course.id}')" style="background: rgba(255,255,255,0.2); color: white; border: none; padding: 0.4rem 0.8rem; border-radius: 4px; cursor: pointer; font-size: 0.85rem;">
              Remove
            </button>
          </div>
        </div>
      </div>
    `;
  }).join('');
  
  bookmarkedCoursesList.innerHTML = html;
}

function loadNotesData(notes) {
  const notesCourse = document.getElementById('notesCourse');
  if (!notesCourse) return;
  
  // Populate course options
  notesCourse.innerHTML = '<option value="">Select a course...</option>' +
    courses.map(course => 
      `<option value="${course.id}">${course.title}</option>`
    ).join('');
  
  // Store notes in global variable for easy access
  window.userNotes = notes;
}
// Notes Functions
async function loadNotes() {
  const courseId = document.getElementById('notesCourse').value;
  const notesTextarea = document.getElementById('userNotes');
  
  if (!courseId || !currentUser) {
    notesTextarea.value = '';
    updateWordCount();
    return;
  }
  
  try {
    const userDoc = await window.firestore.getDoc(
      window.firestore.doc(window.db, 'users', currentUser.uid)
    );
    
    if (userDoc.exists()) {
      const userData = userDoc.data();
      const notes = userData.notes?.[courseId] || '';
      notesTextarea.value = notes;
      updateWordCount();
    }
  } catch (error) {
    console.error('Error loading notes:', error);
  }
}

async function saveNotes() {
  const courseId = document.getElementById('notesCourse').value;
  const notesContent = document.getElementById('userNotes').value;
  
  if (!courseId || !currentUser) {
    showNotification('Please select a course first', 'warning');
    return;
  }
  
  try {
    await window.firestore.updateDoc(
      window.firestore.doc(window.db, 'users', currentUser.uid),
      {
        [`notes.${courseId}`]: notesContent
      }
    );
    
    showNotification('Notes saved successfully!', 'success');
  } catch (error) {
    console.error('Error saving notes:', error);
    showNotification('Error saving notes', 'error');
  }
}

function exportNotes() {
  const courseId = document.getElementById('notesCourse').value;
  const notesContent = document.getElementById('userNotes').value;
  
  if (!courseId || !notesContent) {
    showNotification('No notes to export', 'warning');
    return;
  }
  
  const course = courses.find(c => c.id === courseId);
  const filename = `${course.title} - Notes.txt`;
  
  const blob = new Blob([notesContent], { type: 'text/plain' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = filename;
  a.click();
  URL.revokeObjectURL(url);
  
  showNotification('Notes exported successfully!', 'success');
}

function updateWordCount() {
  const notesContent = document.getElementById('userNotes').value;
  const wordCount = notesContent.trim().split(/\s+/).filter(word => word.length > 0).length;
  document.getElementById('wordCount').textContent = `${wordCount} words`;
}

function removeBookmark(courseId) {
  toggleBookmark(courseId);
  updateBookmarkedCoursesList();
}

// Study Group Functions
async function createStudyGroup(event) {
  event.preventDefault();
  
  if (!currentUser) {
    showNotification('Please login to create a study group', 'warning');
    return;
  }
  
  const name = document.getElementById('groupName').value;
  const courseId = document.getElementById('groupCourse').value;
  const description = document.getElementById('groupDescription').value;
  
  // In a real app, this would save to the database
  showNotification('Study group feature coming soon!', 'info');
  closeModal('createStudyGroupModal');
}

// Modal Functions
function openModal(modalId) {
  const modal = document.getElementById(modalId);
  if (modal) {
    modal.style.display = 'block';
    document.body.style.overflow = 'hidden';
  }
}

function closeModal(modalId) {
  const modal = document.getElementById(modalId);
  if (modal) {
    modal.style.display = 'none';
    document.body.style.overflow = 'auto';
  }
}

// Form Submission Functions
function submitFeedback(event) {
  event.preventDefault();
  
  const type = document.getElementById('feedbackType').value;
  const email = document.getElementById('feedbackEmail').value;
  const message = document.getElementById('feedbackMessage').value;
  
  // Prepare email
  const subject = `ImpactMojo Feedback: ${type}`;
  const body = `Type: ${type}\nFrom: ${email || 'Anonymous'}\n\nMessage:\n${message}`;
  
  window.open(`mailto:varnasriraman@gmail.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`);
  
  showNotification('Thank you for your feedback!', 'success');
  closeModal('feedbackModal');
  event.target.reset();
}

function submitSuggestion(event) {
  event.preventDefault();
  
  const title = document.getElementById('suggestionTitle').value;
  const description = document.getElementById('suggestionDescription').value;
  const email = document.getElementById('suggestionEmail').value;
  
  const subject = 'ImpactMojo Course Suggestion';
  const body = `Course Title: ${title}\nFrom: ${email || 'Anonymous'}\n\nDescription:\n${description}`;
  
  window.open(`mailto:varnasriraman@gmail.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`);
  
  showNotification('Thank you for your suggestion!', 'success');
  closeModal('suggestModal');
  event.target.reset();
}

function submitQuestion(event) {
  event.preventDefault();
  
  const course = document.getElementById('questionCourse').value;
  const question = document.getElementById('questionText').value;
  const email = document.getElementById('questionEmail').value;
  
  const subject = course ? `Question about ${course}` : 'ImpactMojo Question';
  const body = `From: ${email}\n\nQuestion:\n${question}`;
  
  window.open(`mailto:varnasriraman@gmail.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`);
  
  showNotification('Your question has been sent!', 'success');
  closeModal('questionModal');
  event.target.reset();
}

function subscribeNewsletter(event) {
  event.preventDefault();
  
  const email = event.target.querySelector('input[type="email"]').value;
  
  // In a real app, this would save to a mailing list
  showNotification('Thank you for subscribing!', 'success');
  event.target.reset();
}

// Utility Functions
function showNotification(message, type = 'info') {
  const notification = document.createElement('div');
  notification.className = `notification ${type}`;
  notification.textContent = message;
  
  document.body.appendChild(notification);
  
  // Animate in
  setTimeout(() => {
    notification.style.opacity = '1';
    notification.style.transform = 'translateX(0)';
  }, 10);
  
  // Remove after 4 seconds
  setTimeout(() => {
    notification.style.opacity = '0';
    notification.style.transform = 'translateX(100%)';
    setTimeout(() => notification.remove(), 300);
  }, 4000);
}

function updateCourseCount(count) {
  const courseCount = document.getElementById('courseCount');
  if (courseCount) {
    courseCount.textContent = `Showing ${count} course${count !== 1 ? 's' : ''}`;
  }
}

function scrollToDashboard() {
  const dashboard = document.getElementById('userDashboard');
  if (dashboard) {
    dashboard.scrollIntoView({ behavior: 'smooth', block: 'start' });
  }
}

function formatDate(dateString) {
  const date = new Date(dateString);
  const now = new Date();
  const diffTime = Math.abs(now - date);
  const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
  
  if (diffDays === 0) return 'today';
  if (diffDays === 1) return 'yesterday';
  if (diffDays < 7) return `${diffDays} days ago`;
  if (diffDays < 30) return `${Math.floor(diffDays / 7)} weeks ago`;
  if (diffDays < 365) return `${Math.floor(diffDays / 30)} months ago`;
  return `${Math.floor(diffDays / 365)} years ago`;
}

function debounce(func, wait) {
  let timeout;
  return function executedFunction(...args) {
    const later = () => {
      clearTimeout(timeout);
      func(...args);
    };
    clearTimeout(timeout);
    timeout = setTimeout(later, wait);
  };
}

// Theme Toggle
function toggleTheme() {
  document.body.classList.toggle('dark');
  const isDark = document.body.classList.contains('dark');
  localStorage.setItem('theme', isDark ? 'dark' : 'light');
  
  // Update theme toggle button
  const themeToggle = document.querySelector('.theme-toggle');
  if (themeToggle) {
    themeToggle.textContent = isDark ? '☀️' : '🌙';
  }
}

// Initialize theme
const savedTheme = localStorage.getItem('theme');
if (savedTheme === 'dark') {
  document.body.classList.add('dark');
  const themeToggle = document.querySelector('.theme-toggle');
  if (themeToggle) {
    themeToggle.textContent = '☀️';
  }
}

// Auto-save notes
let notesTimeout;
document.getElementById('userNotes')?.addEventListener('input', function() {
  clearTimeout(notesTimeout);
  updateWordCount();
  
  if (currentUser && document.getElementById('notesCourse').value) {
    notesTimeout = setTimeout(() => {
      saveNotes();
    }, 2000); // Save after 2 seconds of inactivity
  }
});

// Populate study group course options
document.addEventListener('DOMContentLoaded', function() {
  const groupCourseSelect = document.getElementById('groupCourse');
  if (groupCourseSelect) {
    groupCourseSelect.innerHTML = '<option value="">Select a course...</option>' +
      courses.map(course => 
        `<option value="${course.id}">${course.title}</option>`
      ).join('');
  }
});

// Service Worker Registration (for PWA support)
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/sw.js').catch(() => {
      // Service worker registration failed, app will work without offline support
    });
  });
}

// Accessibility: Handle keyboard navigation
document.addEventListener('keydown', function(event) {
  // Close modals with Escape key
  if (event.key === 'Escape') {
    const modals = document.querySelectorAll('.modal');
    modals.forEach(modal => {
      if (modal.style.display === 'block') {
        modal.style.display = 'none';
      }
    });
    document.body.style.overflow = 'auto';
  }
});

// Handle course card keyboard interaction
document.addEventListener('click', function(event) {
  if (event.target.matches('.course-card')) {
    const firstButton = event.target.querySelector('.launch-btn');
    if (firstButton && event.detail === 0) { // Keyboard activation
      firstButton.focus();
    }
  }
});

// Lazy loading for images (future enhancement)
const lazyImages = document.querySelectorAll('.lazy-load');
if ('IntersectionObserver' in window) {
  const imageObserver = new IntersectionObserver((entries, observer) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const image = entry.target;
        image.src = image.dataset.src;
        image.classList.add('loaded');
        imageObserver.unobserve(image);
      }
    });
  });
  
  lazyImages.forEach(image => imageObserver.observe(image));
}

// Analytics placeholder (would integrate with Google Analytics or similar)
function trackEvent(category, action, label) {
  // console.log('Track event:', category, action, label);
  // In production, this would send data to analytics service
}

// Track course launches
document.addEventListener('click', function(event) {
  if (event.target.matches('.launch-btn') || event.target.closest('.launch-btn')) {
    const courseCard = event.target.closest('.course-card');
    if (courseCard) {
      const courseId = courseCard.dataset.courseId;
      const course = courses.find(c => c.id === courseId);
      if (course) {
        trackEvent('Course', 'Launch', course.title);
        
        // Update user progress if logged in
        if (currentUser) {
          updateCourseProgress(courseId, { lastAccessed: new Date().toISOString() });
        }
      }
    }
  }
});

// Update course progress
async function updateCourseProgress(courseId, progressData) {
  if (!currentUser) return;
  
  try {
    await window.firestore.updateDoc(
      window.firestore.doc(window.db, 'users', currentUser.uid),
      {
        [`progress.${courseId}`]: progressData
      }
    );
  } catch (error) {
    console.error('Error updating progress:', error);
  }
}

// Print functionality for course details
function printCourseDetails(courseId) {
  const course = courses.find(c => c.id === courseId);
  if (!course) return;
  
  const printWindow = window.open('', '_blank');
  printWindow.document.write(`
    <html>
      <head>
        <title>${course.title} - ImpactMojo</title>
        <style>
          body { font-family: Arial, sans-serif; line-height: 1.6; padding: 20px; }
          h1 { color: #2c3e50; }
          .meta { color: #666; margin: 10px 0; }
          .section { margin: 20px 0; }
          .section h3 { color: #3498db; }
        </style>
      </head>
      <body>
        <h1>${course.title}</h1>
        <div class="meta">
          <strong>Duration:</strong> ${course.duration} | 
          <strong>Difficulty:</strong> ${course.difficulty} | 
          <strong>Learners:</strong> ${course.learnerCount.toLocaleString()}
        </div>
        <div class="section">
          <h3>Description</h3>
          <p>${course.description}</p>
        </div>
        <div class="section">
          <h3>Prerequisites</h3>
          <ul>${course.prerequisites.map(p => `<li>${p}</li>`).join('')}</ul>
        </div>
        <div class="section">
          <h3>Learning Outcomes</h3>
          <ul>${course.outcomes.map(o => `<li>${o}</li>`).join('')}</ul>
        </div>
        <div class="section">
          <h3>Target Audience</h3>
          <p>${course.audience}</p>
        </div>
        <hr>
        <p><small>© 2025 ImpactMojo. Visit ${course.url} to access this course.</small></p>
      </body>
    </html>
  `);
  printWindow.document.close();
  printWindow.print();
}
// Performance optimization: Batch DOM updates
function batchDOMUpdates(updates) {
  requestAnimationFrame(() => {
    updates.forEach(update => update());
  });
}

// Check for unsaved changes before leaving
window.addEventListener('beforeunload', function(event) {
  const notesTextarea = document.getElementById('userNotes');
  if (notesTextarea && notesTextarea.value && currentUser) {
    const courseId = document.getElementById('notesCourse').value;
    if (courseId && window.userNotes?.[courseId] !== notesTextarea.value) {
      event.preventDefault();
      event.returnValue = '';
    }
  }
});

// Initialize floating member button animation
document.addEventListener('DOMContentLoaded', function() {
  const floatingBtn = document.getElementById('floating-member-btn');
  if (floatingBtn) {
    // Add subtle floating animation
    let direction = 1;
    let position = 0;
    
    setInterval(() => {
      position += direction * 0.5;
      if (position > 10 || position < -10) {
        direction *= -1;
      }
      floatingBtn.style.transform = `translateY(${position}px)`;
    }, 100);
  }
});

// Handle responsive menu (if needed in future)
function toggleMobileMenu() {
  const nav = document.querySelector('nav');
  if (nav) {
    nav.classList.toggle('mobile-open');
  }
}

// Smooth scroll for anchor links
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
  anchor.addEventListener('click', function(e) {
    const targetId = this.getAttribute('href');
    if (targetId === '#') return;
    
    e.preventDefault();
    const target = document.querySelector(targetId);
    if (target) {
      target.scrollIntoView({
        behavior: 'smooth',
        block: 'start'
      });
    }
  });
});

// Initialize tooltips (future enhancement)
function initTooltips() {
  const elements = document.querySelectorAll('[title]');
  elements.forEach(element => {
    // Could implement custom tooltip system here
  });
}

// Cookie consent (for future implementation)
function checkCookieConsent() {
  const consent = localStorage.getItem('cookieConsent');
  if (!consent) {
    // Show cookie consent banner
  }
}

// Final initialization
window.addEventListener('load', function() {
  // Remove loading states
  document.body.classList.add('loaded');
  
  // Initialize any remaining features
  initTooltips();
  checkCookieConsent();
  
  // Log successful load
  console.log('ImpactMojo loaded successfully');
});

// Error boundary for the entire app
window.addEventListener('error', function(event) {
  console.error('Global error:', event.error);
  // Could send errors to logging service
});

window.addEventListener('unhandledrejection', function(event) {
  console.error('Unhandled promise rejection:', event.reason);
  // Could send errors to logging service
});
</script>

</body>
</html>