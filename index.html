<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ImpactMojo 101 Knowledge Series - Development Education for South Asia</title>
  <meta name="description" content="Curated library of development education courses covering justice, equity, and development practice in India and South Asia. 33 free, theory-grounded, context-applied knowledge decks.">
  <meta name="keywords" content="development education, South Asia, India, social justice, data feminism, development economics, public policy">
  <meta name="author" content="Dr. Varna Sri Raman">
  
  <!-- Enhanced Open Graph tags -->
  <meta property="og:title" content="ImpactMojo 101 Knowledge Series - Free Development Education">
  <meta property="og:description" content="Free development education courses for India and South Asia. 33 comprehensive courses covering data analysis, gender studies, economics, climate change and more.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://www.impactmojo.in">
  <meta property="og:image" content="https://www.impactmojo.in/assets/images/impactmojo-banner.jpg">
  <meta property="og:site_name" content="ImpactMojo">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="ImpactMojo 101 Knowledge Series">
  <meta name="twitter:description" content="Free development education courses for India and South Asia - 33 comprehensive courses">
  <meta name="twitter:image" content="https://www.impactmojo.in/assets/images/impactmojo-banner.jpg">
  
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Firebase SDK -->
<script type="module">
  import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.0.0/firebase-app.js';
  import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut, onAuthStateChanged, GoogleAuthProvider, signInWithPopup, sendPasswordResetEmail } from 'https://www.gstatic.com/firebasejs/10.0.0/firebase-auth.js';
  import { getFirestore, doc, setDoc, getDoc, updateDoc } from 'https://www.gstatic.com/firebasejs/10.0.0/firebase-firestore.js';

  // 🔥 FIREBASE CONFIGURATION 🔥
  const firebaseConfig = {
    apiKey: "YOUR_API_KEY_HERE",
    authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
    projectId: "YOUR_PROJECT_ID", 
    storageBucket: "YOUR_PROJECT_ID.appspot.com",
    messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
    appId: "YOUR_APP_ID"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  // Make Firebase available globally
  window.auth = auth;
  window.db = db;
  window.firebaseAuth = { signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut, onAuthStateChanged, GoogleAuthProvider, signInWithPopup, sendPasswordResetEmail };
  window.firestore = { doc, setDoc, getDoc, updateDoc };
</script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  
  <!-- Firebase CDN Scripts -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  
  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "EducationalOrganization",
    "name": "ImpactMojo",
    "description": "Curated library of development education courses for South Asia",
    "url": "https://www.impactmojo.in",
    "founder": {
      "@type": "Person",
      "name": "Dr. Varna Sri Raman"
    }
  }
  </script>

  <style>
    /* Skip link for accessibility */
    .skip-link {
      position: absolute;
      top: -40px;
      left: 6px;
      background: var(--primary-color);
      color: white;
      padding: 8px;
      text-decoration: none;
      border-radius: 4px;
      z-index: 9999;
      font-weight: bold;
    }
    
    .skip-link:focus {
      top: 6px;
    }

    :root {
      --primary-color: #2c3e50;
      --secondary-color: #3498db;
      --accent-color: #e74c3c;
      --success-color: #27ae60;
      --warning-color: #f39c12;
      --info-color: #8e44ad;
      --text-primary: #2c3e50;
      --text-secondary: #7f8c8d;
      --bg-primary: #ffffff;
      --card-bg: #ffffff;
      --light-bg: #f8f9fa;
      --border-color: #ecf0f1;
      --shadow: 0 2px 10px rgba(0,0,0,0.1);
      --shadow-hover: 0 4px 20px rgba(0,0,0,0.15);
      --transition: all 0.3s ease;
      --border-radius: 8px;
    }

    /* Dark mode variables */
    body.dark {
      --bg-primary: #1a1a1a;
      --card-bg: #2d2d2d;
      --border-color: #404040;
      --text-primary: #f0f0f0;
      --text-secondary: #b8b8b8;
      --light-bg: #333333;
      --shadow: 0 2px 12px rgba(0,0,0,0.3);
      --shadow-hover: 0 4px 20px rgba(0,0,0,0.4);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      line-height: 1.6;
      transition: var(--transition);
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1rem;
    }

    /* Theme Toggle Button */
    .theme-toggle {
      position: fixed;
      top: 15px;
      right: 15px;
      z-index: 1000;
      font-size: 1.2rem;
      background: var(--card-bg);
      border: 2px solid var(--border-color);
      color: var(--text-primary);
      cursor: pointer;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
      box-shadow: var(--shadow);
    }

    .theme-toggle:hover {
      transform: scale(1.1);
      box-shadow: var(--shadow-hover);
    }

    /* Header */
    header {
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      color: white;
      padding: 4rem 0;
      text-align: center;
    }

    h1 {
      font-family: 'Inter', sans-serif;
      font-size: 3rem;
      margin-bottom: 1rem;
      font-weight: 600;
      letter-spacing: -0.025em;
    }

    .subtitle {
      font-size: 1.2rem;
      opacity: 0.9;
      max-width: 800px;
      margin: 0 auto 2rem;
    }

    /* Navigation */
    nav {
      margin-top: 2rem;
      text-align: center;
    }

    nav a {
      color: white;
      text-decoration: none;
      margin: 0 1rem;
      padding: 0.5rem 1rem;
      background: rgba(255,255,255,0.2);
      border-radius: 20px;
      transition: var(--transition);
    }

    nav a:hover {
      background: rgba(255,255,255,0.3);
    }

    /* Latest Additions */
    .latest-additions {
      background: var(--card-bg);
      border-radius: var(--border-radius);
      padding: 2rem;
      margin: 2rem 0;
      box-shadow: var(--shadow);
      border: 1px solid var(--border-color);
    }

    .latest-additions h3 {
      color: var(--text-primary);
      margin-bottom: 1rem;
      font-size: 1.5rem;
    }

    .latest-additions ul {
      list-style: none;
    }

    .latest-additions li {
      padding: 0.5rem 0;
      border-bottom: 1px solid var(--border-color);
    }

    .latest-additions li:last-child {
      border-bottom: none;
    }

    .date {
      color: var(--text-secondary);
      font-size: 0.9rem;
    }

    /* Learning Paths */
    .learning-paths {
      margin: 3rem 0;
    }

    .learning-paths h3 {
      color: var(--text-primary);
      margin-bottom: 1.5rem;
      font-size: 1.8rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .paths-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1.5rem;
    }

    .path-card {
      background: var(--card-bg);
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      padding: 1.5rem;
      cursor: pointer;
      transition: var(--transition);
    }

    .path-card:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-hover);
    }

    .path-card h4 {
      color: var(--text-primary);
      margin-bottom: 0.5rem;
    }

    .path-description {
      color: var(--text-secondary);
      margin-bottom: 1rem;
      font-size: 0.9rem;
    }

    .path-courses {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    .path-course-tag {
      background: var(--light-bg);
      color: var(--text-secondary);
      padding: 0.25rem 0.5rem;
      border-radius: 12px;
      font-size: 0.8rem;
      border: 1px solid var(--border-color);
    }

    /* Popular Courses */
    .popular-courses {
      margin: 3rem 0;
      background: var(--card-bg);
      border-radius: var(--border-radius);
      padding: 2rem;
      box-shadow: var(--shadow);
      border: 1px solid var(--border-color);
    }

    .popular-courses h3 {
      color: var(--text-primary);
      margin-bottom: 1.5rem;
      font-size: 1.5rem;
    }

    .popular-list {
      display: grid;
      gap: 1rem;
    }

    .popular-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem;
      background: var(--light-bg);
      border-radius: var(--border-radius);
      border: 1px solid var(--border-color);
      transition: var(--transition);
    }

    .popular-item:hover {
      transform: translateY(-1px);
      box-shadow: var(--shadow);
    }

    .popular-rank {
      background: var(--secondary-color);
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 0.9rem;
      flex-shrink: 0;
    }

    /* Search Section */
    .search-section {
      margin: 3rem 0;
    }

    .search-container {
      position: relative;
      max-width: 600px;
      margin: 0 auto 2rem;
    }

    .search-icon {
      position: absolute;
      left: 1rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-secondary);
    }

    .search-input {
      width: 100%;
      padding: 1rem 1rem 1rem 3rem;
      border: 2px solid var(--border-color);
      border-radius: var(--border-radius);
      font-size: 1rem;
      transition: var(--transition);
      background: var(--bg-primary);
      color: var(--text-primary);
    }

    .search-input:focus {
      outline: none;
      border-color: var(--secondary-color);
    }

    /* Filters */
    .filters {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      justify-content: center;
      margin-bottom: 2rem;
    }

    .filter-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .filter-group label {
      font-weight: 500;
      color: var(--text-primary);
    }

    .filter-select {
      padding: 0.5rem;
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      background: var(--bg-primary);
      color: var(--text-primary);
    }

    .clear-filters {
      background: var(--accent-color);
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: var(--border-radius);
      cursor: pointer;
      transition: var(--transition);
    }

    .clear-filters:hover {
      background: #c0392b;
    }

    /* Stats Bar */
    .stats-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .course-count {
      color: var(--text-secondary);
    }

    .comparison-tools {
      display: flex;
      gap: 1rem;
      align-items: center;
    }

    .view-toggle {
      display: flex;
      gap: 0.25rem;
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
    }

    .view-btn {
      padding: 0.5rem;
      border: none;
      background: var(--bg-primary);
      cursor: pointer;
      transition: var(--transition);
      color: var(--text-primary);
    }

    .view-btn.active {
      background: var(--secondary-color);
      color: white;
    }

    .compare-btn,
    .secondary-btn {
      padding: 0.5rem 1rem;
      border: 1px solid var(--border-color);
      background: var(--bg-primary);
      cursor: pointer;
      border-radius: var(--border-radius);
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--text-primary);
    }

    .compare-btn:hover,
    .secondary-btn:hover {
      background: var(--light-bg);
    }

    /* Course Grid */
    .courses-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 1.5rem;
      margin-bottom: 3rem;
    }

    .courses-list {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-bottom: 3rem;
    }

    /* Course Cards */
    .course-card {
      background: var(--card-bg);
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      padding: 1.5rem;
      transition: var(--transition);
      cursor: pointer;
      position: relative;
    }

    .course-card:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-hover);
    }

    .course-card.expanded {
      transform: none;
      box-shadow: var(--shadow-hover);
    }

    .course-number {
      position: absolute;
      top: 0.75rem;
      right: 0.75rem;
      background: var(--secondary-color);
      color: white;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 0.85rem;
      z-index: 10;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .course-header {
      display: flex;
      gap: 1rem;
      align-items: flex-start;
      margin-bottom: 1rem;
    }

    .course-icon {
      width: 50px;
      height: 50px;
      background: var(--light-bg);
      border-radius: var(--border-radius);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--secondary-color);
      font-size: 1.5rem;
      flex-shrink: 0;
    }

    .course-title-section {
      flex: 1;
      padding-right: 2.5rem; /* Add padding to avoid overlap with course number */
    }

    .course-title {
      color: var(--text-primary);
      margin-bottom: 0.5rem;
      font-size: 1.1rem;
      font-weight: 600;
    }

    .course-meta {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .meta-tag {
      background: var(--light-bg);
      color: var(--text-secondary);
      padding: 0.25rem 0.5rem;
      border-radius: 12px;
      font-size: 0.8rem;
      border: 1px solid var(--border-color);
    }

    .course-description {
      color: var(--text-secondary);
      line-height: 1.6;
      margin-bottom: 1rem;
      font-size: 0.95rem;
    }

    .course-stats {
      display: flex;
      gap: 1rem;
      margin: 1rem 0;
      font-size: 0.85rem;
      color: var(--text-secondary);
    }

    .course-stat {
      display: flex;
      align-items: center;
      gap: 0.25rem;
    }

    .course-actions {
      display: flex;
      gap: 0.5rem;
      align-items: center;
      flex-wrap: wrap;
    }

    .course-actions-left {
      display: flex;
      gap: 0.5rem;
      flex: 1;
    }

    .launch-btn {
      background: var(--secondary-color);
      color: white;
      border: none;
      padding: 0.75rem 1rem;
      border-radius: var(--border-radius);
      cursor: pointer;
      transition: var(--transition);
      font-size: 0.9rem;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }

    .launch-btn:hover {
      background: #2980b9;
      transform: translateY(-1px);
      color: white;
    }

    .bookmark-btn {
      background: none;
      border: 1px solid var(--border-color);
      color: var(--text-secondary);
      padding: 0.75rem;
      border-radius: var(--border-radius);
      cursor: pointer;
      transition: var(--transition);
    }

    .bookmark-btn:hover {
      color: var(--warning-color);
      border-color: var(--warning-color);
    }

    .bookmark-btn.bookmarked {
      color: var(--warning-color);
      border-color: var(--warning-color);
      background: rgba(243, 156, 18, 0.1);
    }

    .compare-checkbox {
      margin-right: 0.5rem;
      transform: scale(1.2);
      cursor: pointer;
    }

    /* Expanded Course Details */
    .course-details {
      margin-top: 1rem;
      padding-top: 1rem;
      border-top: 1px solid var(--border-color);
      display: none;
    }

    .course-card.expanded .course-details {
      display: block;
    }

    .details-section {
      margin-bottom: 1rem;
    }

    .details-section h4 {
      color: var(--text-primary);
      margin-bottom: 0.5rem;
      font-size: 0.9rem;
    }

    .details-section ul {
      list-style: none;
      padding-left: 0;
    }

    .details-section li {
      padding: 0.25rem 0;
      color: var(--text-secondary);
      font-size: 0.9rem;
    }

    .details-section li::before {
      content: "•";
      color: var(--secondary-color);
      margin-right: 0.5rem;
    }

    /* No Results */
    .no-results {
      text-align: center;
      padding: 3rem;
      color: var(--text-secondary);
    }

    .no-results.hidden {
      display: none;
    }

    .no-results i {
      font-size: 3rem;
      margin-bottom: 1rem;
      color: var(--border-color);
    }

    /* User Dashboard */
    .user-dashboard {
      background: linear-gradient(135deg, var(--success-color), var(--secondary-color));
      color: white;
      padding: 2rem;
      margin: 2rem 0;
      border-radius: var(--border-radius);
      box-shadow: var(--shadow);
      display: none;
    }

    .dashboard-header {
      text-align: center;
      margin-bottom: 2rem;
    }

    .dashboard-header h2 {
      margin: 0 0 1rem 0;
      font-size: 1.8rem;
    }

    .dashboard-benefits {
      display: flex;
      gap: 2rem;
      justify-content: center;
      flex-wrap: wrap;
      margin-bottom: 2rem;
    }

    .benefit-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-weight: 500;
    }

    .dashboard-content {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
    }

    .dashboard-section {
      background: rgba(255,255,255,0.1);
      border-radius: var(--border-radius);
      padding: 1.5rem;
    }

    .dashboard-section h3 {
      margin: 0 0 1rem 0;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    /* Wall of Love */
    .wall-of-love {
      background: var(--card-bg);
      border-radius: var(--border-radius);
      padding: 2rem;
      margin-bottom: 3rem;
      box-shadow: var(--shadow);
      border: 1px solid var(--border-color);
    }

    .section-header {
      text-align: center;
      margin-bottom: 2rem;
    }

    .section-icon {
      font-size: 2rem;
      color: var(--accent-color);
      margin-bottom: 0.5rem;
    }

    .section-header h2 {
      color: var(--text-primary);
      font-family: 'Playfair Display', serif;
      font-size: 2.5rem;
    }

    .testimonial-stats {
      text-align: center;
      margin: 2rem 0;
      padding: 2rem;
      background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
      color: white;
      border-radius: var(--border-radius);
    }

    .stats-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 2rem;
    }

    .stat-item {
      text-align: center;
    }

    .stat-number {
      font-size: 2.5rem;
      font-weight: 700;
      font-family: 'Playfair Display', serif;
      display: block;
    }

    .stat-label {
      font-size: 0.9rem;
      opacity: 0.9;
    }

    .testimonials-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
      margin-top: 2rem;
    }

    .testimonial {
      background: var(--light-bg);
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      padding: 1.5rem;
      position: relative;
      transition: var(--transition);
    }

    .testimonial:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow);
    }

    .testimonial::before {
      content: '"';
      position: absolute;
      top: -10px;
      left: 15px;
      font-size: 4rem;
      color: var(--secondary-color);
      font-family: 'Playfair Display', serif;
      line-height: 1;
    }

    .testimonial-text {
      color: var(--text-secondary);
      line-height: 1.6;
      margin-bottom: 1rem;
      font-style: italic;
    }

    .testimonial-author {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .author-avatar {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: var(--secondary-color);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 1.2rem;
    }

    .author-info h5 {
      margin: 0;
      color: var(--text-primary);
      font-weight: 600;
    }

    .author-info p {
      margin: 0;
      color: var(--text-secondary);
      font-size: 0.9rem;
    }

    /* Social Share */
    .social-share {
      display: flex;
      gap: 1rem;
      justify-content: center;
      margin: 2rem 0;
      flex-wrap: wrap;
    }

    .share-btn {
      padding: 0.75rem;
      border-radius: 50%;
      color: white;
      text-decoration: none;
      font-size: 1.3rem;
      transition: var(--transition);
      width: 55px;
      height: 55px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 3px 10px rgba(0,0,0,0.2);
      position: relative;
      overflow: hidden;
    }

    .share-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: left 0.5s;
    }

    .share-btn:hover::before {
      left: 100%;
    }

    .share-btn:hover {
      transform: scale(1.15);
      box-shadow: 0 5px 20px rgba(0,0,0,0.3);
    }

    .share-btn.twitter { background: linear-gradient(135deg, #1da1f2, #0d8bd9); }
    .share-btn.linkedin { background: linear-gradient(135deg, #0077b5, #005582); }
    .share-btn.whatsapp { background: linear-gradient(135deg, #25d366, #1ebe57); }
    .share-btn.email { background: linear-gradient(135deg, var(--accent-color), #c0392b); }

    /* Extras Section */
    .extras {
      background: var(--card-bg);
      border-radius: var(--border-radius);
      padding: 2rem;
      margin-bottom: 3rem;
      box-shadow: var(--shadow);
      border: 1px solid var(--border-color);
    }

    .extras-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
      margin-top: 2rem;
    }

    .extras-card {
      background: var(--light-bg);
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      padding: 1.5rem;
      transition: var(--transition);
    }

    .extras-card:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow);
    }

    .extras-card h4 {
      color: var(--text-primary);
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .extras-card a {
      color: inherit;
      text-decoration: none;
    }

    .extras-card a:hover {
      color: var(--secondary-color);
    }

    /* Newsletter */
    .newsletter {
      background: var(--card-bg);
      border-radius: var(--border-radius);
      padding: 2rem;
      margin: 3rem 0;
      box-shadow: var(--shadow);
      border: 1px solid var(--border-color);
      text-align: center;
    }

    .newsletter h3 {
      margin: 0 0 1rem 0;
      color: var(--text-primary);
    }

    .newsletter p {
      color: var(--text-secondary);
      margin-bottom: 2rem;
    }

    .newsletter-form {
      display: flex;
      gap: 1rem;
      max-width: 400px;
      margin: 1rem auto 0;
    }

    .newsletter-form input {
      flex: 1;
      padding: 0.75rem;
      border: 2px solid var(--border-color);
      border-radius: var(--border-radius);
      font-size: 1rem;
      background: var(--bg-primary);
      color: var(--text-primary);
    }

    .newsletter-form button {
      background: var(--accent-color);
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: var(--border-radius);
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
    }

    .newsletter-form button:hover {
      background: #c0392b;
    }

    /* Author Section */
    .author {
      background: var(--card-bg);
      color: var(--text-primary);
      border-left: 4px solid var(--secondary-color);
      padding: 2rem;
      margin-top: 3rem;
      border-radius: var(--border-radius);
      box-shadow: var(--shadow);
      display: flex;
      gap: 2rem;
      align-items: flex-start;
    }

    .author-photo {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      object-fit: cover;
      flex-shrink: 0;
    }

    .author-content h3 {
      margin: 0 0 1rem 0;
      color: var(--text-primary);
      font-family: 'Playfair Display', serif;
    }

    .coaching-cta {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: var(--secondary-color);
      color: white;
      text-decoration: none;
      padding: 0.75rem 1.5rem;
      border-radius: var(--border-radius);
      margin: 1rem 0;
      transition: var(--transition);
      font-weight: 600;
    }

    .coaching-cta:hover {
      background: #2980b9;
      transform: translateY(-1px);
    }

    .author-links {
      display: flex;
      gap: 1rem;
      margin-top: 1rem;
    }

    .author-links a {
      color: var(--text-secondary);
      text-decoration: none;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .author-links a:hover {
      color: var(--secondary-color);
    }

    /* Floating Action Buttons */
    .fab-container {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 1000;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .fab-btn {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background: var(--secondary-color);
      color: white;
      border: none;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      cursor: pointer;
      box-shadow: var(--shadow);
      transition: var(--transition);
    }

    .fab-btn:hover {
      transform: scale(1.1);
      box-shadow: var(--shadow-hover);
    }

    .fab-btn.feedback { background: var(--warning-color); }
    .fab-btn.suggest { background: var(--success-color); }
    .fab-btn.question { background: var(--info-color); }

    /* Footer */
    .footer {
      background: var(--primary-color);
      color: white;
      padding: 3rem 0 1rem;
      margin-top: 3rem;
    }

    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1rem;
    }

    .footer-links {
      display: flex;
      flex-wrap: wrap;
      gap: 2rem;
      justify-content: center;
      margin-bottom: 2rem;
    }

    .footer-links a {
      color: white;
      text-decoration: none;
      opacity: 0.8;
      transition: var(--transition);
    }

    .footer-links a:hover {
      opacity: 1;
    }

    .disclaimer {
      background: var(--card-bg);
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      padding: 2rem;
      margin-bottom: 2rem;
      color: var(--text-primary);
      text-align: left;
    }

    .disclaimer h4 {
      color: var(--text-primary);
      margin: 0 0 1.5rem 0;
      font-size: 1.2rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    /* Modals */
    .modal {
      display: none;
      position: fixed;
      z-index: 2000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
    }

    .modal-content {
      background-color: var(--bg-primary);
      margin: 5% auto;
      padding: 2rem;
      border: none;
      border-radius: var(--border-radius);
      width: 90%;
      max-width: 600px;
      position: relative;
    }

    .modal-content.large {
      max-width: 900px;
    }

    .close {
      position: absolute;
      right: 1rem;
      top: 1rem;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--text-secondary);
    }

    .close:hover {
      color: var(--text-primary);
    }

    .form-group {
      margin-bottom: 1.5rem;
    }

    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
      color: var(--text-primary);
    }

    .form-group input,
    .form-group textarea,
    .form-group select {
      width: 100%;
      padding: 0.75rem;
      border: 2px solid var(--border-color);
      border-radius: var(--border-radius);
      background: var(--light-bg);
      color: var(--text-primary);
      font-family: inherit;
      transition: var(--transition);
    }

    .form-group input:focus,
    .form-group textarea:focus,
    .form-group select:focus {
      outline: none;
      border-color: var(--secondary-color);
      box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
    }

    .form-group textarea {
      resize: vertical;
      min-height: 100px;
    }

    .submit-btn {
      background: var(--secondary-color);
      color: white;
      border: none;
      padding: 0.75rem 2rem;
      border-radius: var(--border-radius);
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
    }

    .submit-btn:hover {
      background: #2980b9;
      transform: translateY(-1px);
    }

    /* Auth Navigation Styles */
    .auth-buttons {
      display: inline-flex;
      gap: 0.5rem;
      margin-left: 1rem;
    }

    .auth-btn {
      color: white !important;
      text-decoration: none;
      padding: 0.5rem 1rem;
      background: rgba(255,255,255,0.2);
      border-radius: 20px;
      transition: var(--transition);
      font-weight: 500;
      border: none;
      cursor: pointer;
    }

    .auth-btn.signup {
      background: var(--accent-color);
    }

    .auth-btn:hover {
      background: rgba(255,255,255,0.3);
      transform: translateY(-1px);
    }

    .auth-btn.signup:hover {
      background: #c0392b;
    }

    .user-menu {
      display: inline-flex;
      gap: 0.5rem;
      align-items: center;
      margin-left: 1rem;
    }

    .user-welcome {
      color: white !important;
      font-weight: 600;
      padding: 0.5rem 1rem;
      background: rgba(255,255,255,0.15);
      border-radius: 20px;
      text-decoration: none;
    }
    /* Signup Benefits Badge */
.signup-benefits-badge {
  position: absolute;
  top: calc(100% + 15px);
  right: -50px;
  background: linear-gradient(135deg, #e74c3c, #c0392b);
  color: white;
  padding: 1rem;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(231, 76, 60, 0.3);
  z-index: 1500;
  min-width: 250px;
  font-size: 0.9rem;
  opacity: 0;
  visibility: hidden;
  transform: translateY(-10px);
  transition: all 0.3s ease;
  pointer-events: none;
}

.auth-btn.signup:hover + .signup-benefits-badge,
.signup-benefits-badge:hover {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
  pointer-events: auto;
}

.benefits-arrow {
  position: absolute;
  top: -8px;
  right: 70px;
  width: 0;
  height: 0;
  border-left: 8px solid transparent;
  border-right: 8px solid transparent;
  border-bottom: 8px solid #e74c3c;
}

.benefits-content h4 {
  margin: 0 0 0.5rem 0;
  font-size: 1rem;
  font-weight: 600;
}

.benefits-content ul {
  list-style: none;
  padding: 0;
  margin: 0 0 0.75rem 0;
}

.benefits-content li {
  padding: 0.2rem 0;
  font-size: 0.85rem;
}

.benefits-cta {
  background: rgba(255,255,255,0.2);
  padding: 0.4rem 0.8rem;
  border-radius: 20px;
  text-align: center;
  font-weight: 600;
  font-size: 0.8rem;
}

    /* Course Progress Indicators */
    .course-progress-indicator {
      position: absolute;
      bottom: 1rem;
      left: 1rem;
      font-size: 0.8rem;
      padding: 0.25rem 0.5rem;
      border-radius: 12px;
      display: flex;
      align-items: center;
      gap: 0.25rem;
      z-index: 5;
    }

    .course-card.completed {
      border: 2px solid var(--success-color) !important;
    }

    /* Achievement Badges */
    .achievement-badge {
      transition: all 0.3s ease;
    }

    .achievement-badge.unlocked {
      opacity: 1 !important;
      background: rgba(46, 204, 113, 0.2) !important;
      border: 2px solid var(--success-color) !important;
    }

    /* Progress Stats */
    .progress-stat {
      text-align: center;
      padding: 1rem;
      background: rgba(255,255,255,0.1);
      border-radius: 8px;
      margin: 0.5rem;
    }

    .progress-stat .stat-number {
      font-size: 2rem;
      font-weight: 700;
      color: var(--secondary-color);
      display: block;
    }

    .progress-stat .stat-label {
      font-size: 0.9rem;
      opacity: 0.8;
    }

    /* Quiz Styles */
    .quiz-question {
      margin-bottom: 2rem;
    }

    .quiz-options {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      margin-top: 1rem;
    }

    .quiz-options label {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem;
      background: var(--light-bg);
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      cursor: pointer;
      transition: var(--transition);
    }

    .quiz-options label:hover {
      background: var(--secondary-color);
      color: white;
    }

    .quiz-navigation {
      display: flex;
      gap: 1rem;
      justify-content: center;
      margin-top: 2rem;
    }

    .quiz-navigation button {
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: var(--border-radius);
      background: var(--secondary-color);
      color: white;
      cursor: pointer;
      transition: var(--transition);
    }

    .quiz-navigation button:hover {
      background: #2980b9;
    }

    .quiz-navigation button:disabled {
      background: var(--border-color);
      cursor: not-allowed;
    }

    /* Quiz Styles */
    .quiz-question {
      margin-bottom: 2rem;
    }

    .quiz-options {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      margin-top: 1rem;
    }

    .quiz-options label {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem;
      background: var(--light-bg);
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      cursor: pointer;
      transition: var(--transition);
    }

    .quiz-options label:hover {
      background: var(--secondary-color);
      color: white;
    }

    .quiz-navigation {
      display: flex;
      gap: 1rem;
      justify-content: center;
      margin-top: 2rem;
    }

    .quiz-navigation button {
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: var(--border-radius);
      background: var(--secondary-color);
      color: white;
      cursor: pointer;
      transition: var(--transition);
    }

    .quiz-navigation button:hover {
      background: #2980b9;
    }

    .quiz-navigation button:disabled {
      background: var(--border-color);
      cursor: not-allowed;
    }

    /* Animation keyframes */
    @keyframes slideIn {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    @keyframes bounceIn {
      0% { transform: translate(-50%, -50%) scale(0.3); opacity: 0; }
      50% { transform: translate(-50%, -50%) scale(1.05); }
      70% { transform: translate(-50%, -50%) scale(0.9); }
      100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
    }

/* Hide on mobile */
@media (max-width: 768px) {
  .signup-benefits-badge {
    display: none !important;
  }
}

    /* Responsive Design */
    @media (max-width: 768px) {
      h1 {
        font-size: 2rem;
      }

      .subtitle {
        font-size: 1rem;
      }

      .container {
        padding: 0 0.5rem;
      }

      .paths-grid {
        grid-template-columns: 1fr;
        gap: 1rem;
      }

      .courses-grid {
        grid-template-columns: 1fr;
        gap: 1rem;
      }

      .course-card {
        padding: 1rem;
      }

      .stats-bar {
        flex-direction: column;
        align-items: stretch;
        gap: 0.75rem;
      }

      .comparison-tools {
        justify-content: center;
        flex-wrap: wrap;
        gap: 0.5rem;
      }

      .filters {
        flex-direction: column;
        align-items: stretch;
        gap: 1rem;
      }

      .filter-group {
        width: 100%;
      }

      .search-input {
        padding: 1rem 1rem 1rem 3.5rem;
        font-size: 1rem;
      }

      .testimonials-grid {
        grid-template-columns: 1fr;
        gap: 1rem;
      }

      .extras-grid {
        grid-template-columns: 1fr;
        gap: 1rem;
      }

      .author {
        flex-direction: column;
        text-align: center;
        padding: 1.5rem;
      }

      .author-photo {
        width: 100px;
        height: 100px;
        align-self: center;
      }

      .newsletter-form {
        flex-direction: column;
        gap: 0.75rem;
      }

      .modal-content {
        margin: 5% auto;
        width: 95%;
        padding: 1.5rem;
      }

      .dashboard-benefits {
        flex-direction: column;
        gap: 1rem;
      }

      .dashboard-content {
        grid-template-columns: 1fr;
      }

      .user-dashboard {
        padding: 1.5rem;
      }

      nav a {
        margin: 0 0.5rem;
        padding: 0.75rem 1rem;
        font-size: 0.9rem;
        display: inline-block;
        margin-bottom: 0.5rem;
      }

      .auth-buttons, .user-menu {
        margin-left: 0;
        margin-top: 1rem;
        justify-content: center;
      }
    }
  </style>
</head>

<body>
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <!-- Theme Toggle Button -->
  <button class="theme-toggle" onclick="toggleTheme()" title="Toggle dark/light theme" aria-label="Toggle dark and light theme">🌙</button>

  <!-- Header -->
  <header>
    <div class="container">
      <!-- === NEW ENHANCED USER DASHBOARD === -->
<div class="user-dashboard" id="userDashboard" style="display: none;">
  <div class="dashboard-header">
    <h2><i class="fas fa-user-circle"></i> My ImpactMojo Dashboard</h2>
    <div class="dashboard-benefits">
      <div class="benefit-item">
        <i class="fas fa-chart-line"></i>
        <span>Track Your Progress</span>
      </div>
      <div class="benefit-item">
        <i class="fas fa-sticky-note"></i>
        <span>Private Notes</span>
      </div>
      <div class="benefit-item">
        <i class="fas fa-bookmark"></i>
        <span>Save Bookmarks</span>
      </div>
      <div class="benefit-item">
        <i class="fas fa-users"></i>
        <span>Study Groups</span>
      </div>
      <div class="benefit-item">
        <i class="fas fa-percentage"></i>
        <span>10% Consulting Discount</span>
      </div>
    </div>
  </div>
  <!-- Additional dashboard sections... -->
</div>
      <h1>ImpactMojo 101 Knowledge Series</h1>
      <p class="subtitle">
        ImpactMojo is a curated library of full-length knowledge decks that explore justice, equity, and development practice in India and South Asia. Each one is grounded in theory, applied in context, and ready for real-world use by educators, practitioners, and social researchers worldwide.
      </p>
      
      <!-- Navigation with Auth -->
      <nav>
        <a href="#courses">Browse Courses</a>
        <a href="#wall-of-love">Wall of Love</a>
        <a href="#extras">Resources</a>
        
        <!-- AUTH BUTTONS -->
        <div class="auth-buttons" id="authButtons">
          <a href="#" onclick="openModal('loginModal')" class="auth-btn">Login</a>
          <div style="position: relative; display: inline-block;">
            <a href="#" onclick="openModal('signupModal')" class="auth-btn signup">Sign Up</a>
            <!-- Add this right after the signup button -->
            <div class="signup-benefits-badge" id="signupBenefits">
              <div class="benefits-arrow"></div>
              <div class="benefits-content">
                <h4>FREE Membership Benefits:</h4>
                <ul>
                  <li>✅ Access all 33 courses</li>
                  <li>📝 Private notes & bookmarks</li>
                  <li>📊 Progress tracking</li>
                  <li>💰 10% consulting discount</li>
                </ul>
                <div class="benefits-cta">Join 25,000+ learners!</div>
              </div>
            </div>
          </div>
        </div>
        <div class="user-menu" id="userMenu" style="display: none;">
          <a href="#" onclick="toggleUserDashboard()" class="user-welcome">Welcome, <span id="userName">User</span>!</a>
          <a href="#" onclick="logout()" class="auth-btn">Logout</a>
        </div>
      </nav>
    </div>
  </header>

  <!-- Floating Action Buttons -->
  <aside class="fab-container" role="complementary" aria-label="Quick actions">
    <button class="fab-btn feedback" onclick="openModal('feedbackModal')" title="Give feedback about ImpactMojo" aria-label="Give feedback about ImpactMojo">
      <i class="fas fa-comment" aria-hidden="true"></i>
    </button>
    <button class="fab-btn suggest" onclick="openModal('suggestModal')" title="Suggest a new course" aria-label="Suggest a new course">
      <i class="fas fa-lightbulb" aria-hidden="true"></i>
    </button>
    <button class="fab-btn question" onclick="openModal('questionModal')" title="Ask a question" aria-label="Ask a question">
      <i class="fas fa-question" aria-hidden="true"></i>
    </button>
    <button class="fab-btn compare" onclick="openModal('comparisonModal')" title="Compare courses" aria-label="Compare selected courses" style="display: none;">
      <i class="fas fa-balance-scale" aria-hidden="true"></i>
    </button>
  </aside>

  <main id="main-content" role="main">
    <div class="container">
      <!-- User Dashboard (hidden by default, shown when logged in) -->
      <div class="user-dashboard" id="userDashboard" style="display: none;">
        <div class="dashboard-header">
          <h2><i class="fas fa-user-circle"></i> My ImpactMojo Dashboard</h2>
          <div class="dashboard-benefits">
            <div class="benefit-item">
              <i class="fas fa-chart-line"></i>
              <span>Track Your Progress</span>
            </div>
            <div class="benefit-item">
              <i class="fas fa-sticky-note"></i>
              <span>Private Notes</span>
            </div>
            <div class="benefit-item">
              <i class="fas fa-bookmark"></i>
              <span>Save Bookmarks</span>
            </div>
            <div class="benefit-item consulting-discount">
              <i class="fas fa-percentage"></i>
              <span>10% Consulting Discount</span>
            </div>
          </div>
        </div>

        <div class="dashboard-content">
          <!-- Learning Progress Section -->
          <div class="dashboard-section">
            <h3><i class="fas fa-graduation-cap"></i> Learning Progress</h3>
            <div class="progress-summary">
              <div class="progress-stat">
                <span class="stat-number" id="coursesStarted">0</span>
                <span class="stat-label">Courses Started</span>
              </div>
              <div class="progress-stat">
                <span class="stat-number" id="coursesCompleted">0</span>
                <span class="stat-label">Courses Completed</span>
              </div>
              <div class="progress-stat">
                <span class="stat-number" id="totalProgress">0%</span>
                <span class="stat-label">Overall Progress</span>
              </div>
            </div>
            <div style="margin-top: 1rem;">
              <h4>Recent Activity</h4>
              <div id="recentActivity" style="background: rgba(255,255,255,0.1); border-radius: 8px; padding: 1rem; margin-top: 0.5rem;">
                <p style="opacity: 0.8; font-style: italic;">No course activity yet. Start learning to see your progress!</p>
              </div>
            </div>
            <div style="margin-top: 1rem;">
              <button onclick="markCourseComplete()" style="background: var(--success-color); color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 8px; cursor: pointer; margin-right: 1rem;">
                <i class="fas fa-check-circle"></i> Mark Current Course Complete
              </button>
              <button onclick="generateCertificate()" style="background: var(--warning-color); color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 8px; cursor: pointer;">
                <i class="fas fa-certificate"></i> Generate Certificate
              </button>
            </div>
          </div>

          <!-- Notes Section -->
          <div class="dashboard-section">
            <h3><i class="fas fa-sticky-note"></i> My Academic Notes</h3>
            <div class="notes-area">
              <div style="margin-bottom: 1rem; display: flex; gap: 1rem; align-items: center; flex-wrap: wrap;">
                <select id="notesCourse" style="padding: 0.5rem; border: 2px solid rgba(255,255,255,0.3); border-radius: 8px; background: rgba(255,255,255,0.1); color: white; min-width: 200px;">
                  <option value="">Select Course for Notes</option>
                </select>
                <button onclick="saveNotes()" style="background: var(--success-color); color: white; border: none; padding: 0.5rem 1rem; border-radius: 8px; cursor: pointer;">
                  <i class="fas fa-save"></i> Save Notes
                </button>
                <button onclick="exportNotes()" style="background: var(--secondary-color); color: white; border: none; padding: 0.5rem 1rem; border-radius: 8px; cursor: pointer;">
                  <i class="fas fa-download"></i> Export
                </button>
                <button onclick="openModal('notesSearchModal')" style="background: var(--info-color); color: white; border: none; padding: 0.5rem 1rem; border-radius: 8px; cursor: pointer;">
                  <i class="fas fa-search"></i> Search All Notes
                </button>
              </div>
              
              <!-- Quick Search -->
              <div style="margin-bottom: 1rem;">
                <input type="text" id="quickNotesSearch" placeholder="Quick search current notes..." style="width: 100%; padding: 0.5rem; border: 2px solid rgba(255,255,255,0.3); border-radius: 8px; background: rgba(255,255,255,0.1); color: white;" oninput="highlightSearchInNotes()">
              </div>
              
              <div style="margin-bottom: 0.5rem; font-size: 0.9rem; color: rgba(255,255,255,0.8);">
                <strong>Academic Format:</strong> Use headings (##), bullet points (-), tags (#tag), and citations [Source, Year]
              </div>
              
              <textarea id="userNotes" placeholder="# Course Notes for [Course Name]

## Key Concepts
- Main point 1 #important
- Main point 2 #theory

## Personal Insights
- My reflection on...
- Connection to other courses...

## Questions for Further Research
- What about...?
- How does this relate to...?

## Action Items
- [ ] Read more about...
- [ ] Apply this concept to...

## References
- [Author, Year] Title of source
- [Author, Year] Another reference

## Tags
#development #economics #gender #research #policy

---
Auto-saves every 30 seconds" style="width: 100%; min-height: 250px; padding: 1rem; border: 2px solid rgba(255,255,255,0.3); border-radius: 8px; font-family: 'Courier New', monospace; resize: vertical; background: rgba(255,255,255,0.1); color: white; font-size: 0.9rem; line-height: 1.5;"></textarea>
              
              <div style="margin-top: 0.5rem; font-size: 0.8rem; color: rgba(255,255,255,0.6); display: flex; justify-content: space-between; flex-wrap: wrap;">
                <span>Last saved: <span id="lastSaved">Never</span></span>
                <span>Words: <span id="wordCount">0</span> | Lines: <span id="lineCount">0</span></span>
              </div>
              
              <!-- Notes Statistics -->
              <div style="margin-top: 1rem; padding: 1rem; background: rgba(255,255,255,0.1); border-radius: 8px;">
                <h5 style="margin: 0 0 0.5rem 0;">Notes Overview</h5>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 1rem; font-size: 0.9rem;">
                  <div><strong id="totalNotesCount">0</strong><br><small>Course Notes</small></div>
                  <div><strong id="totalWordsCount">0</strong><br><small>Total Words</small></div>
                  <div><strong id="uniqueTagsCount">0</strong><br><small>Unique Tags</small></div>
                  <div><strong id="referencesCount">0</strong><br><small>References</small></div>
                </div>
              </div>
            </div>
          </div>

          <!-- Bookmarks Section -->
          <div class="dashboard-section">
            <h3><i class="fas fa-bookmark"></i> Bookmarked Courses</h3>
            <div class="bookmarked-courses" id="bookmarkedCoursesList">
              <p style="opacity: 0.8; font-style: italic;">No bookmarked courses yet. Bookmark courses to see them here!</p>
            </div>
          </div>

          <!-- Consulting Benefits Section -->
          <div class="dashboard-section">
            <h3><i class="fas fa-handshake"></i> Member Consulting Discount</h3>
            <div class="consulting-offer">
              <h4>10% Discount on Dr. Varna's Consulting Services</h4>
              <p>As a registered ImpactMojo user, you're eligible for a 10% discount on all consulting services.</p>
              <div style="background: rgba(255,255,255,0.1); border-radius: 8px; padding: 1rem; margin: 1rem 0;">
                <p><strong>Your Discount Code:</strong></p>
                <code id="discountCode" style="background: rgba(255,255,255,0.2); padding: 0.5rem 1rem; border-radius: 4px; font-weight: 600; color: var(--warning-color); font-size: 1.1rem;">IMPACTMOJO10</code>
                <button onclick="copyDiscountCode()" style="background: var(--info-color); color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; margin-left: 1rem; cursor: pointer;">
                  <i class="fas fa-copy"></i> Copy
                </button>
              </div>
              <a href="mailto:varna.sr@gmail.com?subject=Consulting%20Request%20-%20ImpactMojo%20Member%20(IMPACTMOJO10%20Discount)&body=Hi%20Dr.%20Varna,%0D%0A%0D%0AI'm%20a%20registered%20ImpactMojo%20user%20and%20would%20like%20to%20inquire%20about%20your%20consulting%20services.%0D%0A%0D%0AMy%20discount%20code:%20IMPACTMOJO10%0D%0A%0D%0APlease%20let%20me%20know%20your%20availability%20and%20rates.%0D%0A%0D%0AThank%20you!" style="background: rgba(255,255,255,0.2); color: white; text-decoration: none; padding: 0.75rem 1.5rem; border-radius: 8px; font-weight: 600; display: inline-block; margin-top: 1rem;">
                <i class="fas fa-envelope"></i> Contact for Consulting
              </a>
            </div>
          </div>

          <!-- Research Library Section -->
          <div class="dashboard-section">
            <h3><i class="fas fa-book-open"></i> My Research Library</h3>
            <div class="library-tools" style="margin-bottom: 1rem; display: flex; gap: 1rem; flex-wrap: wrap;">
              <button onclick="openModal('addResourceModal')" style="background: var(--success-color); color: white; border: none; padding: 0.5rem 1rem; border-radius: 8px; cursor: pointer;">
                <i class="fas fa-plus"></i> Add Resource
              </button>
              <button onclick="exportBibliography()" style="background: var(--secondary-color); color: white; border: none; padding: 0.5rem 1rem; border-radius: 8px; cursor: pointer;">
                <i class="fas fa-download"></i> Export Bibliography
              </button>
              <select id="libraryFilter" onchange="filterLibrary()" style="padding: 0.5rem; border: 2px solid rgba(255,255,255,0.3); border-radius: 8px; background: rgba(255,255,255,0.1); color: white;">
                <option value="all">All Topics</option>
                <option value="development">Development</option>
                <option value="economics">Economics</option>
                <option value="gender">Gender Studies</option>
                <option value="data">Data Analysis</option>
                <option value="research">Research Methods</option>
                <option value="policy">Policy</option>
                <option value="climate">Climate</option>
                <option value="health">Health</option>
              </select>
            </div>
            <div id="researchLibraryList" style="background: rgba(255,255,255,0.1); border-radius: 8px; padding: 1rem; max-height: 300px; overflow-y: auto;">
              <p style="opacity: 0.8; font-style: italic; text-align: center;">No resources added yet. Start building your research library!</p>
            </div>
            <div style="margin-top: 1rem; font-size: 0.85rem; color: rgba(255,255,255,0.7);">
              <i class="fas fa-info-circle"></i> Tip: Add papers, reports, and articles with automatic citation formatting. Perfect for literature reviews!
            </div>
          </div>

          <!-- Academic Achievements Section -->
          <div class="dashboard-section">
            <h3><i class="fas fa-trophy"></i> Academic Achievements</h3>
            <div class="achievements-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem;">
              <div class="achievement-badge" data-achievement="first-course" style="text-align: center; padding: 1rem; background: rgba(255,255,255,0.1); border-radius: 8px; opacity: 0.5;">
                <i class="fas fa-play-circle" style="font-size: 2rem; color: var(--success-color);"></i>
                <h5>First Course</h5>
                <small>Start your first course</small>
              </div>
              <div class="achievement-badge" data-achievement="note-taker" style="text-align: center; padding: 1rem; background: rgba(255,255,255,0.1); border-radius: 8px; opacity: 0.5;">
                <i class="fas fa-sticky-note" style="font-size: 2rem; color: var(--warning-color);"></i>
                <h5>Note Taker</h5>
                <small>Save 10 pages of notes</small>
              </div>
              <div class="achievement-badge" data-achievement="researcher" style="text-align: center; padding: 1rem; background: rgba(255,255,255,0.1); border-radius: 8px; opacity: 0.5;">
                <i class="fas fa-microscope" style="font-size: 2rem; color: var(--info-color);"></i>
                <h5>Researcher</h5>
                <small>Add 5 library resources</small>
              </div>
              <div class="achievement-badge" data-achievement="completionist" style="text-align: center; padding: 1rem; background: rgba(255,255,255,0.1); border-radius: 8px; opacity: 0.5;">
                <i class="fas fa-graduation-cap" style="font-size: 2rem; color: var(--accent-color);"></i>
                <h5>Completionist</h5>
                <small>Complete 5 courses</small>
              </div>
            </div>
          </div>

          <!-- Personalized Learning Section -->
          <div class="dashboard-section">
            <h3><i class="fas fa-route"></i> Personalized Learning Path</h3>
            <div id="learningPathSection">
              <div id="quizPrompt" style="text-align: center; padding: 2rem;">
                <p style="margin-bottom: 1rem;">Take our quick assessment to get personalized course recommendations!</p>
                <button onclick="startLearningQuiz()" style="background: var(--secondary-color); color: white; border: none; padding: 1rem 2rem; border-radius: 8px; font-size: 1.1rem; cursor: pointer;">
                  <i class="fas fa-play-circle"></i> Start Learning Assessment
                </button>
              </div>
              <div id="personalizedPath" style="display: none;">
                <h4>Your Recommended Learning Path: <span id="recommendedPath"></span></h4>
                <div id="pathCourses" style="margin-top: 1rem;"></div>
                <button onclick="startLearningQuiz()" style="background: var(--info-color); color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; margin-top: 1rem; cursor: pointer;">
                  <i class="fas fa-redo"></i> Retake Assessment
                </button>
              </div>
            </div>
          </div>: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem;">
              <div class="achievement-badge" data-achievement="first-course" style="text-align: center; padding: 1rem; background: rgba(255,255,255,0.1); border-radius: 8px; opacity: 0.5;">
                <i class="fas fa-play-circle" style="font-size: 2rem; color: var(--success-color);"></i>
                <h5>First Course</h5>
                <small>Start your first course</small>
              </div>
              <div class="achievement-badge" data-achievement="note-taker" style="text-align: center; padding: 1rem; background: rgba(255,255,255,0.1); border-radius: 8px; opacity: 0.5;">
                <i class="fas fa-sticky-note" style="font-size: 2rem; color: var(--warning-color);"></i>
                <h5>Note Taker</h5>
                <small>Save 10 pages of notes</small>
              </div>
              <div class="achievement-badge" data-achievement="researcher" style="text-align: center; padding: 1rem; background: rgba(255,255,255,0.1); border-radius: 8px; opacity: 0.5;">
                <i class="fas fa-microscope" style="font-size: 2rem; color: var(--info-color);"></i>
                <h5>Researcher</h5>
                <small>Add 5 library resources</small>
              </div>
              <div class="achievement-badge" data-achievement="completionist" style="text-align: center; padding: 1rem; background: rgba(255,255,255,0.1); border-radius: 8px; opacity: 0.5;">
                <i class="fas fa-graduation-cap" style="font-size: 2rem; color: var(--accent-color);"></i>
                <h5>Completionist</h5>
                <small>Complete 5 courses</small>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Latest Additions Box -->
      <div class="latest-additions">
        <h3>Latest Additions</h3>
        <ul>
          <li><a href="https://github.com/Varnasr/ImpactMojo/blob/main/extras/handouts/qualitative_research_handout.html" target="_blank" style="color: var(--secondary-color); text-decoration: none;">Qualitative Research Ethics Handout</a> <span class="date">• Added May 2025</span></li>
          <li><a href="https://github.com/Varnasr/ImpactMojo/blob/main/extras/handouts/eda_survey_handout_1.html" target="_blank" style="color: var(--secondary-color); text-decoration: none;">EDA for Survey Data Workshop Module</a> <span class="date">• Added May 2025</span></li>
          <li><a href="https://github.com/Varnasr/ImpactMojo/blob/main/extras/handouts/data_feminism_handout.html" target="_blank" style="color: var(--secondary-color); text-decoration: none;">Data Feminism Teaching Guide</a> <span class="date">• Added April 2025</span></li>
          <li><a href="https://github.com/Varnasr/ImpactMojo/blob/main/extras/handouts/decent_work_handout.html" target="_blank" style="color: var(--secondary-color); text-decoration: none;">Decent Work Framework Handout</a> <span class="date">• Added April 2025</span></li>
        </ul>
      </div>

      <!-- Learning Paths -->
      <div class="learning-paths">
        <h3><i class="fas fa-route"></i> Recommended Learning Paths</h3>
        <div class="paths-grid">
          <div class="path-card" onclick="applyLearningPath('data-analysis')">
            <h4>Data Analysis Track</h4>
            <p class="path-description">Master data skills from basics to advanced analysis</p>
            <div class="path-courses">
              <span class="path-course-tag">Data Literacy 101</span>
              <span class="path-course-tag">EDA for Survey Data</span>
              <span class="path-course-tag">Bivariate Analysis</span>
              <span class="path-course-tag">Multivariate Analysis</span>
            </div>
          </div>
          
          <div class="path-card" onclick="applyLearningPath('gender-studies')">
            <h4>Gender Studies Track</h4>
            <p class="path-description">Comprehensive understanding of gender in development</p>
            <div class="path-courses">
              <span class="path-course-tag">Gender Studies 101</span>
              <span class="path-course-tag">Data Feminism 101</span>
              <span class="path-course-tag">Care Economy</span>
              <span class="path-course-tag">Women's Economic Empowerment</span>
            </div>
          </div>

          <div class="path-card" onclick="applyLearningPath('policy-economics')">
            <h4>Policy & Economics Track</h4>
            <p class="path-description">From basic economics to policy analysis</p>
            <div class="path-courses">
              <span class="path-course-tag">Development Economics 101</span>
              <span class="path-course-tag">Political Economy 101</span>
              <span class="path-course-tag">Poverty and Inequality</span>
              <span class="path-course-tag">Social Safety Nets 101</span>
            </div>
          </div>

          <div class="path-card" onclick="applyLearningPath('research-methods')">
            <h4>Research Methods Track</h4>
            <p class="path-description">Complete research toolkit for development work</p>
            <div class="path-courses">
              <span class="path-course-tag">Research Ethics 101</span>
              <span class="path-course-tag">Qualitative Research 101</span>
              <span class="path-course-tag">Econometrics 101</span>
              <span class="path-course-tag">MEL 101</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Popular Courses -->
      <div class="popular-courses">
        <h3>Most Popular Courses</h3>
        <div class="popular-list">
          <div class="popular-item">
            <div class="popular-rank">1</div>
            <div>
              <strong><a href="https://101.www.impactmojo.in/DataFeminism" target="_blank" style="color: var(--secondary-color); text-decoration: none;">Data Feminism 101</a></strong><br>
              <small style="font-style: italic;">"This course completely changed how I approach data analysis - now I see the power structures behind every dataset."</small>
            </div>
          </div>
          <div class="popular-item">
            <div class="popular-rank">2</div>
            <div>
              <strong><a href="https://101.www.impactmojo.in/SocialSafety" target="_blank" style="color: var(--secondary-color); text-decoration: none;">Social Safety Nets 101</a></strong><br>
              <small style="font-style: italic;">"Essential for understanding India's welfare system - the examples made complex policies crystal clear."</small>
            </div>
          </div>
          <div class="popular-item">
            <div class="popular-rank">3</div>
            <div>
              <strong><a href="https://101.www.impactmojo.in/DevEcon" target="_blank" style="color: var(--secondary-color); text-decoration: none;">Development Economics 101</a></strong><br>
              <small style="font-style: italic;">"Finally, development economics explained with real Indian examples that actually make sense."</small>
            </div>
          </div>
          <div class="popular-item">
            <div class="popular-rank">4</div>
            <div>
              <strong><a href="https://101.www.impactmojo.in/DataLit" target="_blank" style="color: var(--secondary-color); text-decoration: none;">Data Literacy 101</a></strong><br>
              <small style="font-style: italic;">"Perfect starting point for anyone working with data in development - practical and immediately useful."</small>
            </div>
          </div>
        </div>
      </div>

      <!-- Search and Filters -->
      <div class="search-section" id="courses">
        <div class="search-container">
          <i class="fas fa-search search-icon" aria-hidden="true"></i>
          <input type="text" class="search-input" id="searchInput" placeholder="Search courses by title, description, or keywords..." aria-label="Search courses">
        </div>

        <div class="filters">
          <div class="filter-group">
            <label for="topicFilter">Filter by Topic:</label>
            <select id="topicFilter" class="filter-select" onchange="filterCourses()">
              <option value="all">All Topics</option>
              <option value="climate">Climate</option>
              <option value="data">Data</option>
              <option value="economics">Economics</option>
              <option value="education">Education</option>
              <option value="gender">Gender</option>
              <option value="health">Health</option>
              <option value="identity">Identity</option>
              <option value="justice">Justice</option>
              <option value="livelihoods">Livelihoods</option>
              <option value="media">Media</option>
              <option value="research">Research</option>
              <option value="systems">Systems</option>
              <option value="development">Development</option>
            </select>
          </div>

          <div class="filter-group">
            <label for="levelFilter">Difficulty Level:</label>
            <select id="levelFilter" class="filter-select" onchange="filterCourses()">
              <option value="all">All Levels</option>
              <option value="beginner">Beginner</option>
              <option value="intermediate">Intermediate</option>
              <option value="advanced">Advanced</option>
            </select>
          </div>

          <div class="filter-group">
            <label for="durationFilter">Duration:</label>
            <select id="durationFilter" class="filter-select" onchange="filterCourses()">
              <option value="all">Any Duration</option>
              <option value="short">Short (1-2 hours)</option>
              <option value="medium">Medium (3-4 hours)</option>
              <option value="long">Long (4+ hours)</option>
            </select>
          </div>

          <div class="filter-group">
            <button class="clear-filters" onclick="clearAllFilters()">Clear Filters</button>
          </div>
        </div>
      </div>

      <!-- Stats Bar with Course Count and Comparison -->
      <div class="stats-bar">
        <div class="course-count" id="courseCount" role="status" aria-live="polite">
          Showing <span id="visibleCount">33</span> of <span id="totalCount">33</span> courses
        </div>
        <div class="comparison-tools">
          <div class="view-toggle" role="group" aria-label="View options">
            <button class="view-btn active" onclick="toggleView('grid')" title="Grid view" aria-label="Switch to grid view" aria-pressed="true">
              <i class="fas fa-th" aria-hidden="true"></i>
            </button>
            <button class="view-btn" onclick="toggleView('list')" title="List view" aria-label="Switch to list view" aria-pressed="false">
              <i class="fas fa-list" aria-hidden="true"></i>
            </button>
          </div>
          <button class="compare-btn" id="compareBtn" onclick="openModal('comparisonModal')">
            <i class="fas fa-balance-scale"></i> Compare Selected (<span id="compareCount">0</span>)
          </button>
          <button class="secondary-btn" onclick="window.print()">
            <i class="fas fa-print"></i> Print
          </button>
        </div>
      </div>

      <!-- Course Grid -->
      <div class="courses-grid" id="courseContainer">
        <!-- Course cards will be generated by JavaScript -->
      </div>

      <!-- No Results -->
      <div class="no-results hidden" id="noResults">
        <i class="fas fa-search"></i>
        <h3>No courses found</h3>
        <p>Try adjusting your search terms or filters to find what you're looking for.</p>
      </div>

      <!-- Upcoming Courses Section -->
      <div class="upcoming-courses" style="background: var(--card-bg); border-radius: var(--border-radius); padding: 2rem; margin: 3rem 0; box-shadow: var(--shadow); border: 1px solid var(--border-color);">
        <div class="section-header" style="text-align: center; margin-bottom: 2rem;">
          <div class="section-icon" style="font-size: 2rem; color: var(--info-color); margin-bottom: 0.5rem;"><i class="fas fa-rocket"></i></div>
          <h2 style="color: var(--text-primary); font-family: 'Inter', sans-serif; font-size: 2rem; margin: 0;">Upcoming Courses</h2>
        </div>
        
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
          <div style="background: var(--light-bg); border: 1px solid var(--border-color); border-radius: var(--border-radius); padding: 1.5rem; position: relative;">
            <div style="position: absolute; top: 1rem; right: 1rem; background: var(--info-color); color: white; padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.8rem; font-weight: 600;">Coming Soon</div>
            <h4 style="color: var(--text-primary); margin: 0 0 1rem 0; font-size: 1.2rem;">Technology for All (TAL) 101</h4>
            <p style="color: var(--text-secondary); margin: 0; line-height: 1.6;">Online technology classes providing basic domain knowledge of 10 future technologies: IoT, AI, Robotics, Blockchain, Cryptocurrency, Cybercrime, Digital Transformation, Telehealth, Edutech & Metaworld. Designed for all who use computers, phones and internet, including non-engineers. Teaching in simple, jargon-free language.</p>
            <div style="margin-top: 1rem; display: flex; gap: 0.5rem; flex-wrap: wrap;">
              <span style="background: var(--light-bg); color: var(--text-secondary); padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.8rem; border: 1px solid var(--border-color);">technology</span>
              <span style="background: var(--light-bg); color: var(--text-secondary); padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.8rem; border: 1px solid var(--border-color);">literacy</span>
              <span style="background: var(--light-bg); color: var(--text-secondary); padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.8rem; border: 1px solid var(--border-color);">beginner</span>
            </div>
          </div>
          
          <div style="background: var(--light-bg); border: 1px solid var(--border-color); border-radius: var(--border-radius); padding: 1.5rem; position: relative;">
            <div style="position: absolute; top: 1rem; right: 1rem; background: var(--info-color); color: white; padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.8rem; font-weight: 600;">Coming Soon</div>
            <h4 style="color: var(--text-primary); margin: 0 0 1rem 0; font-size: 1.2rem;">English for Development Practitioners 101</h4>
            <p style="color: var(--text-secondary); margin: 0; line-height: 1.6;">Professional English communication skills for development professionals working in multilingual South Asian contexts. Covers report writing, proposal development, and cross-cultural communication.</p>
            <div style="margin-top: 1rem; display: flex; gap: 0.5rem; flex-wrap: wrap;">
              <span style="background: var(--light-bg); color: var(--text-secondary); padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.8rem; border: 1px solid var(--border-color);">communication</span>
              <span style="background: var(--light-bg); color: var(--text-secondary); padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.8rem; border: 1px solid var(--border-color);">professional</span>
              <span style="background: var(--light-bg); color: var(--text-secondary); padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.8rem; border: 1px solid var(--border-color);">beginner</span>
            </div>
          </div>
        </div>
        
        <div style="text-align: center; margin-top: 2rem; padding: 1.5rem; background: rgba(142, 68, 173, 0.1); border-radius: var(--border-radius); border: 1px solid rgba(142, 68, 173, 0.2);">
          <p style="margin: 0; color: var(--text-secondary); font-size: 1rem;">Have suggestions for future courses? <a href="mailto:suggestions@impactmojo.in" style="color: var(--info-color); text-decoration: none; font-weight: 500;">Let us know!</a></p>
        </div>
      </div>

      <!-- Wall of Love Section -->
      <div class="wall-of-love" id="wall-of-love">
        <div class="section-header">
          <div class="section-icon"><i class="fas fa-heart"></i></div>
          <h2>Wall of Love</h2>
        </div>
        
        <p style="text-align: center; font-size: 1.1rem; color: var(--text-secondary); margin-bottom: 2rem;">
          Hear from educators, researchers, and practitioners who are using ImpactMojo to advance justice and equity in development practice.
        </p>

        <div class="testimonial-stats">
          <div class="stats-row">
            <div class="stat-item">
              <span class="stat-number">25,000+</span>
              <span class="stat-label">Learners</span>
            </div>
            <div class="stat-item">
              <span class="stat-number">150+</span>
              <span class="stat-label">Organizations</span>
            </div>
            <div class="stat-item">
              <span class="stat-number">33</span>
              <span class="stat-label">Knowledge Decks</span>
            </div>
            <div class="stat-item">
              <span class="stat-number">4.7★</span>
              <span class="stat-label">Average Rating</span>
            </div>
          </div>
        </div>

        <div class="testimonials-grid">
          <div class="testimonial">
            <div class="testimonial-text">
              ImpactMojo has revolutionized how I teach development economics. The South Asian context and real-world applications make complex concepts accessible to my students.
            </div>
            <div class="testimonial-author">
              <div class="author-avatar">A</div>
              <div class="author-info">
                <h5>Anonymous</h5>
                <p>Professor, Economics Department</p>
              </div>
            </div>
          </div>
          
          <div class="testimonial">
            <div class="testimonial-text">
              The data feminism course opened my eyes to new ways of thinking about our research. Now I question every dataset and methodology with a critical lens.
            </div>
            <div class="testimonial-author">
              <div class="author-avatar">B</div>
              <div class="author-info">
                <h5>Anonymous</h5>
                <p>Research Officer, International NGO</p>
              </div>
            </div>
          </div>
          
          <div class="testimonial">
            <div class="testimonial-text">
              These courses provide exactly what we need - theory grounded in practice with examples from our own context. My team uses them for professional development.
            </div>
            <div class="testimonial-author">
              <div class="author-avatar">C</div>
              <div class="author-info">
                <h5>Anonymous</h5>
                <p>Program Manager, Development Organization</p>
              </div>
            </div>
          </div>
          
          <div class="testimonial">
            <div class="testimonial-text">
              The qualitative research methods have transformed how we conduct field studies. The ethical frameworks are particularly valuable for sensitive topics.
            </div>
            <div class="testimonial-author">
              <div class="author-avatar">D</div>
              <div class="author-info">
                <h5>Anonymous</h5>
                <p>Field Researcher</p>
              </div>
            </div>
          </div>

          <div class="testimonial">
            <div class="testimonial-text">
              Finally, educational resources that don't assume a Western context! The climate change course is particularly relevant for our policy work.
            </div>
            <div class="testimonial-author">
              <div class="author-avatar">E</div>
              <div class="author-info">
                <h5>Anonymous</h5>
                <p>Policy Analyst</p>
              </div>
            </div>
          </div>

          <div class="testimonial">
            <div class="testimonial-text">
              The MEL course has been invaluable for our organization. Clear frameworks, practical tools, and relevant examples from Indian development programs.
            </div>
            <div class="testimonial-author">
              <div class="author-avatar">F</div>
              <div class="author-info">
                <h5>Anonymous</h5>
                <p>M&E Specialist</p>
              </div>
            </div>
          </div>
        </div>

        <div style="text-align: center; margin-top: 2rem; padding: 2rem; background: var(--light-bg); border-radius: var(--border-radius);">
          <p style="margin-bottom: 1rem; color: var(--text-secondary);">Have you used ImpactMojo in your work or teaching? We'd love to feature your story!</p>
          <a href="mailto:testimonials@impactmojo.in" style="background: var(--secondary-color); color: white; padding: 0.75rem 2rem; border-radius: var(--border-radius); text-decoration: none; font-weight: 500; transition: var(--transition);">Submit Your Testimonial</a>
        </div>
      </div>

      <!-- Enhanced Social Sharing -->
      <div style="text-align: center; margin: 3rem 0;">
        <p style="margin-bottom: 1.5rem; color: var(--text-secondary); font-size: 1.1rem;">Share ImpactMojo with your network:</p>
        <div class="social-share">
          <a href="https://twitter.com/intent/tweet?text=Check%20out%20ImpactMojo%20-%20Free%20development%20education%20courses%20for%20South%20Asia&url=https://www.impactmojo.in" target="_blank" class="share-btn twitter" title="Share on Twitter" aria-label="Share ImpactMojo on Twitter">
            <i class="fab fa-twitter"></i>
          </a>
          <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://www.impactmojo.in" target="_blank" class="share-btn linkedin" title="Share on LinkedIn" aria-label="Share ImpactMojo on LinkedIn">
            <i class="fab fa-linkedin"></i>
          </a>
          <a href="https://wa.me/?text=Check%20out%20ImpactMojo%20-%20Free%20development%20education%20courses%20for%20South%20Asia%20https://www.impactmojo.in" target="_blank" class="share-btn whatsapp" title="Share on WhatsApp" aria-label="Share ImpactMojo on WhatsApp">
            <i class="fab fa-whatsapp"></i>
          </a>
          <a href="mailto:?subject=ImpactMojo%20-%20Development%20Education&body=I%20thought%20you%20might%20be%20interested%20in%20this%20free%20resource%20for%20development%20education:%20https://www.impactmojo.in" class="share-btn email" title="Share via Email" aria-label="Share ImpactMojo via Email">
            <i class="fas fa-envelope"></i>
          </a>
        </div>
      </div>

      <!-- Enhanced EXTRAS Section -->
      <div class="section-header" id="extras">
        <div class="section-icon"><i class="fas fa-plus"></i></div>
        <h2 style="font-family: 'Inter', sans-serif; font-weight: 600;">EXTRAS & RESOURCES</h2>
      </div>
      
      <div class="extras">
        <p>
          <strong><a href="https://github.com/Varnasr/ImpactMojo/tree/main/extras" target="_blank">Comprehensive Development Education Toolkit</a></strong><br>
          An extensive collection of ready-to-use educational materials, practical research tools, and implementation resources supporting development education and practice across South Asian contexts. Features over 20 workshop handouts covering topics from Digital Development Ethics to Statistical Analysis, plus research design templates, data analysis scripts, and assessment frameworks designed for immediate classroom and professional use.
        </p>
        
        <div class="extras-grid">
          <div class="extras-card" data-extra-type="handouts">
            <h4><i class="fas fa-chalkboard-teacher"></i> <a href="https://github.com/Varnasr/ImpactMojo/tree/main/extras/handouts" target="_blank">Educational Handouts</a></h4>
            <p>Over 20 ready-to-use workshop modules covering Digital Development Ethics, Data Feminism, EDA for Survey Data, Decent Work frameworks, Qualitative Research methods, and South Asian Development Applications. Each designed for 75-90 minute classroom sessions with complete facilitator guides.</p>
            <div style="margin-top: 1rem; font-size: 0.85rem; color: var(--text-secondary);">
              <strong>Related to:</strong> Education & Pedagogy, Digital Development Ethics, Data Analysis, Gender Studies, Research Methods courses
            </div>
          </div>
          
          <div class="extras-card" data-extra-type="research">
            <h4><i class="fas fa-flask"></i> <a href="https://github.com/Varnasr/ImpactMojo/tree/main/extras/research-design" target="_blank">Research Design Resources</a></h4>
            <p>Practical tools for conducting rigorous development research, including design standards checklists, ethical guidelines, specialized papers like "Understanding Attributable Risk", and methodological frameworks for field studies in South Asian contexts.</p>
            <div style="margin-top: 1rem; font-size: 0.85rem; color: var(--text-secondary);">
              <strong>Related to:</strong> Research Ethics, Qualitative Research, MEL, Econometrics courses
            </div>
          </div>
          
          <div class="extras-card" data-extra-type="data">
            <h4><i class="fas fa-code"></i> <a href="https://github.com/Varnasr/ImpactMojo/tree/main/extras/data-analysis" target="_blank">Data Analysis Toolkit</a></h4>
            <p>Comprehensive technical resources including R and Python analysis scripts, Excel templates for survey data cleaning, code samples for bivariate and multivariate analysis, and qualitative data analysis tools with examples from Indian datasets.</p>
            <div style="margin-top: 1rem; font-size: 0.85rem; color: var(--text-secondary);">
              <strong>Related to:</strong> Data Literacy, EDA, Bivariate Analysis, Multivariate Analysis, Econometrics courses
            </div>
          </div>
        </div>
        
        <div style="margin-top: 2rem; padding: 1.5rem; background: var(--light-bg); border-radius: var(--border-radius); border: 1px solid var(--border-color);">
          <h4><i class="fas fa-info-circle"></i> How to Use These Resources</h4>
          <div style="margin-top: 1rem;">
            <p><strong>Print to PDF Instructions:</strong> Click any HTML file to view directly in your browser. Use your browser's print function (Ctrl+P or Cmd+P) and select "Save as PDF" for clean, formatted materials. For the best free PDF printer, we recommend <a href="https://www.pdfforge.org/pdfcreator" target="_blank" style="color: var(--secondary-color); text-decoration: none; font-weight: 500;">PDFCreator</a> (free download) or your browser's built-in "Save as PDF" option which works on Chrome, Firefox, Safari, and Edge.</p>
          </div>
        </div>
      </div>

      <!-- Newsletter Signup -->
      <div class="newsletter">
        <h3>Stay Updated</h3>
        <p>Get notified when new courses are added to the ImpactMojo library</p>
        <form class="newsletter-form" action="https://formspree.io/f/xpwdvgzp" method="POST">
          <input type="email" name="email" placeholder="Enter your email" required>
          <button type="submit">Subscribe</button>
        </form>
        <p style="font-size: 0.85rem; opacity: 0.8; margin-top: 1rem;">No spam, just course updates. Unsubscribe anytime.</p>
      </div>

      <!-- About the Author Section -->
      <section class="author" aria-labelledby="author-heading">
        <img src="assets/images/varna-photo.jpg" alt="Portrait of Dr. Varna Sri Raman, founder of ImpactMojo" class="author-photo" loading="lazy">
        <div class="author-content">
          <h3 id="author-heading">About Dr. Varna Sri Raman</h3>
          <p>Dr. Varna Sri Raman is a development economist, educator, and social researcher with two decades of experience across education, livelihoods, gender, climate, health, and other public systems in South Asia. She is the founder and chief curator of OpenStacks — an open knowledge ecosystem for the development sector.</p>
          
          <a href="mailto:varna.sr@gmail.com?subject=Coaching%20Request&body=Hi%20Varna,%0D%0A%0D%0AI'm%20interested%20in%20learning%20more%20about%20your%20coaching%20services.%0D%0A%0D%0APlease%20let%20me%20know%20your%20availability%20and%20rates.%0D%0A%0D%0AThank%20you!" class="coaching-cta">
            <i class="fas fa-calendar-alt" aria-hidden="true"></i> Book Coaching Session
          </a>
          
          <div class="author-links">
            <a href="https://www.threads.net/@varnasriraman" target="_blank" rel="noopener" title="Follow Dr. Varna on Threads">
              <i class="fab fa-threads" aria-hidden="true"></i> Threads
            </a>
            <a href="https://www.linkedin.com/in/varna" target="_blank" rel="noopener" title="Connect with Dr. Varna on LinkedIn">
              <i class="fab fa-linkedin" aria-hidden="true"></i> LinkedIn
            </a>
            <a href="https://vfolio.notion.site/" target="_blank" rel="noopener" title="View Dr. Varna's Portfolio">
              <i class="fas fa-briefcase" aria-hidden="true"></i> Portfolio
            </a>
            <a href="https://github.com/Varnasr/ImpactMojo" target="_blank" rel="noopener" title="View ImpactMojo on GitHub">
              <i class="fab fa-github" aria-hidden="true"></i> GitHub
            </a>
          </div>
        </div>
      </section>
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer" role="contentinfo">
    <div class="footer-content">
      <div class="footer-links">
        <a href="#courses">Browse Courses</a>
        <a href="#wall-of-love">Wall of Love</a>
        <a href="#extras">Resources</a>
        <a href="https://github.com/Varnasr/ImpactMojo" target="_blank">GitHub</a>
        <a href="mailto:contact@impactmojo.in">Contact</a>
        <a href="/terms-of-use">Terms of Use</a>
        <a href="/privacy-policy">Privacy Policy</a>
        <a href="/cookie-policy">Cookie Policy</a>
        <a href="/accessibility">Accessibility</a>
      </div>
      
      <div class="disclaimer">
        <h4>
          <i class="fas fa-info-circle" style="color: var(--secondary-color);"></i> 
          Important Disclaimer
        </h4>
        
        <div style="display: grid; gap: 1rem; font-size: 0.95rem; line-height: 1.6;">
          <p style="margin: 0; display: flex; align-items: flex-start; gap: 0.75rem;">
            <i class="fas fa-gift" style="color: var(--success-color); margin-top: 0.2rem; flex-shrink: 0;"></i>
            <span><strong>Free Resource:</strong> ImpactMojo is provided completely free of charge. While we make our best effort to keep content updated and error-free, we cannot guarantee accuracy or completeness of information.</span>
          </p>
          
          <p style="margin: 0; display: flex; align-items: flex-start; gap: 0.75rem;">
            <i class="fas fa-certificate" style="color: var(--warning-color); margin-top: 0.2rem; flex-shrink: 0;"></i>
            <span><strong>No Certification:</strong> These courses do not provide any formal certification, accreditation, or professional credentials.</span>
          </p>
          
          <p style="margin: 0; display: flex; align-items: flex-start; gap: 0.75rem;">
            <i class="fas fa-heart" style="color: var(--accent-color); margin-top: 0.2rem; flex-shrink: 0;"></i>
            <span><strong>Labour of Love:</strong> This project is made possible through the generous support of <a href="https://www.pinpointventures.in" target="_blank" style="color: var(--secondary-color); text-decoration: none; font-weight: 500;">Pinpoint Ventures</a>.</span>
          </p>
          
          <p style="margin: 0; display: flex; align-items: flex-start; gap: 0.75rem;">
            <i class="fas fa-hands-helping" style="color: var(--info-color); margin-top: 0.2rem; flex-shrink: 0;"></i>
            <span><strong>Support This Work:</strong> Contributions towards server and research costs are deeply appreciated via UPI at <code style="background: var(--light-bg); padding: 0.2rem 0.5rem; border-radius: 4px; font-weight: 600; color: var(--secondary-color);">9871777110@mbk</code>. Supporters will be acknowledged on this page with gratitude.</span>
          </p>
        </div>
      </div>
      
      <!-- Standard Footer -->
      <div style="margin-bottom: 2rem;">
        <p>Licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" style="color: white;">CC BY-NC-SA 4.0</a>. Free to use with attribution, for non-commercial purposes.</p>
        <p>Contact: <a href="mailto:varna.sr@gmail.com" style="color: white;">varna.sr@gmail.com</a> • <a href="https://www.impactmojo.in" style="color: white;">www.impactmojo.in</a></p>
        <p>This repository is part of <a href="https://openstacks.dev" target="_blank" style="color: white;">OpenStacks</a>, a collective initiative to build reusable learning tools for the social sector.</p>
        <p><a href="https://github.com/Varnasr/ImpactMojo" style="color: white;">View on GitHub</a></p>
      </div>
      
      <div style="text-align: center; padding-top: 2rem; border-top: 1px solid rgba(255,255,255,0.1);">
        <p><strong>© 2025 ImpactMojo</strong></p>
        <p>Created by <strong>Dr. Varna Sri Raman</strong></p>
      </div>
    </div>
  </footer>

  <!-- Enhanced Modals -->
  <!-- Feedback Modal -->
  <div id="feedbackModal" class="modal" role="dialog" aria-labelledby="feedback-title" aria-hidden="true">
    <div class="modal-content" role="document">
      <span class="close" onclick="closeModal('feedbackModal')" aria-label="Close feedback form">&times;</span>
      <h2 id="feedback-title">Share Your Feedback</h2>
      <form action="https://formspree.io/f/xpwdvgzp" method="POST">
        <div class="form-group">
          <label for="feedbackName">Your Name <span aria-label="required">*</span></label>
          <input type="text" id="feedbackName" name="name" required>
        </div>
        <div class="form-group">
          <label for="feedbackEmail">Email:</label>
          <input type="email" id="feedbackEmail" name="email">
        </div>
        <div class="form-group">
          <label for="feedbackMessage">Your Feedback:</label>
          <textarea id="feedbackMessage" name="message" required></textarea>
        </div>
        <input type="hidden" name="_subject" value="ImpactMojo Feedback">
        <button type="submit" class="submit-btn">Send Feedback</button>
      </form>
    </div>
  </div>

  <!-- Suggest Course Modal -->
  <div id="suggestModal" class="modal" role="dialog" aria-labelledby="suggest-title" aria-hidden="true">
    <div class="modal-content" role="document">
      <span class="close" onclick="closeModal('suggestModal')" aria-label="Close suggestion form">&times;</span>
      <h2 id="suggest-title">Suggest a New Course</h2>
      <form action="https://formspree.io/f/xpwdvgzp" method="POST">
        <div class="form-group">
          <label for="suggestName">Your Name:</label>
          <input type="text" id="suggestName" name="name">
        </div>
        <div class="form-group">
          <label for="suggestEmail">Email:</label>
          <input type="email" id="suggestEmail" name="email">
        </div>
        <div class="form-group">
          <label for="courseTitle">Suggested Course Title:</label>
          <input type="text" id="courseTitle" name="course_title" required>
        </div>
        <div class="form-group">
          <label for="courseDescription">Why would this course be valuable?</label>
          <textarea id="courseDescription" name="course_description" required></textarea>
        </div>
        <input type="hidden" name="_subject" value="ImpactMojo Course Suggestion">
        <button type="submit" class="submit-btn">Send Suggestion</button>
      </form>
    </div>
  </div>

  <!-- Question Modal -->
  <div id="questionModal" class="modal" role="dialog" aria-labelledby="question-title" aria-hidden="true">
    <div class="modal-content" role="document">
      <span class="close" onclick="closeModal('questionModal')" aria-label="Close question form">&times;</span>
      <h2 id="question-title">Ask a Question</h2>
      <form action="https://formspree.io/f/xpwdvgzp" method="POST">
        <div class="form-group">
          <label for="questionName">Your Name:</label>
          <input type="text" id="questionName" name="name">
        </div>
        <div class="form-group">
          <label for="questionEmail">Email:</label>
          <input type="email" id="questionEmail" name="email">
        </div>
        <div class="form-group">
          <label for="questionMessage">Your Question:</label>
          <textarea id="questionMessage" name="message" required></textarea>
        </div>
        <input type="hidden" name="_subject" value="ImpactMojo Question">
        <button type="submit" class="submit-btn">Send Question</button>
      </form>
    </div>
  </div>

  <!-- Login Modal -->
  <div id="loginModal" class="modal" role="dialog" aria-labelledby="login-title" aria-hidden="true">
    <div class="modal-content" role="document">
      <span class="close" onclick="closeModal('loginModal')" aria-label="Close login form">&times;</span>
      <h2 id="login-title">Login to ImpactMojo</h2>
      <form id="loginForm" onsubmit="handleLogin(event)">
        <div class="form-group">
          <label for="loginEmail">Email Address <span aria-label="required">*</span></label>
          <input type="email" id="loginEmail" name="email" required>
        </div>
        <div class="form-group">
          <label for="loginPassword">Password <span aria-label="required">*</span></label>
          <input type="password" id="loginPassword" name="password" required>
        </div>
        <button type="submit" class="submit-btn">Login</button>
        <div style="text-align: center; margin-top: 1rem;">
          <button type="button" onclick="loginWithGoogle()" class="submit-btn" style="background: #db4437; width: 100%; margin-top: 0.5rem;">
            <i class="fab fa-google"></i> Login with Google
          </button>
        </div>
        <div style="text-align: center; margin-top: 1rem;">
          <a href="#" onclick="closeModal('loginModal'); openModal('signupModal')" style="color: var(--secondary-color);">Don't have an account? Sign up</a><br>
          <a href="#" onclick="handleForgotPassword()" style="color: var(--secondary-color); font-size: 0.9rem;">Forgot your password?</a>
        </div>
      </form>
    </div>
  </div>

  <!-- Signup Modal -->
  <div id="signupModal" class="modal" role="dialog" aria-labelledby="signup-title" aria-hidden="true">
    <div class="modal-content" role="document">
      <span class="close" onclick="closeModal('signupModal')" aria-label="Close signup form">&times;</span>
      <h2 id="signup-title">Join ImpactMojo</h2>
      <form id="signupForm" onsubmit="handleSignup(event)">
        <div class="form-group">
          <label for="signupName">Full Name <span aria-label="required">*</span></label>
          <input type="text" id="signupName" name="name" required>
        </div>
        <div class="form-group">
          <label for="signupEmail">Email Address <span aria-label="required">*</span></label>
          <input type="email" id="signupEmail" name="email" required>
        </div>
        <div class="form-group">
          <label for="signupPassword">Password <span aria-label="required">*</span></label>
          <input type="password" id="signupPassword" name="password" required minlength="6">
          <small style="color: var(--text-secondary);">Minimum 6 characters</small>
        </div>
        <div class="form-group">
          <label for="signupPasswordConfirm">Confirm Password <span aria-label="required">*</span></label>
          <input type="password" id="signupPasswordConfirm" name="passwordConfirm" required>
        </div>
        <button type="submit" class="submit-btn">Create Account</button>
        <div style="text-align: center; margin-top: 1rem;">
          <button type="button" onclick="loginWithGoogle()" class="submit-btn" style="background: #db4437; width: 100%; margin-top: 0.5rem;">
            <i class="fab fa-google"></i> Sign up with Google
          </button>
        </div>
        <div style="text-align: center; margin-top: 1rem;">
          <a href="#" onclick="closeModal('signupModal'); openModal('loginModal')" style="color: var(--secondary-color);">Already have an account? Login</a>
        </div>
      </form>
    </div>
  </div>

  <!-- Learning Path Quiz Modal -->
  <div id="learningQuizModal" class="modal">
    <div class="modal-content large">
      <span class="close" onclick="closeModal('learningQuizModal')">&times;</span>
      <h2><i class="fas fa-brain"></i> Learning Path Assessment</h2>
      <div id="quizContent">
        <div id="question1" class="quiz-question">
          <h3>1. What's your primary background?</h3>
          <div class="quiz-options">
            <label><input type="radio" name="background" value="economics"> Economics/Policy</label>
            <label><input type="radio" name="background" value="data"> Data/Analytics</label>
            <label><input type="radio" name="background" value="gender"> Gender Studies/Social Work</label>
            <label><input type="radio" name="background" value="research"> Research/Academia</label>
            <label><input type="radio" name="background" value="other"> Other/New to Development</label>
          </div>
        </div>
        
        <div id="question2" class="quiz-question" style="display: none;">
          <h3>2. What's your main goal with ImpactMojo?</h3>
          <div class="quiz-options">
            <label><input type="radio" name="goal" value="skills"> Build practical skills</label>
            <label><input type="radio" name="goal" value="career"> Advance my career</label>
            <label><input type="radio" name="goal" value="research"> Support my research</label>
            <label><input type="radio" name="goal" value="teaching"> Enhance my teaching</label>
            <label><input type="radio" name="goal" value="understanding"> Deepen my understanding</label>
          </div>
        </div>
        
        <div id="question3" class="quiz-question" style="display: none;">
          <h3>3. Which topics interest you most? (Select all that apply)</h3>
          <div class="quiz-options">
            <label><input type="checkbox" name="interests" value="data"> Data Analysis & Visualization</label>
            <label><input type="checkbox" name="interests" value="gender"> Gender & Social Justice</label>
            <label><input type="checkbox" name="interests" value="economics"> Economics & Policy</label>
            <label><input type="checkbox" name="interests" value="research"> Research Methods</label>
            <label><input type="checkbox" name="interests" value="climate"> Climate & Environment</label>
            <label><input type="checkbox" name="interests" value="health"> Health Systems</label>
          </div>
        </div>
        
        <div id="question4" class="quiz-question" style="display: none;">
          <h3>4. How much time can you dedicate to learning?</h3>
          <div class="quiz-options">
            <label><input type="radio" name="time" value="1-2"> 1-2 hours per week</label>
            <label><input type="radio" name="time" value="3-5"> 3-5 hours per week</label>
            <label><input type="radio" name="time" value="6-10"> 6-10 hours per week</label>
            <label><input type="radio" name="time" value="10+"> More than 10 hours per week</label>
          </div>
        </div>
        
        <div class="quiz-navigation">
          <button id="prevBtn" onclick="changeQuestion(-1)" style="display: none;">Previous</button>
          <button id="nextBtn" onclick="changeQuestion(1)">Next</button>
          <button id="submitQuiz" onclick="submitQuiz()" style="display: none;">Get My Learning Path</button>
        </div>
      </div>
      
      <div id="quizResults" style="display: none;">
        <h3>Your Personalized Learning Path</h3>
        <div id="pathRecommendation"></div>
        <button onclick="applyRecommendedPath()" style="background: var(--success-color); color: white; border: none; padding: 1rem 2rem; border-radius: 8px; margin-top: 1rem;">
          Apply This Path
        </button>
      </div>
    </div>
  </div>

  <!-- Notes Search Modal -->
  <div id="notesSearchModal" class="modal">
    <div class="modal-content large">
      <span class="close" onclick="closeModal('notesSearchModal')">&times;</span>
      <h2><i class="fas fa-search"></i> Search All Notes</h2>
      
      <div style="margin-bottom: 2rem;">
        <div style="display: flex; gap: 1rem; margin-bottom: 1rem; flex-wrap: wrap;">
          <input type="text" id="globalNotesSearch" placeholder="Search across all your notes..." style="flex: 1; min-width: 250px; padding: 0.75rem; border: 2px solid var(--border-color); border-radius: 8px; background: var(--light-bg); color: var(--text-primary);" oninput="performGlobalNotesSearch()">
          <select id="searchFilter" onchange="performGlobalNotesSearch()" style="padding: 0.75rem; border: 2px solid var(--border-color); border-radius: 8px; background: var(--light-bg); color: var(--text-primary);">
            <option value="all">All Notes</option>
            <option value="tags">Tags Only</option>
            <option value="headings">Headings Only</option>
            <option value="references">References Only</option>
          </select>
        </div>
        
        <!-- Popular Tags -->
        <div id="popularTags" style="margin-bottom: 1rem;">
          <strong>Popular Tags:</strong>
          <div id="tagsContainer" style="margin-top: 0.5rem; display: flex; gap: 0.5rem; flex-wrap: wrap;"></div>
        </div>
      </div>
      
      <div id="searchResults" style="max-height: 400px; overflow-y: auto;">
        <p style="text-align: center; color: var(--text-secondary); font-style: italic;">Enter search terms above to find content across all your notes</p>
      </div>
    </div>
  </div>

  <!-- Add Resource Modal -->
  <div id="addResourceModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('addResourceModal')">&times;</span>
      <h2><i class="fas fa-plus"></i> Add Research Resource</h2>
      <form onsubmit="addResourceToLibrary(event)">
        <div class="form-group">
          <label>Resource Type:</label>
          <select id="resourceType" required>
            <option value="">Select Type</option>
            <option value="paper">Academic Paper</option>
            <option value="report">Research Report</option>
            <option value="article">Article</option>
            <option value="book">Book/Chapter</option>
            <option value="website">Website</option>
            <option value="course">Course Material</option>
          </select>
        </div>
        <div class="form-group">
          <label>Title:</label>
          <input type="text" id="resourceTitle" required>
        </div>
        <div class="form-group">
          <label>Authors:</label>
          <input type="text" id="resourceAuthors" placeholder="Smith, J. & Jones, M.">
        </div>
        <div class="form-group">
          <label>Year:</label>
          <input type="number" id="resourceYear" min="1900" max="2030">
        </div>
        <div class="form-group">
          <label>Topic:</label>
          <select id="resourceTopic">
            <option value="development">Development</option>
            <option value="economics">Economics</option>
            <option value="gender">Gender Studies</option>
            <option value="data">Data Analysis</option>
            <option value="research">Research Methods</option>
            <option value="policy">Policy</option>
            <option value="climate">Climate</option>
            <option value="health">Health</option>
          </select>
        </div>
        <div class="form-group">
          <label>URL (optional):</label>
          <input type="url" id="resourceUrl" placeholder="https://...">
        </div>
        <div class="form-group">
          <label>Personal Notes:</label>
          <textarea id="resourceNotes" placeholder="Why is this resource valuable? Key insights..."></textarea>
        </div>
        <button type="submit" class="submit-btn">Add to Library</button>
      </form>
    </div>
  </div>

  <!-- Course Comparison Modal -->
  <div id="comparisonModal" class="modal">
    <div class="modal-content large">
      <span class="close" onclick="closeModal('comparisonModal')">&times;</span>
      <h2><i class="fas fa-balance-scale"></i> Course Comparison</h2>
      <div id="comparisonContent">
        <p>Select courses to compare by checking the boxes on course cards.</p>
      </div>
    </div>
  </div>

  <script>
    // Complete course data with ALL 33 courses
    const courseData = [
      {
        id: 1,
        title: 'Data Feminism 101',
        topic: 'gender',
        level: 'intermediate',
        duration: 'medium',
        icon: 'fas fa-venus',
        description: 'Challenges dominant data narratives using feminist theory. Covers intersectionality, visibility, and the politics of knowledge in South Asian development.',
        url: 'https://101.www.impactmojo.in/DataFeminism',
        prerequisites: ['Basic data literacy', 'Interest in gender studies'],
        outcomes: ['Apply feminist lens to data analysis', 'Identify bias in datasets', 'Design inclusive data collection'],
        audience: 'Data scientists, researchers, gender advocates',
        learnerCount: 2847,
        rating: 4.8,
        relatedExtras: ['handouts', 'data']
      },
      {
        id: 2,
        title: 'Social Safety Nets 101',
        topic: 'justice',
        level: 'intermediate',
        duration: 'medium',
        icon: 'fas fa-shield-alt',
        description: 'Unpacks India\'s welfare architecture—PDS, NREGA, pensions—through lifecycle needs and exclusion errors, with discussion on Aadhaar and last-mile barriers.',
        url: 'https://101.www.impactmojo.in/SocialSafety',
        prerequisites: ['Understanding of Indian governance', 'Basic economics'],
        outcomes: ['Analyze welfare system effectiveness', 'Design inclusive social programs', 'Evaluate targeting mechanisms'],
        audience: 'Policy makers, development practitioners, government officials',
        learnerCount: 2156,
        rating: 4.7,
        relatedExtras: ['handouts', 'research']
      },
      {
        id: 3,
        title: 'Development Economics 101',
        topic: 'economics',
        level: 'intermediate',
        duration: 'long',
        icon: 'fas fa-chart-line',
        description: 'From growth and inequality to institutions and state capacity, this deck introduces core economic debates using Indian and South Asian policy experiences.',
        url: 'https://101.www.impactmojo.in/DevEcon',
        prerequisites: ['Basic economics', 'Mathematics fundamentals'],
        outcomes: ['Understand development theories', 'Analyze economic policies', 'Apply economic frameworks'],
        audience: 'Economics students, policy analysts, development practitioners',
        learnerCount: 1923,
        rating: 4.6,
        relatedExtras: ['handouts', 'data']
      },
      {
        id: 4,
        title: 'Data Literacy 101',
        topic: 'data',
        level: 'beginner',
        duration: 'short',
        icon: 'fas fa-chart-bar',
        description: 'Empowers practitioners to read graphs, question indicators, spot misleading visuals, and use open datasets in everyday program work.',
        url: 'https://101.www.impactmojo.in/DataLit',
        prerequisites: ['None - beginner friendly'],
        outcomes: ['Read and interpret charts', 'Identify misleading statistics', 'Use open data sources'],
        audience: 'Development practitioners, program managers, advocates',
        learnerCount: 1734,
        rating: 4.9,
        relatedExtras: ['data', 'handouts']
      },
      {
        id: 5,
        title: 'Care Economy 101',
        topic: 'gender',
        level: 'intermediate',
        duration: 'medium',
        icon: 'fas fa-heart',
        description: 'Examines unpaid care work, time use surveys, care infrastructure, and policy solutions for recognizing and redistributing care responsibilities.',
        url: 'https://101.www.impactmojo.in/CareEcon',
        prerequisites: ['Gender awareness', 'Basic economics'],
        outcomes: ['Understand care economy concepts', 'Analyze time use data', 'Design care-sensitive policies'],
        audience: 'Gender practitioners, policy makers, social researchers',
        learnerCount: 1654,
        rating: 4.5,
        relatedExtras: ['handouts', 'data']
      },
      {
        id: 6,
        title: 'Research Ethics 101',
        topic: 'research',
        level: 'beginner',
        duration: 'medium',
        icon: 'fas fa-balance-scale',
        description: 'Covers consent, privacy, power dynamics, and ethical frameworks for conducting development research in vulnerable communities.',
        url: 'https://101.www.impactmojo.in/ResEthics',
        prerequisites: ['Basic research awareness'],
        outcomes: ['Apply ethical research principles', 'Design consent processes', 'Address power imbalances'],
        audience: 'Researchers, students, field workers',
        learnerCount: 1821,
        rating: 4.6,
        relatedExtras: ['research', 'handouts']
      },
      {
        id: 7,
        title: 'Political Economy 101',
        topic: 'economics',
        level: 'advanced',
        duration: 'long',
        icon: 'fas fa-university',
        description: 'Explores power structures, institutions, rent-seeking, and political processes that shape economic outcomes in developing countries.',
        url: 'https://101.www.impactmojo.in/PolEcon',
        prerequisites: ['Intermediate economics', 'Political science background'],
        outcomes: ['Analyze political-economic systems', 'Understand institutional dynamics', 'Evaluate policy political feasibility'],
        audience: 'Political economists, policy analysts, graduate students',
        learnerCount: 1376,
        rating: 4.4,
        relatedExtras: ['handouts', 'research']
      },
      {
        id: 8,
        title: 'Econometrics 101',
        topic: 'research',
        level: 'advanced',
        duration: 'long',
        icon: 'fas fa-calculator',
        description: 'Introduction to statistical methods for causal inference in development economics, covering OLS, IV, RCTs, and difference-in-differences.',
        url: 'https://101.www.impactmojo.in/Econometrics',
        prerequisites: ['Statistics background', 'Research methods'],
        outcomes: ['Conduct econometric analysis', 'Design impact evaluations', 'Interpret causal estimates'],
        audience: 'Economists, researchers, impact evaluation specialists',
        learnerCount: 1245,
        rating: 4.3,
        relatedExtras: ['data', 'research']
      },
      {
        id: 9,
        title: 'Poverty and Inequality 101',
        topic: 'economics',
        level: 'intermediate',
        duration: 'medium',
        icon: 'fas fa-chart-area',
        description: 'Examines poverty measurement, inequality trends, and redistribution policies using Indian data and international comparisons.',
        url: 'https://101.www.impactmojo.in/PovInequal',
        prerequisites: ['Basic economics', 'Statistical literacy'],
        outcomes: ['Measure poverty and inequality', 'Analyze distributional patterns', 'Design redistributive policies'],
        audience: 'Development economists, policy analysts, researchers',
        learnerCount: 1432,
        rating: 4.6,
        relatedExtras: ['data', 'handouts']
      },
      {
        id: 10,
        title: 'MEL (Monitoring, Evaluation, and Learning) 101',
        topic: 'systems',
        level: 'intermediate',
        duration: 'long',
        icon: 'fas fa-cogs',
        description: 'Covers theories of change, indicator development, evaluation methods, and adaptive management systems for development programs.',
        url: 'https://101.www.impactmojo.in/MEL',
        prerequisites: ['Program management experience', 'Logical thinking skills'],
        outcomes: ['Design MEL frameworks', 'Develop indicators', 'Conduct evaluations'],
        audience: 'Program managers, MEL specialists, development practitioners',
        learnerCount: 1567,
        rating: 4.4,
        relatedExtras: ['research', 'handouts']
      },
      {
        id: 11,
        title: 'Decent Work 101',
        topic: 'livelihoods',
        level: 'intermediate',
        duration: 'medium',
        icon: 'fas fa-hammer',
        description: 'Explores ILO decent work framework, labor rights, informal sector challenges, and employment policies in South Asian contexts.',
        url: 'https://101.www.impactmojo.in/DecentWork',
        prerequisites: ['Labor market awareness', 'Basic economics'],
        outcomes: ['Apply decent work framework', 'Analyze labor market dynamics', 'Design employment interventions'],
        audience: 'Labor economists, policy makers, development practitioners',
        learnerCount: 1298,
        rating: 4.5,
        relatedExtras: ['handouts', 'research']
      },
      {
        id: 12,
        title: 'Digital Development Ethics 101',
        topic: 'systems',
        level: 'intermediate',
        duration: 'medium',
        icon: 'fas fa-laptop-code',
        description: 'Examines ethical challenges in technology for development, digital divides, data governance, and inclusive technology design.',
        url: 'https://101.www.impactmojo.in/DigitalEthics',
        prerequisites: ['Technology awareness', 'Ethics background'],
        outcomes: ['Analyze digital ethics issues', 'Design inclusive technology', 'Address digital divides'],
        audience: 'Technology professionals, policy makers, development practitioners',
        learnerCount: 934,
        rating: 4.2,
        relatedExtras: ['handouts', 'research']
      },
      {
        id: 13,
        title: 'Health Systems 101',
        topic: 'health',
        level: 'intermediate',
        duration: 'long',
        icon: 'fas fa-hospital',
        description: 'Covers health system building blocks, universal health coverage, and health governance challenges in low-resource settings.',
        url: 'https://101.www.impactmojo.in/HealthSystems',
        prerequisites: ['Health awareness', 'Systems thinking'],
        outcomes: ['Understand health systems', 'Analyze health governance', 'Design health interventions'],
        audience: 'Health professionals, policy makers, public health students',
        learnerCount: 1456,
        rating: 4.5,
        relatedExtras: ['handouts', 'research']
      },
      {
        id: 14,
        title: 'Multivariate Analysis 101',
        topic: 'data',
        level: 'advanced',
        duration: 'long',
        icon: 'fas fa-project-diagram',
        description: 'Introduces causal modeling, control variables, interaction terms, and statistical power for policy analysis, with real survey examples.',
        url: 'https://101.www.impactmojo.in/MultivariateA',
        prerequisites: ['Intermediate statistics', 'Experience with data analysis'],
        outcomes: ['Conduct multivariate analysis', 'Build causal models', 'Interpret complex statistical results'],
        audience: 'Data analysts, researchers, statisticians',
        learnerCount: 743,
        rating: 4.2,
        relatedExtras: ['data', 'handouts']
      },
      {
        id: 15,
        title: 'Bivariate Analysis 101',
        topic: 'data',
        level: 'intermediate',
        duration: 'medium',
        icon: 'fas fa-chart-area',
        description: 'Covers cross-tabs, chi-square tests, means comparisons, and correlation for social researchers working on program outcomes.',
        url: 'https://101.www.impactmojo.in/bivariateA',
        prerequisites: ['Basic statistics', 'Data literacy fundamentals'],
        outcomes: ['Perform bivariate analysis', 'Interpret correlation results', 'Conduct significance tests'],
        audience: 'Social researchers, program managers, data analysts',
        learnerCount: 1245,
        rating: 4.4,
        relatedExtras: ['data', 'handouts']
      },
      {
        id: 16,
        title: 'Climate Change 101',
        topic: 'climate',
        level: 'beginner',
        duration: 'medium',
        icon: 'fas fa-leaf',
        description: 'Covers IPCC basics, vulnerability, adaptation, and mitigation strategies. Rooted in Indian geography and climate justice governance.',
        url: 'https://101.www.impactmojo.in/ClimateScience',
        prerequisites: ['Basic environmental awareness'],
        outcomes: ['Understand climate science fundamentals', 'Analyze vulnerability patterns', 'Design adaptation strategies'],
        audience: 'Environmental professionals, policy makers, students',
        learnerCount: 1234,
        rating: 4.4,
        relatedExtras: ['handouts']
      },
      {
        id: 17,
        title: 'Women\'s Economic Empowerment (WEE) 101',
        topic: 'gender',
        level: 'intermediate',
        duration: 'medium',
        icon: 'fas fa-female',
        description: 'Frames economic agency, control over resources, institutional barriers, and enabling ecosystems using Indian WEE program evidence.',
        url: 'https://101.www.impactmojo.in/WEE',
        prerequisites: ['Gender awareness', 'Economic concepts'],
        outcomes: ['Design WEE programs', 'Measure economic empowerment', 'Address systemic barriers'],
        audience: 'Gender practitioners, microfinance professionals, program managers',
        learnerCount: 1178,
        rating: 4.4,
        relatedExtras: ['handouts', 'data']
      },
      {
        id: 18,
        title: 'Community-Led Development 101',
        topic: 'development',
        level: 'intermediate',
        duration: 'medium',
        icon: 'fas fa-users',
        description: 'Focuses on PLA tools, participatory planning, facilitation ethics, and the evolution of community-led models in India.',
        url: 'https://101.www.impactmojo.in/community-dev',
        prerequisites: ['Community work experience', 'Basic facilitation skills'],
        outcomes: ['Design participatory processes', 'Facilitate community meetings', 'Build local capacity'],
        audience: 'Community workers, development practitioners, NGO staff',
        learnerCount: 1123,
        rating: 4.3,
        relatedExtras: ['handouts', 'research']
      },
      {
        id: 19,
        title: 'Marginalized Identities 101',
        topic: 'identity',
        level: 'intermediate',
        duration: 'long',
        icon: 'fas fa-user-friends',
        description: 'Explores caste, tribe, gender, religion, disability, and intersectionality through rights, representation, and discrimination data.',
        url: 'https://101.www.impactmojo.in/marginalized-identities',
        prerequisites: ['Social awareness', 'Human rights perspective'],
        outcomes: ['Understand intersectionality', 'Analyze discrimination patterns', 'Design inclusive policies'],
        audience: 'Rights advocates, social workers, policy makers',
        learnerCount: 987,
        rating: 4.5,
        relatedExtras: ['handouts', 'research']
      },
      {
        id: 20,
        title: 'EDA for Household Survey Data 101',
        topic: 'data',
        level: 'beginner',
        duration: 'medium',
        icon: 'fas fa-search',
        description: 'Teaches univariate and distributional analysis, skewness, missingness, and data hygiene checks using real survey microdata.',
        url: 'https://101.www.impactmojo.in/HH-EDA',
        prerequisites: ['Basic spreadsheet skills', 'Interest in data analysis'],
        outcomes: ['Perform exploratory data analysis', 'Clean and validate datasets', 'Identify data quality issues'],
        audience: 'Researchers, program officers, data entry staff',
        learnerCount: 1567,
        rating: 4.6,
        relatedExtras: ['data', 'handouts']
      },
      {
        id: 21,
        title: 'Qualitative Research 101',
        topic: 'research',
        level: 'intermediate',
        duration: 'long',
        icon: 'fas fa-microscope',
        description: 'Complete guide to qualitative methods—IDIs, FGDs, ethnography, coding, consent—with Indian case examples.',
        url: 'https://101.www.impactmojo.in/QualR',
        prerequisites: ['Basic research awareness', 'Interest in field methods'],
        outcomes: ['Design qualitative studies', 'Conduct interviews and focus groups', 'Analyze qualitative data'],
        audience: 'Researchers, social workers, anthropologists',
        learnerCount: 1389,
        rating: 4.5,
        relatedExtras: ['research', 'handouts']
      },
      {
        id: 22,
        title: 'Post-Truth Politics 101',
        topic: 'media',
        level: 'intermediate',
        duration: 'medium',
        icon: 'fas fa-exclamation-triangle',
        description: 'Examines misinformation, narrative warfare, political polarization, and trust erosion in India\'s public sphere.',
        url: 'https://101.www.impactmojo.in/post-truth',
        prerequisites: ['Political awareness', 'Media literacy'],
        outcomes: ['Identify misinformation', 'Analyze political narratives', 'Design counter-strategies'],
        audience: 'Journalists, political scientists, civic educators',
        learnerCount: 892,
        rating: 4.1,
        relatedExtras: ['handouts']
      },
      {
        id: 23,
        title: 'Media and Technology for Development 101',
        topic: 'media',
        level: 'intermediate',
        duration: 'medium',
        icon: 'fas fa-broadcast-tower',
        description: 'Explores digital media\'s role in development communication, behavior change, and civic engagement in India.',
        url: 'https://101.www.impactmojo.in/media-tech-dev',
        prerequisites: ['Media awareness', 'Development experience'],
        outcomes: ['Design media campaigns', 'Use technology for behavior change', 'Evaluate media impact'],
        audience: 'Communication specialists, development practitioners, media professionals',
        learnerCount: 756,
        rating: 4.2,
        relatedExtras: ['handouts']
      },
      {
        id: 24,
        title: 'Gender Studies 101',
        topic: 'gender',
        level: 'intermediate',
        duration: 'long',
        icon: 'fas fa-venus-mars',
        description: 'Surveys feminist theory, gender and sexuality, patriarchy, queer movements, and legal shifts across India and South Asia.',
        url: 'https://101.www.impactmojo.in/Gender',
        prerequisites: ['Social awareness', 'Open mindset'],
        outcomes: ['Understand gender theories', 'Analyze power structures', 'Design inclusive policies'],
        audience: 'Gender studies students, activists, policy makers',
        learnerCount: 1567,
        rating: 4.6,
        relatedExtras: ['handouts']
      },
      {
        id: 25,
        title: 'Livelihoods 101',
        topic: 'livelihoods',
        level: 'intermediate',
        duration: 'medium',
        icon: 'fas fa-seedling',
        description: 'Covers assets, strategies, and outcomes with practical tools for livelihood programming in rural and urban contexts.',
        url: 'https://101.www.impactmojo.in/Livelihoods',
        prerequisites: ['Basic development concepts'],
        outcomes: ['Apply livelihoods framework', 'Design livelihood interventions', 'Measure livelihood outcomes'],
        audience: 'Development practitioners, program managers, field workers',
        learnerCount: 1823,
        rating: 4.6,
        relatedExtras: ['handouts']
      },
      {
        id: 26,
        title: 'Public Health 101',
        topic: 'health',
        level: 'intermediate',
        duration: 'long',
        icon: 'fas fa-stethoscope',
        description: 'Covers primary health care, OneHealth, health systems, and social determinants with South Asian equity challenges.',
        url: 'https://101.www.impactmojo.in/ph',
        prerequisites: ['Basic health awareness', 'Systems thinking'],
        outcomes: ['Understand health systems', 'Apply public health principles', 'Design health interventions'],
        audience: 'Health professionals, public health students, policy makers',
        learnerCount: 1456,
        rating: 4.5,
        relatedExtras: ['handouts', 'research']
      },
      {
        id: 27,
        title: 'Education and Pedagogy 101',
        topic: 'education',
        level: 'intermediate',
        duration: 'long',
        icon: 'fas fa-graduation-cap',
        description: 'Introduces learning theory, pedagogy, curriculum debates, and NEP 2020 themes for Indian education professionals.',
        url: 'https://101.www.impactmojo.in/edu',
        prerequisites: ['Teaching experience', 'Interest in education policy'],
        outcomes: ['Apply learning theories', 'Design effective curricula', 'Implement pedagogical innovations'],
        audience: 'Teachers, education administrators, curriculum designers',
        learnerCount: 1623,
        rating: 4.7,
        relatedExtras: ['handouts']
      },
      {
        id: 28,
        title: 'Human-Centered Design 101',
        topic: 'systems',
        level: 'intermediate',
        duration: 'medium',
        icon: 'fas fa-lightbulb',
        description: 'Design thinking methodology for development programs, focusing on user research, prototyping, and iterative improvement.',
        url: 'https://101.www.impactmojo.in/hcd',
        prerequisites: ['Program design experience', 'Creative thinking'],
        outcomes: ['Apply design thinking methods', 'Conduct user research', 'Prototype solutions'],
        audience: 'Program designers, innovation specialists, development practitioners',
        learnerCount: 934,
        rating: 4.3,
        relatedExtras: ['handouts', 'research']
      },
      {
        id: 29,
        title: 'Financial Inclusion 101',
        topic: 'economics',
        level: 'intermediate',
        duration: 'medium',
        icon: 'fas fa-money-bill-wave',
        description: 'Examines access to financial services, digital payments, microfinance, and financial capability in Indian contexts.',
        url: 'https://101.www.impactmojo.in/financial-inclusion',
        prerequisites: ['Basic finance', 'Development awareness'],
        outcomes: ['Design financial inclusion programs', 'Evaluate financial services', 'Address access barriers'],
        audience: 'Microfinance professionals, fintech specialists, financial inclusion advocates',
        learnerCount: 1267,
        rating: 4.4,
        relatedExtras: ['handouts', 'data']
      },
      {
        id: 30,
        title: 'Urban Planning and Governance 101',
        topic: 'systems',
        level: 'intermediate',
        duration: 'long',
        icon: 'fas fa-city',
        description: 'Urban development challenges, participatory planning, smart cities, and local governance in Indian metropolitan contexts.',
        url: 'https://101.www.impactmojo.in/urban-planning',
        prerequisites: ['Urban studies background', 'Governance awareness'],
        outcomes: ['Understand urban planning processes', 'Design participatory approaches', 'Evaluate urban policies'],
        audience: 'Urban planners, government officials, civil society organizations',
        learnerCount: 845,
        rating: 4.2,
        relatedExtras: ['handouts', 'research']
      },
      {
        id: 31,
        title: 'Agriculture and Food Security 101',
        topic: 'livelihoods',
        level: 'intermediate',
        duration: 'medium',
        icon: 'fas fa-tractor',
        description: 'Smallholder agriculture, food systems, climate resilience, and agricultural policy in South Asian contexts.',
        url: 'https://101.www.impactmojo.in/agriculture',
        prerequisites: ['Agricultural awareness', 'Rural development experience'],
        outcomes: ['Understand food systems', 'Design agricultural interventions', 'Address food security challenges'],
        audience: 'Agricultural specialists, rural development practitioners, food security experts',
        learnerCount: 1156,
        rating: 4.3,
        relatedExtras: ['handouts']
      },
      {
        id: 32,
        title: 'Behavioral Science for Development 101',
        topic: 'systems',
        level: 'intermediate',
        duration: 'medium',
        icon: 'fas fa-brain',
        description: 'Behavioral insights, nudges, and psychological factors influencing development program effectiveness and behavior change.',
        url: 'https://101.www.impactmojo.in/behavioral-science',
        prerequisites: ['Psychology awareness', 'Program design experience'],
        outcomes: ['Apply behavioral insights', 'Design behavioral interventions', 'Test behavioral hypotheses'],
        audience: 'Behavioral economists, program designers, policy makers',
        learnerCount: 723,
        rating: 4.1,
        relatedExtras: ['research', 'handouts']
      },
      {
        id: 33,
        title: 'Environmental Justice 101',
        topic: 'climate',
        level: 'intermediate',
        duration: 'medium',
        icon: 'fas fa-tree',
        description: 'Environmental rights, pollution, natural resource governance, and climate justice movements in India and South Asia.',
        url: 'https://101.www.impactmojo.in/environmental-justice',
        prerequisites: ['Environmental awareness', 'Justice perspective'],
        outcomes: ['Understand environmental justice frameworks', 'Analyze environmental conflicts', 'Design rights-based solutions'],
        audience: 'Environmental advocates, rights activists, policy makers',
        learnerCount: 967,
        rating: 4.4,
        relatedExtras: ['handouts', 'research']
      }
    ];

    // Global variables
    let allCourses = courseData;
    let displayedCourses = [];
    let bookmarkedCourses = JSON.parse(localStorage.getItem('bookmarkedCourses') || '[]');
    let courseRatings = JSON.parse(localStorage.getItem('courseRatings') || '{}');
    let currentView = 'grid';
    let selectedForComparison = [];
    let searchTimeout;
    let currentTopicFilter = 'all';

    // Learning paths configuration
    const learningPaths = {
      'data-analysis': {
        name: 'Data Analysis Track',
        courses: [4, 20, 15, 14], // Data Literacy, EDA, Bivariate, Multivariate
        description: 'Master data skills from basics to advanced analysis'
      },
      'gender-studies': {
        name: 'Gender Studies Track', 
        courses: [24, 1, 5, 17], // Gender Studies, Data Feminism, Care Economy, WEE
        description: 'Comprehensive understanding of gender in development'
      },
      'policy-economics': {
        name: 'Policy & Economics Track',
        courses: [3, 7, 9, 2], // Dev Economics, Political Economy, Poverty, Safety Nets
        description: 'From basic economics to policy analysis'
      },
      'research-methods': {
        name: 'Research Methods Track',
        courses: [6, 21, 8, 10], // Research Ethics, Qualitative, Econometrics, MEL
        description: 'Complete research toolkit for development work'
      }
    };

    // Theme toggle function
    function toggleTheme() {
      document.body.classList.toggle("dark");
      const icon = document.querySelector('.theme-toggle');
      const isDark = document.body.classList.contains("dark");
      icon.textContent = isDark ? "☀️" : "🌙";
      localStorage.setItem("theme", isDark ? "dark" : "light");
    }

    // Initialize theme
    function initTheme() {
      const savedTheme = localStorage.getItem("theme");
      if (savedTheme === "dark") {
        document.body.classList.add("dark");
        document.querySelector('.theme-toggle').textContent = "☀️";
      }
    }

    // Initialize on page load
    document.addEventListener('DOMContentLoaded', function() {
      initTheme();
      loadCourses();
      
      // Add search input listener with debouncing
      const searchInput = document.getElementById('searchInput');
      if (searchInput) {
        searchInput.addEventListener('input', function() {
          clearTimeout(searchTimeout);
          searchTimeout = setTimeout(filterCourses, 300);
        });
      }
    });

    // Create course card
    function createCourseCard(course, index) {
      const card = document.createElement('div');
      card.className = 'course-card';
      card.setAttribute('data-course-id', course.id);
      card.onclick = () => toggleCourseDetails(card);
      
      const isBookmarked = bookmarkedCourses.includes(course.title);
      const bookmarkIcon = isBookmarked ? 'fas fa-bookmark' : 'far fa-bookmark';
      const bookmarkClass = isBookmarked ? 'bookmarked' : '';
      
      card.innerHTML = `
        <div class="course-number">${course.id}</div>
        <div class="course-header">
          <div class="course-icon">
            <i class="${course.icon}" aria-hidden="true"></i>
          </div>
          <div class="course-title-section">
            <h3 class="course-title">${course.title}</h3>
            <div class="course-meta">
              <span class="meta-tag">${course.topic}</span>
              <span class="meta-tag">${course.level}</span>
              <span class="meta-tag">${course.duration}</span>
            </div>
          </div>
        </div>
        
        <p class="course-description">${course.description}</p>
        
        <div class="course-stats">
          <div class="course-stat">
            <i class="fas fa-users"></i>
            <span>${course.learnerCount.toLocaleString()} learners</span>
          </div>
          <div class="course-stat">
            <i class="fas fa-star"></i>
            <span>${course.rating.toFixed(1)}</span>
          </div>
        </div>
        
        <div class="course-actions">
          <div class="course-actions-left">
            <a href="${course.url}" class="launch-btn" target="_blank" onclick="event.stopPropagation(); addToRecentlyViewed('${course.title}', '${course.url}')">
              <i class="fas fa-external-link-alt"></i> Launch Course
            </a>
            <button class="bookmark-btn ${bookmarkClass}" onclick="event.stopPropagation(); toggleBookmark(this, '${course.title}')" title="Bookmark this course">
              <i class="${bookmarkIcon}"></i>
            </button>
          </div>
          <label style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.9rem; cursor: pointer;" onclick="event.stopPropagation();">
            <input type="checkbox" class="compare-checkbox" onchange="toggleComparison(${course.id})" title="Add to comparison">
            Compare
          </label>
        </div>

        <div class="course-details">
          <div class="details-section">
            <h4>Prerequisites</h4>
            <ul>
              ${course.prerequisites.map(req => `<li>${req}</li>`).join('')}
            </ul>
          </div>
          <div class="details-section">
            <h4>Learning Outcomes</h4>
            <ul>
              ${course.outcomes.map(outcome => `<li>${outcome}</li>`).join('')}
            </ul>
          </div>
          <div class="details-section">
            <h4>Target Audience</h4>
            <p>${course.audience}</p>
          </div>
          ${course.relatedExtras ? `
          <div class="details-section">
            <h4>Related Resources</h4>
            <p>${course.relatedExtras.map(extra => extra.charAt(0).toUpperCase() + extra.slice(1)).join(', ')}</p>
          </div>
          ` : ''}
        </div>
      `;
      
      return card;
    }

    // Toggle course details
    function toggleCourseDetails(card) {
      const isExpanded = card.classList.contains('expanded');
      
      // Close all other expanded cards
      document.querySelectorAll('.course-card.expanded').forEach(otherCard => {
        if (otherCard !== card) {
          otherCard.classList.remove('expanded');
        }
      });
      
      // Toggle current card
      if (isExpanded) {
        card.classList.remove('expanded');
      } else {
        card.classList.add('expanded');
      }
    }

    // Load and display courses
    function loadCourses() {
      displayCourses(allCourses);
      updateCourseCount();
    }

    // Display courses
    function displayCourses(courses) {
      const container = document.getElementById('courseContainer');
      const noResults = document.getElementById('noResults');
      
      if (courses.length === 0) {
        container.style.display = 'none';
        noResults.classList.remove('hidden');
      } else {
        container.style.display = 'grid';
        noResults.classList.add('hidden');
        
        container.innerHTML = '';
        courses.forEach((course, index) => {
          const courseCard = createCourseCard(course, index);
          container.appendChild(courseCard);
        });
      }
      
      displayedCourses = courses;
      document.getElementById('visibleCount').textContent = courses.length;
    }

    // Filter courses
    function filterCourses() {
      const searchTerm = document.getElementById('searchInput').value.toLowerCase();
      const topicFilter = document.getElementById('topicFilter').value;
      const levelFilter = document.getElementById('levelFilter').value;
      const durationFilter = document.getElementById('durationFilter').value;
      
      let filteredCourses = allCourses.filter(course => {
        const matchesSearch = searchTerm === '' || 
          course.title.toLowerCase().includes(searchTerm) ||
          course.description.toLowerCase().includes(searchTerm) ||
          course.topic.toLowerCase().includes(searchTerm) ||
          course.audience.toLowerCase().includes(searchTerm);
        
        const matchesTopic = topicFilter === 'all' || course.topic === topicFilter;
        const matchesLevel = levelFilter === 'all' || course.level === levelFilter;
        const matchesDuration = durationFilter === 'all' || course.duration === durationFilter;
        
        return matchesSearch && matchesTopic && matchesLevel && matchesDuration;
      });
      
      displayCourses(filteredCourses);
      updateCourseCount();
    }

    // Clear all filters
    function clearAllFilters() {
      document.getElementById('searchInput').value = '';
      document.getElementById('topicFilter').value = 'all';
      document.getElementById('levelFilter').value = 'all';
      document.getElementById('durationFilter').value = 'all';
      filterCourses();
    }

    // Toggle view
    function toggleView(view) {
      currentView = view;
      const container = document.getElementById('courseContainer');
      const buttons = document.querySelectorAll('.view-btn');
      
      buttons.forEach(btn => {
        btn.classList.remove('active');
        btn.setAttribute('aria-pressed', 'false');
      });
      
      event.target.classList.add('active');
      event.target.setAttribute('aria-pressed', 'true');
      
      if (view === 'grid') {
        container.className = 'courses-grid';
      } else {
        container.className = 'courses-list';
      }
    }

    // Toggle bookmark
    function toggleBookmark(button, courseTitle) {
      if (window.toggleBookmark) {
        window.toggleBookmark(courseTitle, courseTitle);
      } else {
        // Fallback to localStorage if Firebase not available
        const icon = button.querySelector('i');
        
        if (bookmarkedCourses.includes(courseTitle)) {
          bookmarkedCourses = bookmarkedCourses.filter(title => title !== courseTitle);
          button.classList.remove('bookmarked');
          icon.className = 'far fa-bookmark';
        } else {
          bookmarkedCourses.push(courseTitle);
          button.classList.add('bookmarked');
          icon.className = 'fas fa-bookmark';
        }
        
        localStorage.setItem('bookmarkedCourses', JSON.stringify(bookmarkedCourses));
      }
    }

    // Toggle comparison
    function toggleComparison(courseId) {
      const index = selectedForComparison.indexOf(courseId);
      if (index > -1) {
        selectedForComparison.splice(index, 1);
      } else {
        if (selectedForComparison.length >= 3) {
          alert('You can compare up to 3 courses at a time.');
          return;
        }
        selectedForComparison.push(courseId);
      }
      
      updateComparisonCount();
      updateComparisonButton();
    }

    // Update comparison count
    function updateComparisonCount() {
      document.getElementById('compareCount').textContent = selectedForComparison.length;
    }

    // Update comparison button visibility
    function updateComparisonButton() {
      const compareBtn = document.getElementById('compareBtn');
      const fabCompareBtn = document.querySelector('.fab-btn.compare');
      
      if (selectedForComparison.length > 0) {
        compareBtn.style.display = 'flex';
        if (fabCompareBtn) fabCompareBtn.style.display = 'flex';
      } else {
        compareBtn.style.display = 'none';
        if (fabCompareBtn) fabCompareBtn.style.display = 'none';
      }
    }

    // Apply learning path
    function applyLearningPath(pathId) {
      const path = learningPaths[pathId];
      if (!path) return;
      
      // Filter courses to show only those in the learning path
      const pathCourses = allCourses.filter(course => path.courses.includes(course.id));
      displayCourses(pathCourses);
      
      // Update search input to show path name
      document.getElementById('searchInput').value = `Learning Path: ${path.name}`;
      
      // Scroll to courses
      document.getElementById('courseContainer').scrollIntoView({ behavior: 'smooth' });
    }

    // Update course count
    function updateCourseCount() {
      const totalCount = allCourses.length;
      document.getElementById('totalCount').textContent = totalCount;
    }

    // Add to recently viewed (realistic tracking)
    function addToRecentlyViewed(courseTitle, courseUrl) {
      trackCourseAccess(courseTitle, courseUrl);
    }

    // Course tracking functions
    function trackCourseAccess(courseTitle, courseUrl) {
      const timestamp = new Date().toISOString();
      let courseAccess = JSON.parse(localStorage.getItem('courseAccess') || '{}');
      
      if (!courseAccess[courseTitle]) {
        courseAccess[courseTitle] = {
          firstAccess: timestamp,
          accessCount: 1,
          url: courseUrl,
          totalTimeEstimate: 0
        };
        console.log('First access to course:', courseTitle);
        unlockAchievement('first-course');
      } else {
        courseAccess[courseTitle].accessCount++;
        courseAccess[courseTitle].lastAccess = timestamp;
        console.log('Return access to course:', courseTitle, 'Count:', courseAccess[courseTitle].accessCount);
      }
      
      localStorage.setItem('courseAccess', JSON.stringify(courseAccess));
      updateProgressDisplay();
      checkRealisticAchievements();
      enhanceCourseCards();
    }

    // Calculate engagement score for a course
    function calculateCourseEngagement(courseTitle) {
      const bookmarks = JSON.parse(localStorage.getItem('bookmarkedCourses') || '[]');
      const notes = localStorage.getItem(`notes-${courseTitle}`) || '';
      const access = JSON.parse(localStorage.getItem('courseAccess') || '{}')[courseTitle];
      
      let engagementScore = 0;
      
      if (bookmarks.includes(courseTitle)) engagementScore += 25;
      if (notes.length > 100) engagementScore += 25;
      if (access && access.accessCount >= 2) engagementScore += 25;
      if (access && access.accessCount >= 5) engagementScore += 25;
      
      return Math.min(engagementScore, 100);
    }

    // Mark course as complete (self-reported)
    function markCourseComplete() {
      const courseAccess = JSON.parse(localStorage.getItem('courseAccess') || '{}');
      const recentCourses = Object.entries(courseAccess)
        .sort(([,a], [,b]) => new Date(b.lastAccess || b.firstAccess) - new Date(a.lastAccess || a.firstAccess));
      
      if (recentCourses.length === 0) {
        alert('No recent course activity found. Please launch a course first.');
        return;
      }
      
      const [mostRecentCourse] = recentCourses[0];
      
      if (confirm(`Mark "${mostRecentCourse}" as completed?`)) {
        let completedCourses = JSON.parse(localStorage.getItem('completedCourses') || '[]');
        
        if (!completedCourses.some(c => c.title === mostRecentCourse)) {
          completedCourses.push({
            title: mostRecentCourse,
            completedDate: new Date().toISOString(),
            method: 'self-reported'
          });
          
          localStorage.setItem('completedCourses', JSON.stringify(completedCourses));
          showCompletionCelebration(mostRecentCourse);
          updateProgressDisplay();
          checkRealisticAchievements();
        } else {
          alert('Course already marked as completed!');
        }
      }
    }

    // Show completion celebration
    function showCompletionCelebration(courseTitle) {
      const celebration = document.createElement('div');
      celebration.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: linear-gradient(135deg, var(--success-color), var(--secondary-color));
        color: white;
        padding: 2rem;
        border-radius: 12px;
        text-align: center;
        z-index: 3000;
        box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        animation: bounceIn 0.6s ease-out;
      `;
      
      celebration.innerHTML = `
        <h2><i class="fas fa-trophy"></i> Congratulations!</h2>
        <p>You've completed <strong>${courseTitle}</strong></p>
        <button onclick="this.parentElement.remove()" style="background: rgba(255,255,255,0.2); color: white; border: none; padding: 0.5rem 1rem; border-radius: 6px; margin-top: 1rem; cursor: pointer;">
          Continue Learning
        </button>
      `;
      
      document.body.appendChild(celebration);
      setTimeout(() => celebration.remove(), 5000);
    }

    // Update progress display
    function updateProgressDisplay() {
      const courseAccess = JSON.parse(localStorage.getItem('courseAccess') || '{}');
      const completedCourses = JSON.parse(localStorage.getItem('completedCourses') || '[]');
      
      const coursesExplored = Object.keys(courseAccess).length;
      const coursesCompleted = completedCourses.length;
      const progressPercentage = coursesExplored > 0 ? Math.round((coursesCompleted / coursesExplored) * 100) : 0;
      
      const coursesStartedEl = document.getElementById('coursesStarted');
      const coursesCompletedEl = document.getElementById('coursesCompleted');
      const totalProgressEl = document.getElementById('totalProgress');
      
      if (coursesStartedEl) coursesStartedEl.textContent = coursesExplored;
      if (coursesCompletedEl) coursesCompletedEl.textContent = coursesCompleted;
      if (totalProgressEl) totalProgressEl.textContent = progressPercentage + '%';
      
      updateRecentActivity();
    }

    // Update recent activity display
    function updateRecentActivity() {
      const courseAccess = JSON.parse(localStorage.getItem('courseAccess') || '{}');
      const recentActivity = document.getElementById('recentActivity');
      
      if (!recentActivity) return;
      
      const sortedCourses = Object.entries(courseAccess)
        .sort(([,a], [,b]) => new Date(b.lastAccess || b.firstAccess) - new Date(a.lastAccess || a.firstAccess))
        .slice(0, 3);
      
      if (sortedCourses.length === 0) {
        recentActivity.innerHTML = '<p style="opacity: 0.8; font-style: italic;">No course activity yet. Start learning to see your progress!</p>';
      } else {
        recentActivity.innerHTML = sortedCourses.map(([title, data]) => {
          const engagement = calculateCourseEngagement(title);
          return `
            <div style="padding: 0.75rem; background: rgba(255,255,255,0.1); border-radius: 8px; margin: 0.5rem 0; border-left: 4px solid var(--secondary-color);">
              <div style="display: flex; justify-content: space-between; align-items: center;">
                <strong style="color: white;">${title}</strong>
                <span style="background: var(--secondary-color); color: white; padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.8rem;">${engagement}% engaged</span>
              </div>
              <small style="color: rgba(255,255,255,0.8);">
                Accessed ${data.accessCount} times • Last: ${new Date(data.lastAccess || data.firstAccess).toLocaleDateString()}
              </small>
            </div>
          `;
        }).join('');
      }
    }

    // Achievement system
    function unlockAchievement(achievementId) {
      let unlockedAchievements = JSON.parse(localStorage.getItem('unlockedAchievements') || '[]');
      
      if (!unlockedAchievements.includes(achievementId)) {
        unlockedAchievements.push(achievementId);
        localStorage.setItem('unlockedAchievements', JSON.stringify(unlockedAchievements));
        
        // Update achievement display
        const achievementBadge = document.querySelector(`[data-achievement="${achievementId}"]`);
        if (achievementBadge) {
          achievementBadge.style.opacity = '1';
          achievementBadge.style.background = 'rgba(46, 204, 113, 0.2)';
          achievementBadge.style.border = '2px solid var(--success-color)';
        }
        
        console.log('Achievement unlocked:', achievementId);
        showAchievementNotification(achievementId);
      }
    }

    function showAchievementNotification(achievementId) {
      const achievementNames = {
        'first-course': 'First Course Explorer',
        'active-learner': 'Active Learner',
        'course-completer': 'Course Completer',
        'note-taker': 'Dedicated Note Taker',
        'researcher': 'Research Library Builder'
      };
      
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: linear-gradient(135deg, var(--warning-color), var(--success-color));
        color: white;
        padding: 1rem;
        border-radius: 8px;
        z-index: 2000;
        box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        animation: slideIn 0.5s ease-out;
      `;
      
      notification.innerHTML = `
        <div style="display: flex; align-items: center; gap: 0.5rem;">
          <i class="fas fa-trophy"></i>
          <div>
            <strong>Achievement Unlocked!</strong><br>
            <small>${achievementNames[achievementId] || achievementId}</small>
          </div>
        </div>
      `;
      
      document.body.appendChild(notification);
      setTimeout(() => notification.remove(), 4000);
    }

    function checkRealisticAchievements() {
      const courseAccess = JSON.parse(localStorage.getItem('courseAccess') || '{}');
      const completedCourses = JSON.parse(localStorage.getItem('completedCourses') || '[]');
      const notes = Object.keys(localStorage).filter(key => key.startsWith('notes-')).length;
      const library = JSON.parse(localStorage.getItem('researchLibrary') || '[]');
      
      // First Course Launch
      if (Object.keys(courseAccess).length >= 1) {
        unlockAchievement('first-course');
      }
      
      // Active Learner (accessed 5+ courses)
      if (Object.keys(courseAccess).length >= 5) {
        unlockAchievement('active-learner');
      }
      
      // Course Completer
      if (completedCourses.length >= 1) {
        unlockAchievement('course-completer');
      }
      
      // Note Taker
      if (notes >= 3) {
        unlockAchievement('note-taker');
      }
      
      // Researcher
      if (library.length >= 5) {
        unlockAchievement('researcher');
      }
    }

    // Enhance course cards with progress indicators
    function enhanceCourseCards() {
      setTimeout(() => {
        const courseCards = document.querySelectorAll('.course-card');
        const courseAccess = JSON.parse(localStorage.getItem('courseAccess') || '{}');
        const completedCourses = JSON.parse(localStorage.getItem('completedCourses') || '[]');
        
        courseCards.forEach(card => {
          const courseTitle = card.querySelector('.course-title').textContent;
          const isCompleted = completedCourses.some(c => c.title === courseTitle);
          const accessData = courseAccess[courseTitle];
          
          // Remove existing progress indicator
          const existingIndicator = card.querySelector('.course-progress-indicator');
          if (existingIndicator) existingIndicator.remove();
          
          // Add progress indicator
          const progressIndicator = document.createElement('div');
          progressIndicator.className = 'course-progress-indicator';
          progressIndicator.style.cssText = `
            position: absolute;
            bottom: 1rem;
            left: 1rem;
            font-size: 0.8rem;
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
            display: flex;
            align-items: center;
            gap: 0.25rem;
          `;
          
          if (isCompleted) {
            progressIndicator.innerHTML = '<i class="fas fa-check-circle"></i> Completed';
            progressIndicator.style.background = 'var(--success-color)';
            progressIndicator.style.color = 'white';
            card.style.border = '2px solid var(--success-color)';
          } else if (accessData) {
            const engagement = calculateCourseEngagement(courseTitle);
            progressIndicator.innerHTML = `<i class="fas fa-chart-line"></i> ${engagement}% engaged`;
            progressIndicator.style.background = 'var(--secondary-color)';
            progressIndicator.style.color = 'white';
          }
          
          if (progressIndicator.innerHTML) {
            card.appendChild(progressIndicator);
          }
        });
      }, 1000);
    }

    // Enhanced Notes functions
    function saveNotes() {
      const courseSelect = document.getElementById('notesCourse');
      const notesTextarea = document.getElementById('userNotes');
      const lastSavedSpan = document.getElementById('lastSaved');
      
      if (!courseSelect || !notesTextarea) return;
      
      const selectedCourse = courseSelect.value;
      const notes = notesTextarea.value;
      
      if (!selectedCourse) {
        alert('Please select a course for these notes.');
        return;
      }
      
      // Save notes with metadata
      const noteData = {
        content: notes,
        lastModified: new Date().toISOString(),
        wordCount: notes.trim().split(/\s+/).filter(word => word.length > 0).length,
        lineCount: notes.split('\n').length,
        tags: extractTags(notes),
        course: selectedCourse
      };
      
      localStorage.setItem(`notes-${selectedCourse}`, JSON.stringify(noteData));
      
      if (lastSavedSpan) {
        lastSavedSpan.textContent = new Date().toLocaleTimeString();
      }
      
      updateWordCount();
      updateNotesStatistics();
      checkRealisticAchievements();
      
      console.log('Notes saved for:', selectedCourse);
    }

    function loadNotes(courseName) {
      const notesTextarea = document.getElementById('userNotes');
      if (!notesTextarea) return;
      
      const savedData = localStorage.getItem(`notes-${courseName}`);
      
      if (savedData) {
        try {
          const noteData = JSON.parse(savedData);
          notesTextarea.value = noteData.content || savedData; // Backward compatibility
        } catch (e) {
          // Handle old format (plain text)
          notesTextarea.value = savedData;
        }
      } else {
        // Load template for new notes
        notesTextarea.value = `# Course Notes for ${courseName}

## Key Concepts
- 

## Personal Insights
- 

## Questions for Further Research
- 

## Action Items
- [ ] 

## References
- 

## Tags
#${courseName.toLowerCase().replace(/\s+/g, '')} #development

---
`;
      }
      
      updateWordCount();
    }

    function updateWordCount() {
      const notesTextarea = document.getElementById('userNotes');
      const wordCountSpan = document.getElementById('wordCount');
      const lineCountSpan = document.getElementById('lineCount');
      
      if (notesTextarea) {
        const text = notesTextarea.value;
        const wordCount = text.trim().split(/\s+/).filter(word => word.length > 0).length;
        const lineCount = text.split('\n').length;
        
        if (wordCountSpan) wordCountSpan.textContent = wordCount;
        if (lineCountSpan) lineCountSpan.textContent = lineCount;
      }
    }

    function updateNotesStatistics() {
      const totalNotesEl = document.getElementById('totalNotesCount');
      const totalWordsEl = document.getElementById('totalWordsCount');
      const uniqueTagsEl = document.getElementById('uniqueTagsCount');
      const referencesEl = document.getElementById('referencesCount');
      
      if (!totalNotesEl) return;
      
      let totalNotes = 0;
      let totalWords = 0;
      let allTags = new Set();
      let totalReferences = 0;
      
      // Scan all notes
      for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        if (key && key.startsWith('notes-')) {
          totalNotes++;
          
          const savedData = localStorage.getItem(key);
          let content = '';
          
          try {
            const noteData = JSON.parse(savedData);
            content = noteData.content || '';
            if (noteData.tags) {
              noteData.tags.forEach(tag => allTags.add(tag));
            }
          } catch (e) {
            content = savedData || '';
          }
          
          // Count words
          const words = content.trim().split(/\s+/).filter(word => word.length > 0);
          totalWords += words.length;
          
          // Extract tags if not already parsed
          const tags = extractTags(content);
          tags.forEach(tag => allTags.add(tag));
          
          // Count references
          const references = content.match(/\[.*?\]/g) || [];
          totalReferences += references.length;
        }
      }
      
      totalNotesEl.textContent = totalNotes;
      totalWordsEl.textContent = totalWords.toLocaleString();
      uniqueTagsEl.textContent = allTags.size;
      referencesEl.textContent = totalReferences;
    }

    function extractTags(text) {
      const tagRegex = /#[\w\-]+/g;
      const tags = text.match(tagRegex) || [];
      return tags.map(tag => tag.toLowerCase());
    }

    function highlightSearchInNotes() {
      const searchTerm = document.getElementById('quickNotesSearch').value.toLowerCase();
      const notesTextarea = document.getElementById('userNotes');
      
      if (!searchTerm || !notesTextarea) {
        // Remove any existing highlights
        notesTextarea.style.background = 'rgba(255,255,255,0.1)';
        return;
      }
      
      // Simple highlight effect (visual feedback)
      const content = notesTextarea.value.toLowerCase();
      if (content.includes(searchTerm)) {
        notesTextarea.style.background = 'rgba(255, 255, 0, 0.1)';
      } else {
        notesTextarea.style.background = 'rgba(255,255,255,0.1)';
      }
    }

    function performGlobalNotesSearch() {
      const searchTerm = document.getElementById('globalNotesSearch').value.toLowerCase();
      const filter = document.getElementById('searchFilter').value;
      const resultsContainer = document.getElementById('searchResults');
      
      if (!searchTerm.trim()) {
        resultsContainer.innerHTML = '<p style="text-align: center; color: var(--text-secondary); font-style: italic;">Enter search terms above to find content across all your notes</p>';
        return;
      }
      
      const results = [];
      
      // Search through all notes
      for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        if (key && key.startsWith('notes-')) {
          const courseName = key.replace('notes-', '');
          const savedData = localStorage.getItem(key);
          
          let content = '';
          let lastModified = '';
          
          try {
            const noteData = JSON.parse(savedData);
            content = noteData.content || '';
            lastModified = noteData.lastModified || '';
          } catch (e) {
            content = savedData || '';
          }
          
          // Apply filter
          let searchContent = content;
          if (filter === 'tags') {
            const tags = extractTags(content);
            searchContent = tags.join(' ');
          } else if (filter === 'headings') {
            const headings = content.match(/^#+\s+.+$/gm) || [];
            searchContent = headings.join(' ');
          } else if (filter === 'references') {
            const references = content.match(/\[.*?\]/g) || [];
            searchContent = references.join(' ');
          }
          
          if (searchContent.toLowerCase().includes(searchTerm)) {
            // Find context around the match
            const lines = content.split('\n');
            const matchingLines = [];
            
            lines.forEach((line, index) => {
              if (line.toLowerCase().includes(searchTerm)) {
                const start = Math.max(0, index - 1);
                const end = Math.min(lines.length, index + 2);
                const context = lines.slice(start, end).join('\n');
                matchingLines.push({
                  line: line,
                  context: context,
                  lineNumber: index + 1
                });
              }
            });
            
            results.push({
              course: courseName,
              matches: matchingLines,
              lastModified: lastModified
            });
          }
        }
      }
      
      // Display results
      if (results.length === 0) {
        resultsContainer.innerHTML = `<p style="text-align: center; color: var(--text-secondary);">No results found for "${searchTerm}"</p>`;
      } else {
        resultsContainer.innerHTML = results.map(result => `
          <div style="background: var(--light-bg); border-radius: 8px; padding: 1rem; margin: 1rem 0; border-left: 4px solid var(--secondary-color);">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
              <h4 style="margin: 0; color: var(--text-primary);">${result.course}</h4>
              <button onclick="openNotesForCourse('${result.course}')" style="background: var(--secondary-color); color: white; border: none; padding: 0.25rem 0.75rem; border-radius: 4px; font-size: 0.8rem; cursor: pointer;">
                Open Notes
              </button>
            </div>
            ${result.matches.map(match => `
              <div style="background: rgba(255,255,255,0.1); border-radius: 4px; padding: 0.5rem; margin: 0.5rem 0;">
                <small style="color: var(--text-secondary);">Line ${match.lineNumber}:</small>
                <pre style="white-space: pre-wrap; font-family: inherit; margin: 0.25rem 0; font-size: 0.9rem;">${highlightSearchTerm(match.context, searchTerm)}</pre>
              </div>
            `).join('')}
            ${result.lastModified ? `<small style="color: var(--text-secondary);">Last modified: ${new Date(result.lastModified).toLocaleString()}</small>` : ''}
          </div>
        `).join('');
      }
      
      updatePopularTags();
    }

    function highlightSearchTerm(text, searchTerm) {
      const regex = new RegExp(`(${searchTerm})`, 'gi');
      return text.replace(regex, '<mark style="background: yellow; color: black; padding: 0 2px;">$1</mark>');
    }

    function updatePopularTags() {
      const tagsContainer = document.getElementById('tagsContainer');
      if (!tagsContainer) return;
      
      const tagCounts = {};
      
      // Count tag frequency across all notes
      for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        if (key && key.startsWith('notes-')) {
          const savedData = localStorage.getItem(key);
          let content = '';
          
          try {
            const noteData = JSON.parse(savedData);
            content = noteData.content || '';
          } catch (e) {
            content = savedData || '';
          }
          
          const tags = extractTags(content);
          tags.forEach(tag => {
            tagCounts[tag] = (tagCounts[tag] || 0) + 1;
          });
        }
      }
      
      // Get top 10 tags
      const sortedTags = Object.entries(tagCounts)
        .sort(([,a], [,b]) => b - a)
        .slice(0, 10);
      
      if (sortedTags.length === 0) {
        tagsContainer.innerHTML = '<span style="color: var(--text-secondary); font-style: italic;">No tags found yet</span>';
      } else {
        tagsContainer.innerHTML = sortedTags.map(([tag, count]) => `
          <button onclick="searchByTag('${tag}')" style="background: var(--secondary-color); color: white; border: none; padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.8rem; cursor: pointer; margin: 0.25rem;">
            ${tag} (${count})
          </button>
        `).join('');
      }
    }

    function searchByTag(tag) {
      document.getElementById('globalNotesSearch').value = tag;
      document.getElementById('searchFilter').value = 'tags';
      performGlobalNotesSearch();
    }

    function openNotesForCourse(courseName) {
      closeModal('notesSearchModal');
      
      // Select the course and load its notes
      const courseSelect = document.getElementById('notesCourse');
      if (courseSelect) {
        courseSelect.value = courseName;
        loadNotes(courseName);
      }
      
      // Scroll to notes section
      const notesSection = document.querySelector('.dashboard-section:has(#userNotes)');
      if (notesSection) {
        notesSection.scrollIntoView({ behavior: 'smooth' });
      }
    }

    function exportNotes() {
      const courseSelect = document.getElementById('notesCourse');
      const notesTextarea = document.getElementById('userNotes');
      
      if (!courseSelect || !notesTextarea || !courseSelect.value) {
        // Export all notes if no specific course selected
        if (confirm('No specific course selected. Export all notes as a combined file?')) {
          exportAllNotes();
          return;
        }
        alert('Please select a course and add some notes to export.');
        return;
      }
      
      const course = courseSelect.value;
      const notes = notesTextarea.value;
      const date = new Date().toLocaleDateString();
      
      const exportContent = `# Notes for ${course}

**Date:** ${date}  
**Course:** ${course}  
**Word Count:** ${notes.trim().split(/\s+/).filter(word => word.length > 0).length}

---

${notes}

---
*Generated by ImpactMojo Dashboard*`;
      
      const blob = new Blob([exportContent], { type: 'text/markdown' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `${course.replace(/\s+/g, '_')}_notes.md`;
      a.click();
      URL.revokeObjectURL(url);
    }

    function exportAllNotes() {
      let allNotesContent = `# Complete ImpactMojo Notes Collection

**Generated:** ${new Date().toLocaleDateString()}  
**Total Courses:** ${document.querySelectorAll('#notesCourse option').length - 1}

---

`;
      
      let notesCount = 0;
      
      for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        if (key && key.startsWith('notes-')) {
          const courseName = key.replace('notes-', '');
          const savedData = localStorage.getItem(key);
          
          let content = '';
          let lastModified = '';
          
          try {
            const noteData = JSON.parse(savedData);
            content = noteData.content || '';
            lastModified = noteData.lastModified || '';
          } catch (e) {
            content = savedData || '';
          }
          
          if (content.trim()) {
            notesCount++;
            allNotesContent += `\n## ${courseName}\n\n`;
            if (lastModified) {
              allNotesContent += `*Last modified: ${new Date(lastModified).toLocaleString()}*\n\n`;
            }
            allNotesContent += content + '\n\n---\n\n';
          }
        }
      }
      
      if (notesCount === 0) {
        alert('No notes found to export.');
        return;
      }
      
      allNotesContent += `\n*Total Notes Exported: ${notesCount}*\n*Generated by ImpactMojo Dashboard*`;
      
      const blob = new Blob([allNotesContent], { type: 'text/markdown' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `ImpactMojo_All_Notes_${new Date().toISOString().split('T')[0]}.md`;
      a.click();
      URL.revokeObjectURL(url);
    }

    function generateCertificate() {
      const completedCourses = JSON.parse(localStorage.getItem('completedCourses') || '[]');
      const user = window.auth && window.auth.currentUser;
      
      if (completedCourses.length === 0) {
        alert('Complete at least one course to generate a certificate.');
        return;
      }
      
      const userName = user ? (user.displayName || user.email.split('@')[0]) : 'ImpactMojo Learner';
      
      // Simple certificate generation (you could enhance this with a proper PDF library)
      const certificateContent = `
CERTIFICATE OF COMPLETION

This is to certify that

${userName}

has successfully completed the following courses from ImpactMojo:

${completedCourses.map(course => `• ${course.title} (${new Date(course.completedDate).toLocaleDateString()})`).join('\n')}

Total Courses Completed: ${completedCourses.length}

Date: ${new Date().toLocaleDateString()}

ImpactMojo - Development Education for South Asia
Curated by Dr. Varna Sri Raman
`;
      
      const blob = new Blob([certificateContent], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `ImpactMojo_Certificate_${userName.replace(/\s+/g, '_')}.txt`;
      a.click();
      URL.revokeObjectURL(url);
    }

    function copyDiscountCode() {
      const code = 'IMPACTMOJO10';
      navigator.clipboard.writeText(code).then(() => {
        alert('Discount code copied to clipboard!');
      }).catch(() => {
        alert('Discount code: IMPACTMOJO10');
      });
    }

    // Initialize dashboard when page loads
    document.addEventListener('DOMContentLoaded', function() {
      // Existing initialization code...
      
      // Initialize dashboard features
      setTimeout(() => {
        updateProgressDisplay();
        checkRealisticAchievements();
        enhanceCourseCards();
        populateCoursesDropdown();
        initializeAchievements();
        updateResearchLibraryDisplay();
        
        // Auto-save notes every 30 seconds
        setInterval(() => {
          const notesTextarea = document.getElementById('userNotes');
          if (notesTextarea && notesTextarea.value.length > 10) {
            saveNotes();
          }
        }, 30000);
        
        // Update word count on typing
        const notesTextarea = document.getElementById('userNotes');
        if (notesTextarea) {
          notesTextarea.addEventListener('input', updateWordCount);
        }

        // Initialize quiz if results exist
        const quizResults = JSON.parse(localStorage.getItem('quizResults') || 'null');
        if (quizResults) {
          const personalizedPath = document.getElementById('personalizedPath');
          const quizPrompt = document.getElementById('quizPrompt');
          const recommendedPathSpan = document.getElementById('recommendedPath');
          
          if (personalizedPath && quizPrompt && recommendedPathSpan) {
            quizPrompt.style.display = 'none';
            personalizedPath.style.display = 'block';
            
            // Determine path from quiz results
            let pathName = 'Data Analysis Track';
            if (quizResults.background === 'gender' || quizResults.interests?.includes('gender')) {
              pathName = 'Gender Studies Track';
            } else if (quizResults.background === 'economics' || quizResults.interests?.includes('economics')) {
              pathName = 'Policy & Economics Track';
            } else if (quizResults.background === 'research' || quizResults.interests?.includes('research')) {
              pathName = 'Research Methods Track';
            }
            
            recommendedPathSpan.textContent = pathName;
          }
        }
      }, 2000);
    });

    function populateCoursesDropdown() {
      const courseSelect = document.getElementById('notesCourse');
      if (!courseSelect) return;
      
      const courseAccess = JSON.parse(localStorage.getItem('courseAccess') || '{}');
      
      courseSelect.innerHTML = '<option value="">Select Course for Notes</option>';
      
      Object.keys(courseAccess).forEach(courseTitle => {
        const option = document.createElement('option');
        option.value = courseTitle;
        option.textContent = courseTitle;
        courseSelect.appendChild(option);
      });
      
      // Load notes when course is selected
      courseSelect.addEventListener('change', function() {
        const notesTextarea = document.getElementById('userNotes');
        if (this.value && notesTextarea) {
          const savedNotes = localStorage.getItem(`notes-${this.value}`) || '';
          notesTextarea.value = savedNotes;
          updateWordCount();
        }
      });
    }

    function initializeAchievements() {
      const unlockedAchievements = JSON.parse(localStorage.getItem('unlockedAchievements') || '[]');
      
      unlockedAchievements.forEach(achievementId => {
        const achievementBadge = document.querySelector(`[data-achievement="${achievementId}"]`);
        if (achievementBadge) {
          achievementBadge.style.opacity = '1';
          achievementBadge.style.background = 'rgba(46, 204, 113, 0.2)';
          achievementBadge.style.border = '2px solid var(--success-color)';
        }
      });
    }

    // Learning Quiz Functions
    let currentQuestion = 1;
    const totalQuestions = 4;

    function startLearningQuiz() {
      currentQuestion = 1;
      openModal('learningQuizModal');
      showQuestion(1);
    }

    function changeQuestion(direction) {
      const current = document.getElementById(`question${currentQuestion}`);
      if (current) current.style.display = 'none';
      
      currentQuestion += direction;
      
      if (currentQuestion < 1) currentQuestion = 1;
      if (currentQuestion > totalQuestions) currentQuestion = totalQuestions;
      
      showQuestion(currentQuestion);
    }

    function showQuestion(questionNum) {
      // Hide all questions
      for (let i = 1; i <= totalQuestions; i++) {
        const q = document.getElementById(`question${i}`);
        if (q) q.style.display = 'none';
      }
      
      // Show current question
      const current = document.getElementById(`question${questionNum}`);
      if (current) current.style.display = 'block';
      
      // Update navigation
      const prevBtn = document.getElementById('prevBtn');
      const nextBtn = document.getElementById('nextBtn');
      const submitBtn = document.getElementById('submitQuiz');
      
      if (prevBtn) prevBtn.style.display = questionNum > 1 ? 'inline-block' : 'none';
      if (nextBtn) nextBtn.style.display = questionNum < totalQuestions ? 'inline-block' : 'none';
      if (submitBtn) submitBtn.style.display = questionNum === totalQuestions ? 'inline-block' : 'none';
    }

    function submitQuiz() {
      const formData = new FormData();
      const form = document.getElementById('learningQuizModal');
      
      // Collect answers
      const background = form.querySelector('input[name="background"]:checked')?.value || 'other';
      const goal = form.querySelector('input[name="goal"]:checked')?.value || 'understanding';
      const interests = Array.from(form.querySelectorAll('input[name="interests"]:checked')).map(i => i.value);
      const time = form.querySelector('input[name="time"]:checked')?.value || '1-2';
      
      const quizResults = { background, goal, interests, time };
      localStorage.setItem('quizResults', JSON.stringify(quizResults));
      
      // Generate recommendation
      const recommendation = generateLearningPathRecommendation(quizResults);
      
      // Hide quiz, show results
      document.getElementById('quizContent').style.display = 'none';
      document.getElementById('quizResults').style.display = 'block';
      document.getElementById('pathRecommendation').innerHTML = recommendation;
    }

    function generateLearningPathRecommendation(results) {
      let recommendedPath = 'data-analysis'; // default
      let pathName = 'Data Analysis Track';
      let description = 'Perfect for building analytical skills';
      
      // Logic to determine best path
      if (results.background === 'gender' || results.interests.includes('gender')) {
        recommendedPath = 'gender-studies';
        pathName = 'Gender Studies Track';
        description = 'Comprehensive understanding of gender in development';
      } else if (results.background === 'economics' || results.interests.includes('economics')) {
        recommendedPath = 'policy-economics';
        pathName = 'Policy & Economics Track';
        description = 'From basic economics to policy analysis';
      } else if (results.background === 'research' || results.interests.includes('research')) {
        recommendedPath = 'research-methods';
        pathName = 'Research Methods Track';
        description = 'Complete research toolkit for development work';
      }
      
      const estimatedTime = {
        '1-2': '2-3 months',
        '3-5': '1-2 months',
        '6-10': '3-4 weeks',
        '10+': '2-3 weeks'
      }[results.time] || '2-3 months';
      
      return `
        <div style="background: var(--light-bg); border-radius: 8px; padding: 1.5rem; margin: 1rem 0;">
          <h4 style="color: var(--secondary-color); margin: 0 0 1rem 0;">${pathName}</h4>
          <p>${description}</p>
          <p><strong>Estimated completion time:</strong> ${estimatedTime}</p>
          <p><strong>Based on your interests in:</strong> ${results.interests.join(', ') || 'general development'}</p>
        </div>
      `;
    }

    function applyRecommendedPath() {
      const quizResults = JSON.parse(localStorage.getItem('quizResults') || '{}');
      let pathId = 'data-analysis';
      
      if (quizResults.background === 'gender' || quizResults.interests?.includes('gender')) {
        pathId = 'gender-studies';
      } else if (quizResults.background === 'economics' || quizResults.interests?.includes('economics')) {
        pathId = 'policy-economics';
      } else if (quizResults.background === 'research' || quizResults.interests?.includes('research')) {
        pathId = 'research-methods';
      }
      
      closeModal('learningQuizModal');
      applyLearningPath(pathId);
      
      // Update dashboard
      const personalizedPath = document.getElementById('personalizedPath');
      const quizPrompt = document.getElementById('quizPrompt');
      const recommendedPathSpan = document.getElementById('recommendedPath');
      
      if (personalizedPath && quizPrompt && recommendedPathSpan) {
        quizPrompt.style.display = 'none';
        personalizedPath.style.display = 'block';
        recommendedPathSpan.textContent = learningPaths[pathId].name;
      }
    }

    // Research Library Functions
    function addResourceToLibrary(event) {
      event.preventDefault();
      
      const resource = {
        type: document.getElementById('resourceType').value,
        title: document.getElementById('resourceTitle').value,
        authors: document.getElementById('resourceAuthors').value,
        year: document.getElementById('resourceYear').value,
        topic: document.getElementById('resourceTopic').value,
        url: document.getElementById('resourceUrl').value,
        notes: document.getElementById('resourceNotes').value,
        dateAdded: new Date().toISOString(),
        id: Date.now()
      };
      
      let library = JSON.parse(localStorage.getItem('researchLibrary') || '[]');
      library.push(resource);
      localStorage.setItem('researchLibrary', JSON.stringify(library));
      
      updateResearchLibraryDisplay();
      closeModal('addResourceModal');
      
      // Reset form
      event.target.reset();
      
      checkRealisticAchievements();
      
      alert('Resource added to your library!');
    }

    function updateResearchLibraryDisplay() {
      const libraryList = document.getElementById('researchLibraryList');
      if (!libraryList) return;
      
      const library = JSON.parse(localStorage.getItem('researchLibrary') || '[]');
      const filter = document.getElementById('libraryFilter')?.value || 'all';
      
      const filteredLibrary = filter === 'all' ? library : library.filter(item => item.topic === filter);
      
      if (filteredLibrary.length === 0) {
        libraryList.innerHTML = '<p style="opacity: 0.8; font-style: italic; text-align: center;">No resources found. Add some resources to build your library!</p>';
      } else {
        libraryList.innerHTML = filteredLibrary.map(resource => `
          <div style="background: rgba(255,255,255,0.1); border-radius: 8px; padding: 1rem; margin: 0.5rem 0; border-left: 4px solid var(--secondary-color);">
            <div style="display: flex; justify-content: space-between; align-items: flex-start;">
              <div style="flex: 1;">
                <h5 style="margin: 0 0 0.5rem 0; color: white;">${resource.title}</h5>
                ${resource.authors ? `<p style="margin: 0; color: rgba(255,255,255,0.8); font-size: 0.9rem;">${resource.authors} ${resource.year ? `(${resource.year})` : ''}</p>` : ''}
                <div style="margin: 0.5rem 0; display: flex; gap: 0.5rem; flex-wrap: wrap;">
                  <span style="background: var(--info-color); color: white; padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.8rem;">${resource.type}</span>
                  <span style="background: var(--secondary-color); color: white; padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.8rem;">${resource.topic}</span>
                </div>
                ${resource.notes ? `<p style="margin: 0.5rem 0 0 0; font-size: 0.9rem; color: rgba(255,255,255,0.8); font-style: italic;">${resource.notes}</p>` : ''}
                ${resource.url ? `<a href="${resource.url}" target="_blank" style="color: var(--warning-color); text-decoration: none; font-size: 0.9rem;">🔗 View Resource</a>` : ''}
              </div>
              <button onclick="removeFromLibrary(${resource.id})" style="background: var(--accent-color); color: white; border: none; padding: 0.25rem 0.5rem; border-radius: 4px; cursor: pointer; margin-left: 1rem;">
                <i class="fas fa-times"></i>
              </button>
            </div>
          </div>
        `).join('');
      }
    }

    function removeFromLibrary(resourceId) {
      if (confirm('Remove this resource from your library?')) {
        let library = JSON.parse(localStorage.getItem('researchLibrary') || '[]');
        library = library.filter(item => item.id !== resourceId);
        localStorage.setItem('researchLibrary', JSON.stringify(library));
        updateResearchLibraryDisplay();
      }
    }

    function filterLibrary() {
      updateResearchLibraryDisplay();
    }

    function exportBibliography() {
      const library = JSON.parse(localStorage.getItem('researchLibrary') || '[]');
      
      if (library.length === 0) {
        alert('No resources in your library to export.');
        return;
      }
      
      const bibliography = library.map(resource => {
        // Generate APA-style citation
        let citation = '';
        if (resource.authors && resource.year) {
          citation = `${resource.authors} (${resource.year}). ${resource.title}.`;
        } else {
          citation = `${resource.title}.`;
        }
        if (resource.url) {
          citation += ` Retrieved from ${resource.url}`;
        }
        return citation;
      }).join('\n\n');
      
      const exportContent = `ImpactMojo Research Library Bibliography
Generated: ${new Date().toLocaleDateString()}

${bibliography}

---
Total Resources: ${library.length}
Generated by ImpactMojo Dashboard`;
      
      const blob = new Blob([exportContent], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'ImpactMojo_Bibliography.txt';
      a.click();
      URL.revokeObjectURL(url);
    }

    // Modal functions
    function openModal(modalId) {
      const modal = document.getElementById(modalId);
      if (modal) {
        modal.style.display = 'block';
        modal.setAttribute('aria-hidden', 'false');
        
        if (modalId === 'comparisonModal') {
          updateComparisonModal();
        }
      }
    }

    function closeModal(modalId) {
      const modal = document.getElementById(modalId);
      if (modal) {
        modal.style.display = 'none';
        modal.setAttribute('aria-hidden', 'true');
      }
    }

    // Update comparison modal
    function updateComparisonModal() {
      const content = document.getElementById('comparisonContent');
      
      if (selectedForComparison.length === 0) {
        content.innerHTML = '<p>Select courses to compare by checking the boxes on course cards.</p>';
        return;
      }
      
      const selectedCourses = allCourses.filter(course => selectedForComparison.includes(course.id));
      
      let comparisonHTML = '<div style="overflow-x: auto;"><table style="width: 100%; border-collapse: collapse;">';
      comparisonHTML += '<thead><tr><th style="border: 1px solid var(--border-color); padding: 0.5rem;">Aspect</th>';
      
      selectedCourses.forEach(course => {
        comparisonHTML += `<th style="border: 1px solid var(--border-color); padding: 0.5rem;">${course.title}</th>`;
      });
      
      comparisonHTML += '</tr></thead><tbody>';
      
      // Compare different aspects
      const aspects = [
        { key: 'topic', label: 'Topic' },
        { key: 'level', label: 'Difficulty Level' },
        { key: 'duration', label: 'Duration' },
        { key: 'rating', label: 'Rating' },
        { key: 'learnerCount', label: 'Learners', format: (val) => val.toLocaleString() },
        { key: 'audience', label: 'Target Audience' }
      ];
      
      aspects.forEach(aspect => {
        comparisonHTML += `<tr><td style="border: 1px solid var(--border-color); padding: 0.5rem; font-weight: 600;">${aspect.label}</td>`;
        selectedCourses.forEach(course => {
          let value = course[aspect.key];
          if (aspect.format) {
            value = aspect.format(value);
          }
          comparisonHTML += `<td style="border: 1px solid var(--border-color); padding: 0.5rem;">${value}</td>`;
        });
        comparisonHTML += '</tr>';
      });
      
      comparisonHTML += '</tbody></table></div>';
      comparisonHTML += '<div style="margin-top: 1rem; text-align: center;"><button onclick="clearComparison()" style="background: var(--accent-color); color: white; border: none; padding: 0.5rem 1rem; border-radius: var(--border-radius); cursor: pointer;">Clear Comparison</button></div>';
      
      content.innerHTML = comparisonHTML;
    }

    // Clear comparison
    function clearComparison() {
      selectedForComparison = [];
      updateComparisonCount();
      updateComparisonButton();
      
      // Uncheck all comparison checkboxes
      document.querySelectorAll('.compare-checkbox').forEach(checkbox => {
        checkbox.checked = false;
      });
      
      closeModal('comparisonModal');
    }

    // Authentication form handlers
    async function handleLogin(event) {
      event.preventDefault();
      
      const email = document.getElementById('loginEmail').value;
      const password = document.getElementById('loginPassword').value;
      
      try {
        if (window.login) {
          console.log('Attempting login with:', email); // Debug log
          const result = await window.login(email, password);
          console.log('Login result:', result); // Debug log
          if (result.success) {
            document.getElementById('loginForm').reset();
            closeModal('loginModal');
          } else {
            alert(result.error || 'Login failed. Please try again.');
          }
        } else {
          console.error('Firebase auth not loaded');
          alert('Authentication system not ready. Please refresh the page and try again.');
        }
      } catch (error) {
        console.error('Login error:', error);
        alert('Login failed: ' + error.message);
      }
    }

    async function handleSignup(event) {
      event.preventDefault();
      
      const name = document.getElementById('signupName').value;
      const email = document.getElementById('signupEmail').value;
      const password = document.getElementById('signupPassword').value;
      const passwordConfirm = document.getElementById('signupPasswordConfirm').value;
      
      if (password !== passwordConfirm) {
        alert('Passwords do not match');
        return;
      }
      
      try {
        if (window.signup) {
          console.log('Attempting signup with:', email); // Debug log
          const result = await window.signup(email, password, name);
          console.log('Signup result:', result); // Debug log
          if (result.success) {
            document.getElementById('signupForm').reset();
            closeModal('signupModal');
          } else {
            alert(result.error || 'Signup failed. Please try again.');
          }
        } else {
          console.error('Firebase auth not loaded');
          alert('Authentication system not ready. Please refresh the page and try again.');
        }
      } catch (error) {
        console.error('Signup error:', error);
        alert('Signup failed: ' + error.message);
      }
    }

    async function handleForgotPassword() {
      const email = prompt('Enter your email address to reset your password:');
      if (email && window.resetPassword) {
        await window.resetPassword(email);
      }
    }

    async function loginWithGoogle() {
      if (window.loginWithGoogle) {
        await window.loginWithGoogle();
      } else {
        console.error('Firebase auth not loaded');
        alert('Authentication system not ready. Please refresh the page and try again.');
      }
    }

    async function logout() {
      if (window.logout) {
        await window.logout();
      }
    }

    // Global function for user dashboard toggle
    window.toggleUserDashboard = function() {
      const dashboard = document.getElementById('userDashboard');
      if (dashboard) {
        dashboard.style.display = dashboard.style.display === 'none' ? 'block' : 'none';
        
        // Scroll to dashboard if showing
        if (dashboard.style.display === 'block') {
          dashboard.scrollIntoView({ behavior: 'smooth' });
        }
      }
    };

    // Close modal when clicking outside
    window.onclick = function(event) {
      if (event.target.classList.contains('modal')) {
        const modals = document.querySelectorAll('.modal');
        modals.forEach(modal => {
          modal.style.display = 'none';
          modal.setAttribute('aria-hidden', 'true');
        });
      }
    }
  </script>

  <!-- Load your custom Firebase auth script -->
  <script src="firebase-auth.js"></script>
</body>
</html>